var DRTClubTarjeta_debug=window.DRTOptimize_config.debug,DRTClubTarjeta=DRTClubTarjeta||{};(DRTClubTarjeta=function(){function t(t,a,r,n,e,c){return o(function(t,a){return t<<a|t>>>32-a}(o(o(a,t),o(n,c)),e),r)}function a(a,r,n,e,o,c,i){return t(r&n|~r&e,a,r,o,c,i)}function r(a,r,n,e,o,c,i){return t(r&e|n&~e,a,r,o,c,i)}function n(a,r,n,e,o,c,i){return t(r^n^e,a,r,o,c,i)}function e(a,r,n,e,o,c,i){return t(n^(r|~e),a,r,o,c,i)}function o(t,a){var r=(65535&t)+(65535&a);return(t>>16)+(a>>16)+(r>>16)<<16|65535&r}function c(t){return localStorage.getItem(p+t)}function i(t,a,r){var n="";if(r){var e=new Date;e.setTime(e.getTime()+24*r*60*60*1e3),n="; expires="+e.toUTCString()}document.cookie=t+"="+a+n+"; path=/"}function u(t){for(var a=t+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){for(var e=r[n];" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(a))return e.substring(a.length,e.length)}return null}function l(t,a,r){var n={event:t,eventAction:a,eventLabel:r,eventValue:null};dataLayer.push(n)}function d(){var t="";return t+='<div class="drt-club">',t+='<div class="drt-club-modal">',t+='<img alt="La Vanguardia" src="https://www.lavanguardia.com/rsc/images/lv-logo.svg" class="drt-club-logo">',t+='<div class="drt-club-header">',t+="<p>Actualiza tu información de pago para continuar.</p>",t+="</div>",t+='<div class="drt-club-content">',t+="<p>Tu tarjeta está caducada o a punto de caducar. Actualiza tu información de pago para continuar disfrutando de La Vanguardia.</p>",t+="</div>",t+='<div class="drt-club-footer">',t+='<a href="https://www.lavanguardia.com/perfil/ev/suscripciones/cambio-tarjeta" class="drt-club-button">Actualizar tarjeta</a>',t+="</div>",t+='<div class="drt-club-close">',t+='<span class="drt-club-action-close">Lo haré más tarde</span>',t+="</div>",t+="</div>",t+="</div>"}function s(){var t="";return t+='<div class="drt-club-bottom">',t+='<div class="drt-club-bottom-modal">',t+='<div class="drt-club-bottom-header">',t+="<p>",t+="<span>Tu tarjeta está caducada o a punto de caducar.</span>",t+='<a href="https://www.lavanguardia.com/perfil/ev/suscripciones/cambio-tarjeta" class="drt-club-button">Actualizar tarjeta</a>',t+='<span class="drt-club-bottom-button-close">Ahora no</span>',t+="</p>",t+="</div>",t+="</div>",t+="</div>"}function f(t){for(var a=t.split(";"),r=0;r<a.length;r++){var n=a[r].split("=");if("_id_guid"==n[0])return n[1]}return!1}function v(){var t=!1,a=new Date,r=a.getFullYear()+"-"+a.getMonth()+"-"+a.getDate(),n=c("TARJETA_SUSCRIPTION");n?r!=n&&(t=!0):t=!0,$.ajax({url:"https://stories.lavanguardia.com/especial/feeds/LaVanguardia/club/tarjeta-caducada.jsonp?c=1",dataType:"jsonp",data:{version:function(){var t=new Date;return t.getFullYear()+"-"+t.getMonth()+"-"+t.getDate()+"-"+t.getHours()}()},jsonpCallback:"callbackTarjetacaducada",cache:!0}).done(function(a){var n=f(decodeURIComponent(u("_id_guid"))),e=!0;if(t&&(function(t,a,r){localStorage.setItem(p+t,a)}("TARJETA_SUSCRIPTION",r),n))for(var o=m(n),c=a.data,v=0;v<c.length;v++)if(c[v].guid_md5==o){e=!1,l("layout","impression","tarjeta-suscripcion");g=d();$("body").after(g),setTimeout(function(){$(".drt-club-footer a").click(function(){l("layout","click","tarjeta-suscripcion")}),$(".drt-club-action-close").click(function(){$(".drt-club").remove()})},0);break}var b=u("TARJETA_SUSCRIPTION_BOTTOM");if(n&&e&&!b)for(var o=m(n),c=a.data,v=0;v<c.length;v++)if(c[v].guid_md5==o){l("layout","impression","tarjeta-suscripcion-bottom");var g=s();$("body").after(g),setTimeout(function(){$(".drt-club-bottom-footer a").click(function(){l("layout","click","tarjeta-suscripcion-bottom")}),$(".drt-club-bottom-action-close").click(function(){$(".drt-club").remove()}),$(".drt-club-bottom-button-close").click(function(){$(".drt-club-bottom").remove(),i("TARJETA_SUSCRIPTION_BOTTOM","CLOSE",0)})},0);break}}).fail(function(t,a,r){})}function b(){f(decodeURIComponent(u("_id_guid")))&&("undefined"!=typeof jQuery?g||(g=!0,$(document).ready(function(){DRTClubTarjeta_debug&&console.log("DRTClubTarjeta init"),v()})):window.setTimeout(b,50))}var g=!1,p="CLUB_",m=function(t){return function(t){for(var a,r="0123456789ABCDEF",n="",e=0;e<t.length;e++)a=t.charCodeAt(e),n+=r.charAt(a>>>4&15)+r.charAt(15&a);return n}(function(t){for(var a="",r=0;r<32*t.length;r+=8)a+=String.fromCharCode(t[r>>5]>>>r%32&255);return a}(function(t,c){t[c>>5]|=128<<c%32,t[14+(c+64>>>9<<4)]=c;for(var i=1732584193,u=-271733879,l=-1732584194,d=271733878,s=0;s<t.length;s+=16){var f=i,v=u,b=l,g=d;u=e(u=e(u=e(u=e(u=n(u=n(u=n(u=n(u=r(u=r(u=r(u=r(u=a(u=a(u=a(u=a(u,l=a(l,d=a(d,i=a(i,u,l,d,t[s+0],7,-680876936),u,l,t[s+1],12,-389564586),i,u,t[s+2],17,606105819),d,i,t[s+3],22,-1044525330),l=a(l,d=a(d,i=a(i,u,l,d,t[s+4],7,-176418897),u,l,t[s+5],12,1200080426),i,u,t[s+6],17,-1473231341),d,i,t[s+7],22,-45705983),l=a(l,d=a(d,i=a(i,u,l,d,t[s+8],7,1770035416),u,l,t[s+9],12,-1958414417),i,u,t[s+10],17,-42063),d,i,t[s+11],22,-1990404162),l=a(l,d=a(d,i=a(i,u,l,d,t[s+12],7,1804603682),u,l,t[s+13],12,-40341101),i,u,t[s+14],17,-1502002290),d,i,t[s+15],22,1236535329),l=r(l,d=r(d,i=r(i,u,l,d,t[s+1],5,-165796510),u,l,t[s+6],9,-1069501632),i,u,t[s+11],14,643717713),d,i,t[s+0],20,-373897302),l=r(l,d=r(d,i=r(i,u,l,d,t[s+5],5,-701558691),u,l,t[s+10],9,38016083),i,u,t[s+15],14,-660478335),d,i,t[s+4],20,-405537848),l=r(l,d=r(d,i=r(i,u,l,d,t[s+9],5,568446438),u,l,t[s+14],9,-1019803690),i,u,t[s+3],14,-187363961),d,i,t[s+8],20,1163531501),l=r(l,d=r(d,i=r(i,u,l,d,t[s+13],5,-1444681467),u,l,t[s+2],9,-51403784),i,u,t[s+7],14,1735328473),d,i,t[s+12],20,-1926607734),l=n(l,d=n(d,i=n(i,u,l,d,t[s+5],4,-378558),u,l,t[s+8],11,-2022574463),i,u,t[s+11],16,1839030562),d,i,t[s+14],23,-35309556),l=n(l,d=n(d,i=n(i,u,l,d,t[s+1],4,-1530992060),u,l,t[s+4],11,1272893353),i,u,t[s+7],16,-155497632),d,i,t[s+10],23,-1094730640),l=n(l,d=n(d,i=n(i,u,l,d,t[s+13],4,681279174),u,l,t[s+0],11,-358537222),i,u,t[s+3],16,-722521979),d,i,t[s+6],23,76029189),l=n(l,d=n(d,i=n(i,u,l,d,t[s+9],4,-640364487),u,l,t[s+12],11,-421815835),i,u,t[s+15],16,530742520),d,i,t[s+2],23,-995338651),l=e(l,d=e(d,i=e(i,u,l,d,t[s+0],6,-198630844),u,l,t[s+7],10,1126891415),i,u,t[s+14],15,-1416354905),d,i,t[s+5],21,-57434055),l=e(l,d=e(d,i=e(i,u,l,d,t[s+12],6,1700485571),u,l,t[s+3],10,-1894986606),i,u,t[s+10],15,-1051523),d,i,t[s+1],21,-2054922799),l=e(l,d=e(d,i=e(i,u,l,d,t[s+8],6,1873313359),u,l,t[s+15],10,-30611744),i,u,t[s+6],15,-1560198380),d,i,t[s+13],21,1309151649),l=e(l,d=e(d,i=e(i,u,l,d,t[s+4],6,-145523070),u,l,t[s+11],10,-1120210379),i,u,t[s+2],15,718787259),d,i,t[s+9],21,-343485551),i=o(i,f),u=o(u,v),l=o(l,b),d=o(d,g)}return Array(i,u,l,d)}(function(t){for(var a=Array(t.length>>2),r=0;r<a.length;r++)a[r]=0;for(r=0;r<8*t.length;r+=8)a[r>>5]|=(255&t.charCodeAt(r/8))<<r%32;return a}(t),8*t.length))).toLowerCase()};return{init:b}}()).init();