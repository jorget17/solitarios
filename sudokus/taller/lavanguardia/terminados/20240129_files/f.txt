var md = window.md = window.md || {};
(function(window){
 var _conf={"default":{"site":"LV","sourceAgent":"WEB"},"mdusa":{"rsc":{"url":"https://rsc.lavanguardia.com"},"cookie":{"domain":".mundodeportivo.com"},"screens":{"url":"https://us.mundodeportivo.com/screens/{layout}/{flow}/{screen}/{id}"},"evolok":{"api":{"url":"https://ev.mundodeportivo.com"}},"onlyEvolok":"true","recaptcha":{"key":"6LekHqUUAAAAAFGr_ERvycV9pjTeqbczf8GYURlv"},"engagementGroup":"MD","api":{"url":"https://us.mundodeportivo.com/perfil"},"authorizedDomains":"https://us.mundodeportivo.com","base":{"url":"https://us.mundodeportivo.com"}},"evolok":{"api":{"url":"https://ggo.evolok.net"},"linkNif":{"url":"/perfil/ev/link"},"login":{"url":"/perfil/ev/login"},"products":{"url":"/perfil/ev/paywall/productos"}},"md":{"rsc":{"url":"https://rsc.lavanguardia.com"},"cookie":{"domain":".mundodeportivo.com"},"screens":{"url":"https://www.mundodeportivo.com/screens/{layout}/{flow}/{screen}/{id}"},"evolok":{"api":{"url":"https://ev.mundodeportivo.com"}},"onlyEvolok":"true","recaptcha":{"key":"6LekHqUUAAAAAFGr_ERvycV9pjTeqbczf8GYURlv"},"engagementGroup":"MD","api":{"url":"https://www.mundodeportivo.com/perfil"},"authorizedDomains":"https://www.mundodeportivo.com,https://shopping.mundodeportivo.com,https://alta.mundodeportivo.com","base":{"url":"https://www.mundodeportivo.com"}},"club":{"rsc":{"url":"https://rsc.lavanguardia.com"},"cookie":{"domain":".lavanguardia.com"},"screens":{"url":"https://club.lavanguardia.com/screens/{layout}/{flow}/{screen}/{id}"},"evolok":{"api":{"url":"https://ev.lavanguardia.com"}},"onlyEvolok":"true","recaptcha":{"key":"6LdaCqQUAAAAAI3bjqFNdTYJWs4ttsWDAwuSrtIl"},"engagementGroup":"Default","api":{"url":"https://club.lavanguardia.com/perfil"},"authorizedDomains":"https://club.lavanguardia.com","base":{"url":"https://club.lavanguardia.com"}},"lv":{"rsc":{"url":"https://rsc.lavanguardia.com"},"cookie":{"domain":".lavanguardia.com"},"screens":{"url":"https://www.lavanguardia.com/screens/{layout}/{flow}/{screen}/{id}"},"evolok":{"api":{"url":"https://ev.lavanguardia.com"}},"onlyEvolok":"true","recaptcha":{"key":"6LdaCqQUAAAAAI3bjqFNdTYJWs4ttsWDAwuSrtIl"},"engagementGroup":"Default","api":{"url":"https://www.lavanguardia.com/perfil"},"authorizedDomains":"https://www.lavanguardia.com,https://entradas.lavanguardia.com,https://shopping.lavanguardia.com,https://alta.lavanguardia.com","base":{"url":"https://www.lavanguardia.com"}},"api":{"club":{"loquiero":{"url":"https://api.serviciosgrupogodo.com/promo","key":"1U9cpQFaNq3NwvxUOXiJk7vmCoEvcp2e3UYELn6l"}}},"integrations":{"qualifio":"Z2djcC1ldm9sb2stcXVhbGlmaW8="},"r1":{"rsc":{"url":"https://rsc.lavanguardia.com"},"cookie":{"domain":".rac1.cat"},"screens":{"url":"https://www.rac1.cat/screens/{layout}/{flow}/{screen}/{id}"},"evolok":{"api":{"url":"https://ev.rac1.cat"}},"onlyEvolok":"true","recaptcha":{"key":"6LdpK_EaAAAAADWyt7JUdoNtnUWOmUyOv_tYecTo"},"engagementGroup":"R1","api":{"url":"https://www.rac1.cat/perfil"},"authorizedDomains":"https://www.rac1.cat","base":{"url":"https://www.rac1.cat"}}};
var gg = window.gg = window.gg || {};gg.screens = window.gg.screens || {};
gg.accounts=function(){var e=function(){if("undefined"==typeof _conf)throw new Error("Script config is missing!");return _conf},o=function(){if("undefined"!=typeof ggSite)return ggSite;var o=e();for(var n in o)if(o[n].authorizedDomains)for(var t=o[n].authorizedDomains.split(","),i=0;i<t.length;i++)if(t[i].includes(location.hostname))return n;return"lv"},n=function(){return e()[o()]},t=[],i=null,r=[],c=!1,u={};const a="ev_gg_st",g="ev_gg_rt",l="ev_gg_app_rt",f="ev_gg_app_tch_rt",p="ev_ss",d="_id_loggedIn",v=n().cookie.domain;window.appPlatform="";const h="productToAdd";var m="anonimo",k="registrado",w="acceso_digital",_={0:"anonimo",1:"registrado",2:"acceso_digital",3:"exsuscriptor"},y=new gg.EventRegistry,S=function(){return A()},A=function(){const e=ev.cookie.get("ev_ss");return null!=e},I=function(e){var o=ev.cookie.get(e);return!(o&&!(o&&new Date/1e3>o))},C=function(){return"app"===gg.util.getParams("facet")},T=function(e){var o=e||{};o.baseUrl=n().api.url,i=new gg.EvlAccountsService(o),b(),setTimeout((function(){var e=ev.cookie.get(p);if(null!=e){const o=q().guid,n=I("ev_gg_tch_rt"),t=I(g),i={touch:function(){return gg.paywall.service.touchSession(e)},cookies:function(){return gg.paywall.service.getUserByGuid(o,e)}};if(!t&&!n||C())console.log("*** sesion no chequeada ***"),D(!0);else{console.log("*** sesion chequeada ***");const e=t&&!n;(e?i.cookies:i.touch)().then((function(o){return gg.paywall.service.refreshCookies(e?o:void 0,e?"cookie":"touch")})).then((function(){D(!0)})).catch((function(e){if("SESSION_NOT_FOUND"===e.code||"SECURE_SESSION_NOT_FOUND"===e.code)return Z(),void D(!1);D(!0)}))}}else D(!1)}))},E=function(e){if(null!=_conf.allowedOrigins){var o=_conf.allowedOrigins.split(",");for(s of o)if(s.includes(e))return!0}return!1},b=function(){S()?O():U()},U=function(){var e={};for(var o in gg.cookie.map()){var n=/^_id_/;n.test(o)&&(e[o.replace(n,"")]=o)}e.loggedIn="_id_loggedIn",u=new gg.Cookies(e)},O=function(){var e={};for(var o in ev.cookie.map()){var n=new RegExp("^_id_");n.test(o)&&(e[o.replace(n,"")]=o)}u=new gg.Cookies(e)},N=function(){b();var e=!1;u.authToken&&u.sessionState&&("OPEN"===u.sessionState.val()||"SUPER"===u.sessionState.val())?(u.loggedIn.boolean()||(u.loggedIn.set(1),e=!0),B("logged",e)):(u.loggedIn.boolean()&&(u.loggedIn.remove(),L(),e=!0),B("unlogged",e)),c||(gg.util.map(r,(function(e){gg.registry.register(e.id,e.f,e.args)})),c=!0)},D=function(e){var o=ev.cookie.get(a),n=ev.cookie.get(h),t=!1;e?(null==o&&(t=!0,F(),R()),H("shopping")&&null!=n&&(productToAdd=n,ev.cookie.remove(h,v)),B("logged",t)):(null!=o&&(t=!0,x(),L()),B("unlogged",t))},P=function(){S()?D(!0):N()},R=function(){ev.cookie.set(d,"1",null,v)},L=function(){ev.cookie.remove(d,v)},x=function(){ev.cookie.remove(a,v)},F=function(){return ev.cookie.set(a,"1",null,v),ev.cookie.get(a)},M=function(e,o){y.on(o,e)},G=function(){return S()?A():!!u.loggedIn&&u.loggedIn.boolean()},q=function(){return S()?function(){var e={},o=new RegExp("^_id_");for(var n in b(),u)e[n]=u[n].val();for(var n in e)if(o.test(e[n])){for(var t={},i=e[n].split(";"),r=0;r<i.length;r++){var c=i[r].split("=");try{t[c[0].replace(o,"")]=decodeURIComponent(c[1])}catch(e){}}for(var a in delete e[n],t)e[a]=t[a]}return e.setUserImage=function(e){if("function"==typeof e){e(q().imageUrl||void 0)}},e.getAge=function(){if(!e.birthday)return null;var o=new Date,n=new Date(e.birthday),t=0;(o.getMonth()<n.getMonth()||o.getMonth()==n.getMonth()&&o.getDate()<n.getDate())&&(t=1);var i=o.getFullYear()-n.getFullYear()-t;return-1===i&&(i=null),i},e.getGender=function(){return e.gender&&"string"==typeof e.gender?e.gender.toLowerCase():null},e.hasActiveSubscription=function(){return"1"===gg.cookie.get("_pac")},e.getEvolokId=function(){return e.guid},e.getId=function(){return e.uid},e.getType=function(){return e.type?_[e.type]:G()?"function"==typeof e.hasActiveSubscription&&e.hasActiveSubscription()?w:k:m},e.getRoleName=function(){return e.roles},e.getRegisterDate=function(){if(e.registrationDate&&""!==e.registrationDate){const o=new Date(parseInt(e.registrationDate));return o.getFullYear()+"-"+String(o.getMonth()+1).padStart(2,"0")+"-"+String(o.getDate()).padStart(2,"0")}return""},e.getNewsletterList=function(){return e.newsletters},e.getCommunicationList=function(){return e.communications},e}():function(){b();var e={};for(var o in u)e[o]=u[o].val();return e.setUserImage=function(o){return i.utils.setUserImage({uid:e.uid,lastUpdate:e.lastUpdate,callback:o})},e.getEvolokId=function(){return""},e.getId=function(){return""},e.getType=function(){return m},e.getRoleName=function(){return""},e.getRegisterDate=function(){return""},e.getNewsletterList=function(){return""},e.getCommunicationList=function(){return""},e}()},B=function(e,o){y.trigger(e,o)},z=function(e){e=e||{};for(var t="",i={},r={shopping:"shopping",club:"club",alta:"campaignator",entradas:"entradas"},c=Object.keys(r),u=0;u<c.length;u++)if(H(c[u])){t=r[c[u]];break}if(!t&&e.sourceAgent&&(t=o()+"-"+e.sourceAgent),C()){if(ee())return;i.facet="app"}!e.ignoreSource&&t&&ev.gtm.source.save(t,{cookieEnabled:!0}),ev.commons.referrer.save(),window.location=n().base.url+"/perfil/ev/login"+ev.utils.formatParams(i)},H=function(e){return window.location.href.indexOf(e)>-1},W=function(e,o,i,r){if("login"===e&&"login"===o&&H("shopping")&&(H("subscripcions")||H("suscripciones")))try{productToAdd&&ev.cookie.set(h,productToAdd,null,v)}catch(e){}if("true"===n().onlyEvolok&&"login"===e&&"login"===o)z(i);else{var c={layout:r&&r.selector?"embedded":"popup",flow:e,screen:o,id:t.length};for(var u in i)c[u]=i[u];o=new gg.WindowLoad(r);t.push(o),o.onClose((function(){P()})),o.load(n().screens.url,c)}},Y=function(e,o,n,t){S()?function(e,o,n,t){"login"===e&&"login"===o?z(n):"verify_email"===e?W(e,o,n,t):console.warn("** This flow ("+e+") is not supported with Evolok impl **")}(e,o,n,t):W(e,o,n,t)},Z=function(){for(var e in ev.cookie.remove("ev_ss",v),ev.cookie.remove("ex_ss",v),ev.cookie.remove(g,v),gg.cookie.map()){/^(_id_|ev_gg)/.test(e)&&ev.cookie.remove(e,v)}L()},Q=function(){var e=navigator.userAgent.match(/gg[a-zA-Z]*\/[0-9a-zA-Z.]*[0-9\s]/);return(e=e?e[0].toLowerCase().trim():"").toLowerCase().trim()},V=function(){const e=Q().split("/")[1];return e?parseInt(e.replace(/\./g,""),10):0},j=function(e){appPlatform=e?"ios"===e?1:2:0},J=function(e,o){if(!e)return!1;o=o||{};const n=Q();try{if(1===appPlatform||n.includes("ios"))return window.webkit.messageHandlers.appCallback.postMessage(e),!0;if(2===appPlatform||n.includes("and"))return appCallback.sendMessage(e),!0;console.log("fwdToApp for userAgent="+n)}catch(o){console.log("caught exception fwdToApp for userAgent="+n+"; message="+e)}return!1},K=function(){const e=Q(),o=V(),n="SUBSCRIPTION_REQUIRED";try{return"undefined"!=typeof __evContext&&-1!==__evContext.token.indexOf("anonimo")||"undefined"==typeof __evContext&&!gg.accounts.isEvolokCookiePresent()?ee():"function"==typeof gg.accounts.getUser().hasActiveSubscription&&gg.accounts.getUser().hasActiveSubscription()?$():1===appPlatform||e.includes("ios")?(window.webkit.messageHandlers.appCallback.postMessage(n),!0):(2===appPlatform||e.includes("and"))&&o&&o>=500?(appCallback.sendMessage(n),!0):(console.log("fwdToAppPaywall for="+appPlatform),!1)}catch(e){return console.log("caught exception fwdToAppPaywall for="+appPlatform),!0}},X=function(){return J("UNAUTHORIZED")},$=function(){return J("PROFILE")},ee=function(){return J("REQUIRED_LOGIN")},oe=function(e,o){gg.paywall.service.refreshAllCookies(o).then((function(){gg.paywall.init(e,!0),setTimeout((function(){D(!0)}))})).catch((function(e){"session_not_found"===e.errorCode&&X()}))},ne=function(e,o){const n=q().guid;if(!n)return void oe(e,o);const t=I(f),i=I(l),r={touch:function(){return gg.paywall.service.touchSession(o)},cookies:function(){return gg.paywall.service.getUserByGuid(n,o)}};if(i||t){console.log("*** sesion app chequeada ***");const o=i&&!t;(o?r.cookies:r.touch)().then((function(e){return gg.paywall.service.refreshAppCookies(o?e:void 0,o?"cookie":"touch")})).then((function(){gg.paywall.init(e,!0)})).catch((function(o){"SESSION_NOT_FOUND"!==o.code&&"SECURE_SESSION_NOT_FOUND"!==o.code?gg.paywall.init(e,!0):X()}))}else console.log("*** sesion app no chequeada ***"),gg.paywall.init(e,!0)},te=function(e){gg.paywall.initNotConsent(e)},ie=function(e){gg.paywall.service.refreshAllCookies(e).then((function(){setTimeout((function(){D(!0)}))})).catch((function(e){"session_not_found"===e.errorCode&&X()}))},re=function(e){const o=q().guid;if(!o)return void ie(e);const n=I(f),t=I(l),i={touch:function(){return gg.paywall.service.touchSession(e)},cookies:function(){return gg.paywall.service.getUserByGuid(o,e)}};if(t||n){console.log("*** sesion app chequeada ***");const e=t&&!n;(e?i.cookies:i.touch)().then((function(o){return gg.paywall.service.refreshAppCookies(e?o:void 0,e?"cookie":"touch")})).catch((function(e){"SESSION_NOT_FOUND"!==e.code&&"SECURE_SESSION_NOT_FOUND"!==e.code||X()}))}else console.log("*** sesion app no chequeada ***")};return{init:function(e){S()?T(e):function(e){var o=e||{};o.baseUrl=n().api.url,E(window.location.hostname)&&(o.baseUrl=o.customUrl||n().api.url),o.oAuthFlow=o.oAuthFlow||"popup",i=new gg.AccountsService(o),b(),setTimeout((function(){u.authToken&&u.loggedIn.boolean()&&(!u.refreshTime||u.refreshTime.val()<new Date/1e3)?i.checkBrowser().done((function(){A()?(x(),u.loggedIn.boolean()&&u.loggedIn.remove(),T()):P()})):P()}))}(e)},refresh:P,onLogged:function(e){M(e,"logged")},onUnlogged:function(e){M(e,"unlogged")},isLogged:G,getUser:q,show:Y,login:function(e){Y("login","login",e)},logout:function(){var e;S()?((e=gg.cookie.get(p))?gg.paywall.service.deleteSession(e):Promise.resolve()).then((function(){Z(),D(!1)})).catch((function(){})):i.logout().done((function(){P()}))},getScreen:function(e){return t[e]},register:function(e,o,n){r.push({id:e,f:o,args:n}),c&&gg.registry.register(e,o,n)},cookieName:"_id_uid",evInit:function(e){gg.paywall.init(e)},evAppInit:function(e,o){gg.paywall.init(e)},evNotConsent:te,getService:function(){return i},getEvEnabled:S,reloadToEvLogin:z,evolokClearCookies:Z,didomiLogged:function(){return A()},evAppInitV2:function(e,o,n){if(j(n),!o)return;const t=ev.cookie.get(p);if(-1!==o.indexOf("evolok--")){if("anonimo"===(o=o.replace("evolok--","")))return void gg.paywall.init(e,!0);if(o===t)return void ne(e,o);oe(e,o)}else{if(t)return void ne(e,t);!function(e,o){gg.paywall.service.refreshAllCookiesWithLegacy(o).then((function(){A()&&(gg.paywall.init(e,!0),setTimeout((function(){D(!0)})))})).catch((function(e){}))}(e,o)}},fwdToAppInvalidSession:X,fwdToAppPaywall:K,calcPlatform:j,getCustomUserAgent:Q,getAppVersion:V,fwdToNativeApp:function(){return J("HOME")},evAppInitAdi:function(e,o){if(j(o),!e)return;const n=ev.cookie.get(p);if(-1!==e.indexOf("evolok--")){if("anonimo"===(e=e.replace("evolok--","")))return;if(e===n)return void re(e);ie(e)}else{if(n)return void re(n);!function(e){gg.paywall.service.refreshAllCookiesWithLegacy(e).then((function(){A()&&setTimeout((function(){D(!0)}))})).catch((function(e){}))}(e)}},fwdToAppLogin:ee,isEvolokCookiePresent:A,getMultitenantScriptConfig:n,getGGSite:o,getScriptConfig:e,getEvolokSessionId:function(){const e=q().authToken;return e&&S()?-1!==e.indexOf("evolok--")?e.replace("evolok--",""):ev.cookie.get(p):""},evAppNotConsent:function(e,o){if((o=o||{}).token&&-1!==o.token.indexOf("evolok--")&&"anonimo"===o.token.replace("evolok--",""))return void te(!0);o.onAuth&&"function"==typeof o.onAuth&&(o.onAuth(e,o.token,o.platform),o.onAuthTriggered=!0)},getUserType:function(){return q().getType()},fwdToSubscribe:function(e){!1===K()&&(e=e||gg.accounts.getMultitenantScriptConfig().base.url+"/suscripciones/suscribete.html?utm_source=lavanguardia&utm_medium=boton-suscripcion&utm_campaign=captacion&utm_content=header",ev.utils.redirect(e))},isApp:C}}();
gg.AccountsService=function(e){var n=function(n,r){var o=gg.util.url(e.baseUrl+n);if(e.lang&&(o.params.lang=e.lang),null!=r)for(var t in r)o.params[t]=r[t];for(var t in o.params)o.params[t]=encodeURIComponent(o.params[t]);return o.toString()},r=function(e){var n=new gg.AccountsServicePromise;return e(n),n.handler};return{login:function(e,o){var t={email:e,password:o};return r(function(e){gg.ajax.post(n("/user/login"),t,function(n){e.resolve(n)},{credentials:!0})})},oAuthLogin:function(o){return r(function(r){var t=n("/user/oauth/"+o);if("redirect"===e.oAuthFlow)window.location.href=t+"?redirect="+window.location.href;else if("popup"===e.oAuthFlow){var a=window.open(t,o,"popup=yes,alwaysRaised=yes");window.focus&&a.focus();var s=setInterval(function(){a.closed&&(clearInterval(s),r.resolve(!0))},1e3)}})},getInfo:function(){return r(function(e){gg.ajax.get(n("/user"),function(n){e.resolve(n)},{credentials:!0})})},signup:function(e){return e.sourceRef=e.sourceRef||window.location.href,r(function(r){gg.ajax.post(n("/user"),e,function(e){r.resolve(e)},{credentials:!0,type:"json"})})},update:function(e){return e.sourceRef=e.sourceRef||window.location.href,r(function(r){gg.ajax.put(n("/user"),e,function(e){r.resolve(e)},{credentials:!0,type:"json"})})},logout:function(){return r(function(e){gg.ajax.post(n("/user/logout"),{},function(n){e.resolve(n)},{credentials:!0})})},changePassword:function(e,o){return r(function(r){var t={password:e,oldPassword:o};gg.ajax.post(n("/user/password"),t,function(e){r.resolve(e)},{credentials:!0,type:"json"})})},resetPassword:function(e,o){return r(function(r){var t={password:e},a=gg.util.url().params["auth-token"],s=a?{"auth-token":a}:{};gg.ajax.post(n("/user/password/"+o,s),t,function(e){r.resolve(e)},{credentials:!0,type:"json"})})},forgottenPassword:function(e){var o={email:e};return r(function(e){gg.ajax.post(n("/user/request/password-reset"),o,function(n){e.resolve(n)})})},requestVerification:function(){return r(function(e){gg.ajax.post(n("/user/request/verification"),{},function(n){e.resolve(n)},{credentials:!0})})},checkBrowser:function(){return r(function(e){gg.ajax.get(n("/user/ev/check/browser"),function(n){e.resolve(n)},{credentials:!0})})},utils:{setUserImage:function(e){if(void 0!==e.uid&&void 0!==e.lastUpdate){var o=n("/user/"+e.uid+"/img/"+e.lastUpdate);return r(function(n){e.callback&&gg.ajax.get(o,function(r){200==r.status?e.callback(o):e.callback(),n.resolve(r)},{credentials:!0})})}return null},getFullPath:n}}};
gg.AccountsServicePromise=function(){var s=!1,t=null,e={},n=null,i=null,u=null;this.done=function(t){return s?t(e):n=t,this},this.success=function(n){return s&&1==t?n(e):i=n,this},this.failure=function(n){return s&&0==t?n(e):u=n,this},this.resolve=function(r){if(s=!0,!0===r)t=!0;else{t=r.status>=200&&r.status<300;try{e=JSON.parse(r.responseText)}catch(s){}}n&&n(r.status,e),t&&i?i(e):!t&&u&&u(e)},this.handler={done:this.done,success:this.success,failure:this.failure}};
gg.ajax=function(){var e=function(e,n,o){t("GET",e,null,{},n,o)},n=function(e,n,r,i,u){var a="json"==(u=u||{}).type?"application/json":"application/x-www-form-urlencoded",s="json"==u.type?JSON.stringify(r):o(r);t(e,n,a,s,i,u)},t=function(e,n,t,o,r,i){i=i||{};var u=new XMLHttpRequest;u.open(e,n,!0),t&&u.setRequestHeader("Content-type",t),1==i.credentials&&(u.withCredentials=!0),i.headers&&Object.keys(i.headers).forEach(function(e){u.setRequestHeader(e,i.headers[e])}),u.onload=function(){r(this)},u.send(o)},o=function(e){var n=[];for(var t in e)n.push(t+"="+encodeURIComponent(e[t]));return n.join("&")};return{get:e,post:function(e,t,o,r){n("POST",e,t,o,r)},put:function(e,t,o,r){n("PUT",e,t,o,r)},delete:function(e,n,o){t("DELETE",e,null,{},n,o)},load:function(n,t){e(n,function(e){200==e.status&&(t.innerHTML=e.responseText,setTimeout(function(){for(var e=t.querySelectorAll("script"),n=0;n<e.length;n++){var o=e[n],r=document.createElement("script"),i=document.createTextNode(o.innerHTML);r.appendChild(i),o.parentNode.replaceChild(r,o)}},100))})},utils:{statusOk:function(e){return e.status>=200&&e.status<300},url:function(e,n){for(var t in n)if(e.match(new RegExp("\\{"+t+"\\}")))e=e.replace("{"+t+"}",n[t]);else{var o=gg.util.url(e);o.params[t]=encodeURIComponent(n[t]),e=o.toString()}return e}}}}();
gg.Cookies=function(o,n){var e=n||{};for(var r in o)e[r]=function(o){return{val:function(){return gg.cookie.get(o)},boolean:function(){var o=this.val();return 1==o||"true"===o},set:function(n){gg.cookie.set(o,n)},remove:function(){gg.cookie.remove(o)}}}(o[r]);return e};
!function(t){var n={};function r(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)r.d(e,i,function(n){return t[n]}.bind(null,i));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=121)}([function(t,n,r){var e=r(1),i=r(7),o=r(14),u=r(11),c=r(17),a=function(t,n,r){var f,s,l,h,v=t&a.F,p=t&a.G,d=t&a.S,g=t&a.P,y=t&a.B,b=p?e:d?e[n]||(e[n]={}):(e[n]||{}).prototype,m=p?i:i[n]||(i[n]={}),x=m.prototype||(m.prototype={});for(f in p&&(r=n),r)l=((s=!v&&b&&void 0!==b[f])?b:r)[f],h=y&&s?c(l,e):g&&"function"==typeof l?c(Function.call,l):l,b&&u(b,f,l,t&a.U),m[f]!=l&&o(m,f,h),g&&x[f]!=l&&(x[f]=l)};e.core=i,a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,r){var e=r(4);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n,r){var e=r(48)("wks"),i=r(29),o=r(1).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n,r){var e=r(19),i=Math.min;t.exports=function(t){return t>0?i(e(t),9007199254740991):0}},function(t,n){var r=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=r)},function(t,n,r){t.exports=!r(2)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(3),i=r(88),o=r(26),u=Object.defineProperty;n.f=r(8)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){var e=r(24);t.exports=function(t){return Object(e(t))}},function(t,n,r){var e=r(1),i=r(14),o=r(13),u=r(29)("src"),c=r(126),a=(""+c).split("toString");r(7).inspectSource=function(t){return c.call(t)},(t.exports=function(t,n,r,c){var f="function"==typeof r;f&&(o(r,"name")||i(r,"name",n)),t[n]!==r&&(f&&(o(r,u)||i(r,u,t[n]?""+t[n]:a.join(String(n)))),t===e?t[n]=r:c?t[n]?t[n]=r:i(t,n,r):(delete t[n],i(t,n,r)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[u]||c.call(this)})},function(t,n,r){var e=r(0),i=r(2),o=r(24),u=/"/g,c=function(t,n,r,e){var i=String(o(t)),c="<"+n;return""!==r&&(c+=" "+r+'="'+String(e).replace(u,"&quot;")+'"'),c+">"+i+"</"+n+">"};t.exports=function(t,n){var r={};r[t]=n(c),e(e.P+e.F*i(function(){var n=""[t]('"');return n!==n.toLowerCase()||n.split('"').length>3}),"String",r)}},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n,r){var e=r(9),i=r(28);t.exports=r(8)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var e=r(44),i=r(24);t.exports=function(t){return e(i(t))}},function(t,n,r){"use strict";var e=r(2);t.exports=function(t,n){return!!t&&e(function(){n?t.call(null,function(){},1):t.call(null)})}},function(t,n,r){var e=r(18);t.exports=function(t,n,r){if(e(t),void 0===n)return t;switch(r){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,i){return t.call(n,r,e,i)}}return function(){return t.apply(n,arguments)}}},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?e:r)(t)}},function(t,n,r){var e=r(45),i=r(28),o=r(15),u=r(26),c=r(13),a=r(88),f=Object.getOwnPropertyDescriptor;n.f=r(8)?f:function(t,n){if(t=o(t),n=u(n,!0),a)try{return f(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(0),i=r(7),o=r(2);t.exports=function(t,n){var r=(i.Object||{})[t]||Object[t],u={};u[t]=n(r),e(e.S+e.F*o(function(){r(1)}),"Object",u)}},function(t,n,r){var e=r(17),i=r(44),o=r(10),u=r(6),c=r(104);t.exports=function(t,n){var r=1==t,a=2==t,f=3==t,s=4==t,l=6==t,h=5==t||l,v=n||c;return function(n,c,p){for(var d,g,y=o(n),b=i(y),m=e(c,p,3),x=u(b.length),w=0,S=r?v(n,x):a?v(n,0):void 0;x>w;w++)if((h||w in b)&&(g=m(d=b[w],w,y),t))if(r)S[w]=g;else if(g)switch(t){case 3:return!0;case 5:return d;case 6:return w;case 2:S.push(d)}else if(s)return!1;return l?-1:f||s?s:S}}},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n,r){"use strict";if(r(8)){var e=r(30),i=r(1),o=r(2),u=r(0),c=r(59),a=r(84),f=r(17),s=r(42),l=r(28),h=r(14),v=r(43),p=r(19),d=r(6),g=r(115),y=r(32),b=r(26),m=r(13),x=r(46),w=r(4),S=r(10),_=r(76),E=r(33),O=r(35),P=r(34).f,M=r(78),F=r(29),A=r(5),I=r(22),j=r(49),N=r(47),L=r(80),T=r(40),k=r(52),R=r(41),D=r(79),C=r(106),B=r(9),W=r(20),U=B.f,V=W.f,G=i.RangeError,z=i.TypeError,Y=i.Uint8Array,q=Array.prototype,K=a.ArrayBuffer,$=a.DataView,H=I(0),J=I(2),X=I(3),Z=I(4),Q=I(5),tt=I(6),nt=j(!0),rt=j(!1),et=L.values,it=L.keys,ot=L.entries,ut=q.lastIndexOf,ct=q.reduce,at=q.reduceRight,ft=q.join,st=q.sort,lt=q.slice,ht=q.toString,vt=q.toLocaleString,pt=A("iterator"),dt=A("toStringTag"),gt=F("typed_constructor"),yt=F("def_constructor"),bt=c.CONSTR,mt=c.TYPED,xt=c.VIEW,wt=I(1,function(t,n){return Pt(N(t,t[yt]),n)}),St=o(function(){return 1===new Y(new Uint16Array([1]).buffer)[0]}),_t=!!Y&&!!Y.prototype.set&&o(function(){new Y(1).set({})}),Et=function(t,n){var r=p(t);if(r<0||r%n)throw G("Wrong offset!");return r},Ot=function(t){if(w(t)&&mt in t)return t;throw z(t+" is not a typed array!")},Pt=function(t,n){if(!(w(t)&&gt in t))throw z("It is not a typed array constructor!");return new t(n)},Mt=function(t,n){return Ft(N(t,t[yt]),n)},Ft=function(t,n){for(var r=0,e=n.length,i=Pt(t,e);e>r;)i[r]=n[r++];return i},At=function(t,n,r){U(t,n,{get:function(){return this._d[r]}})},It=function(t){var n,r,e,i,o,u,c=S(t),a=arguments.length,s=a>1?arguments[1]:void 0,l=void 0!==s,h=M(c);if(null!=h&&!_(h)){for(u=h.call(c),e=[],n=0;!(o=u.next()).done;n++)e.push(o.value);c=e}for(l&&a>2&&(s=f(s,arguments[2],2)),n=0,r=d(c.length),i=Pt(this,r);r>n;n++)i[n]=l?s(c[n],n):c[n];return i},jt=function(){for(var t=0,n=arguments.length,r=Pt(this,n);n>t;)r[t]=arguments[t++];return r},Nt=!!Y&&o(function(){vt.call(new Y(1))}),Lt=function(){return vt.apply(Nt?lt.call(Ot(this)):Ot(this),arguments)},Tt={copyWithin:function(t,n){return C.call(Ot(this),t,n,arguments.length>2?arguments[2]:void 0)},every:function(t){return Z(Ot(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return D.apply(Ot(this),arguments)},filter:function(t){return Mt(this,J(Ot(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return Q(Ot(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return tt(Ot(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){H(Ot(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return rt(Ot(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return nt(Ot(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ft.apply(Ot(this),arguments)},lastIndexOf:function(t){return ut.apply(Ot(this),arguments)},map:function(t){return wt(Ot(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return ct.apply(Ot(this),arguments)},reduceRight:function(t){return at.apply(Ot(this),arguments)},reverse:function(){for(var t,n=Ot(this).length,r=Math.floor(n/2),e=0;e<r;)t=this[e],this[e++]=this[--n],this[n]=t;return this},some:function(t){return X(Ot(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return st.call(Ot(this),t)},subarray:function(t,n){var r=Ot(this),e=r.length,i=y(t,e);return new(N(r,r[yt]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,d((void 0===n?e:y(n,e))-i))}},kt=function(t,n){return Mt(this,lt.call(Ot(this),t,n))},Rt=function(t){Ot(this);var n=Et(arguments[1],1),r=this.length,e=S(t),i=d(e.length),o=0;if(i+n>r)throw G("Wrong length!");for(;o<i;)this[n+o]=e[o++]},Dt={entries:function(){return ot.call(Ot(this))},keys:function(){return it.call(Ot(this))},values:function(){return et.call(Ot(this))}},Ct=function(t,n){return w(t)&&t[mt]&&"symbol"!=typeof n&&n in t&&String(+n)==String(n)},Bt=function(t,n){return Ct(t,n=b(n,!0))?l(2,t[n]):V(t,n)},Wt=function(t,n,r){return!(Ct(t,n=b(n,!0))&&w(r)&&m(r,"value"))||m(r,"get")||m(r,"set")||r.configurable||m(r,"writable")&&!r.writable||m(r,"enumerable")&&!r.enumerable?U(t,n,r):(t[n]=r.value,t)};bt||(W.f=Bt,B.f=Wt),u(u.S+u.F*!bt,"Object",{getOwnPropertyDescriptor:Bt,defineProperty:Wt}),o(function(){ht.call({})})&&(ht=vt=function(){return ft.call(this)});var Ut=v({},Tt);v(Ut,Dt),h(Ut,pt,Dt.values),v(Ut,{slice:kt,set:Rt,constructor:function(){},toString:ht,toLocaleString:Lt}),At(Ut,"buffer","b"),At(Ut,"byteOffset","o"),At(Ut,"byteLength","l"),At(Ut,"length","e"),U(Ut,dt,{get:function(){return this[mt]}}),t.exports=function(t,n,r,a){var f=t+((a=!!a)?"Clamped":"")+"Array",l="get"+t,v="set"+t,p=i[f],y=p||{},b=p&&O(p),m=!p||!c.ABV,S={},_=p&&p.prototype,M=function(t,r){U(t,r,{get:function(){return function(t,r){var e=t._d;return e.v[l](r*n+e.o,St)}(this,r)},set:function(t){return function(t,r,e){var i=t._d;a&&(e=(e=Math.round(e))<0?0:e>255?255:255&e),i.v[v](r*n+i.o,e,St)}(this,r,t)},enumerable:!0})};m?(p=r(function(t,r,e,i){s(t,p,f,"_d");var o,u,c,a,l=0,v=0;if(w(r)){if(!(r instanceof K||"ArrayBuffer"==(a=x(r))||"SharedArrayBuffer"==a))return mt in r?Ft(p,r):It.call(p,r);o=r,v=Et(e,n);var y=r.byteLength;if(void 0===i){if(y%n)throw G("Wrong length!");if((u=y-v)<0)throw G("Wrong length!")}else if((u=d(i)*n)+v>y)throw G("Wrong length!");c=u/n}else c=g(r),o=new K(u=c*n);for(h(t,"_d",{b:o,o:v,l:u,e:c,v:new $(o)});l<c;)M(t,l++)}),_=p.prototype=E(Ut),h(_,"constructor",p)):o(function(){p(1)})&&o(function(){new p(-1)})&&k(function(t){new p,new p(null),new p(1.5),new p(t)},!0)||(p=r(function(t,r,e,i){var o;return s(t,p,f),w(r)?r instanceof K||"ArrayBuffer"==(o=x(r))||"SharedArrayBuffer"==o?void 0!==i?new y(r,Et(e,n),i):void 0!==e?new y(r,Et(e,n)):new y(r):mt in r?Ft(p,r):It.call(p,r):new y(g(r))}),H(b!==Function.prototype?P(y).concat(P(b)):P(y),function(t){t in p||h(p,t,y[t])}),p.prototype=_,e||(_.constructor=p));var F=_[pt],A=!!F&&("values"==F.name||null==F.name),I=Dt.values;h(p,gt,!0),h(_,mt,f),h(_,xt,!0),h(_,yt,p),(a?new p(1)[dt]==f:dt in _)||U(_,dt,{get:function(){return f}}),S[f]=p,u(u.G+u.W+u.F*(p!=y),S),u(u.S,f,{BYTES_PER_ELEMENT:n}),u(u.S+u.F*o(function(){y.of.call(p,1)}),f,{from:It,of:jt}),"BYTES_PER_ELEMENT"in _||h(_,"BYTES_PER_ELEMENT",n),u(u.P,f,Tt),R(f),u(u.P+u.F*_t,f,{set:Rt}),u(u.P+u.F*!A,f,Dt),e||_.toString==ht||(_.toString=ht),u(u.P+u.F*o(function(){new p(1).slice()}),f,{slice:kt}),u(u.P+u.F*(o(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!o(function(){_.toLocaleString.call([1,2])})),f,{toLocaleString:Lt}),T[f]=A?F:I,e||A||h(_,pt,I)}}else t.exports=function(){}},function(t,n,r){var e=r(4);t.exports=function(t,n){if(!e(t))return t;var r,i;if(n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!e(i=r.call(t)))return i;if(!n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,n,r){var e=r(29)("meta"),i=r(4),o=r(13),u=r(9).f,c=0,a=Object.isExtensible||function(){return!0},f=!r(2)(function(){return a(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!a(t))return"F";if(!n)return"E";s(t)}return t[e].i},getWeak:function(t,n){if(!o(t,e)){if(!a(t))return!0;if(!n)return!1;s(t)}return t[e].w},onFreeze:function(t){return f&&l.NEED&&a(t)&&!o(t,e)&&s(t),t}}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n){t.exports=!1},function(t,n,r){var e=r(90),i=r(63);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n,r){var e=r(19),i=Math.max,o=Math.min;t.exports=function(t,n){return(t=e(t))<0?i(t+n,0):o(t,n)}},function(t,n,r){var e=r(3),i=r(91),o=r(63),u=r(62)("IE_PROTO"),c=function(){},a=function(){var t,n=r(60)("iframe"),e=o.length;for(n.style.display="none",r(64).appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),a=t.F;e--;)delete a.prototype[o[e]];return a()};t.exports=Object.create||function(t,n){var r;return null!==t?(c.prototype=e(t),r=new c,c.prototype=null,r[u]=t):r=a(),void 0===n?r:i(r,n)}},function(t,n,r){var e=r(90),i=r(63).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n,r){var e=r(13),i=r(10),o=r(62)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,r){var e=r(5)("unscopables"),i=Array.prototype;null==i[e]&&r(14)(i,e,{}),t.exports=function(t){i[e][t]=!0}},function(t,n,r){var e=r(4);t.exports=function(t,n){if(!e(t)||t._t!==n)throw TypeError("Incompatible receiver, "+n+" required!");return t}},function(t,n,r){var e=r(9).f,i=r(13),o=r(5)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var e=r(0),i=r(24),o=r(2),u=r(66),c="["+u+"]",a=RegExp("^"+c+c+"*"),f=RegExp(c+c+"*$"),s=function(t,n,r){var i={},c=o(function(){return!!u[t]()||"​"!="​"[t]()}),a=i[t]=c?n(l):u[t];r&&(i[r]=a),e(e.P+e.F*c,"String",i)},l=s.trim=function(t,n){return t=String(i(t)),1&n&&(t=t.replace(a,"")),2&n&&(t=t.replace(f,"")),t};t.exports=s},function(t,n){t.exports={}},function(t,n,r){"use strict";var e=r(1),i=r(9),o=r(8),u=r(5)("species");t.exports=function(t){var n=e[t];o&&n&&!n[u]&&i.f(n,u,{configurable:!0,get:function(){return this}})}},function(t,n){t.exports=function(t,n,r,e){if(!(t instanceof n)||void 0!==e&&e in t)throw TypeError(r+": incorrect invocation!");return t}},function(t,n,r){var e=r(11);t.exports=function(t,n,r){for(var i in n)e(t,i,n[i],r);return t}},function(t,n,r){var e=r(23);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(23),i=r(5)("toStringTag"),o="Arguments"==e(function(){return arguments}());t.exports=function(t){var n,r,u;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,n){try{return t[n]}catch(t){}}(n=Object(t),i))?r:o?e(n):"Object"==(u=e(n))&&"function"==typeof n.callee?"Arguments":u}},function(t,n,r){var e=r(3),i=r(18),o=r(5)("species");t.exports=function(t,n){var r,u=e(t).constructor;return void 0===u||null==(r=e(u)[o])?n:i(r)}},function(t,n,r){var e=r(7),i=r(1),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,n){return o[t]||(o[t]=void 0!==n?n:{})})("versions",[]).push({version:e.version,mode:r(30)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,n,r){var e=r(15),i=r(6),o=r(32);t.exports=function(t){return function(n,r,u){var c,a=e(n),f=i(a.length),s=o(u,f);if(t&&r!=r){for(;f>s;)if((c=a[s++])!=c)return!0}else for(;f>s;s++)if((t||s in a)&&a[s]===r)return t||s||0;return!t&&-1}}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var e=r(23);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){var e=r(5)("iterator"),i=!1;try{var o=[7][e]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,n){if(!n&&!i)return!1;var r=!1;try{var o=[7],u=o[e]();u.next=function(){return{done:r=!0}},o[e]=function(){return u},t(o)}catch(t){}return r}},function(t,n,r){"use strict";var e=r(3);t.exports=function(){var t=e(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}},function(t,n,r){"use strict";var e=r(46),i=RegExp.prototype.exec;t.exports=function(t,n){var r=t.exec;if("function"==typeof r){var o=r.call(t,n);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==e(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,n)}},function(t,n,r){"use strict";r(108);var e=r(11),i=r(14),o=r(2),u=r(24),c=r(5),a=r(81),f=c("species"),s=!o(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),l=function(){var t=/(?:)/,n=t.exec;t.exec=function(){return n.apply(this,arguments)};var r="ab".split(t);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();t.exports=function(t,n,r){var h=c(t),v=!o(function(){var n={};return n[h]=function(){return 7},7!=""[t](n)}),p=v?!o(function(){var n=!1,r=/a/;return r.exec=function(){return n=!0,null},"split"===t&&(r.constructor={},r.constructor[f]=function(){return r}),r[h](""),!n}):void 0;if(!v||!p||"replace"===t&&!s||"split"===t&&!l){var d=/./[h],g=r(u,h,""[t],function(t,n,r,e,i){return n.exec===a?v&&!i?{done:!0,value:d.call(n,r,e)}:{done:!0,value:t.call(r,n,e)}:{done:!1}}),y=g[0],b=g[1];e(String.prototype,t,y),i(RegExp.prototype,h,2==n?function(t,n){return b.call(t,this,n)}:function(t){return b.call(t,this)})}}},function(t,n,r){var e=r(17),i=r(103),o=r(76),u=r(3),c=r(6),a=r(78),f={},s={};(n=t.exports=function(t,n,r,l,h){var v,p,d,g,y=h?function(){return t}:a(t),b=e(r,l,n?2:1),m=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(o(y)){for(v=c(t.length);v>m;m++)if((g=n?b(u(p=t[m])[0],p[1]):b(t[m]))===f||g===s)return g}else for(d=y.call(t);!(p=d.next()).done;)if((g=i(d,b,p.value,n))===f||g===s)return g}).BREAK=f,n.RETURN=s},function(t,n,r){var e=r(1).navigator;t.exports=e&&e.userAgent||""},function(t,n,r){"use strict";var e=r(1),i=r(0),o=r(11),u=r(43),c=r(27),a=r(56),f=r(42),s=r(4),l=r(2),h=r(52),v=r(38),p=r(67);t.exports=function(t,n,r,d,g,y){var b=e[t],m=b,x=g?"set":"add",w=m&&m.prototype,S={},_=function(t){var n=w[t];o(w,t,"delete"==t?function(t){return!(y&&!s(t))&&n.call(this,0===t?0:t)}:"has"==t?function(t){return!(y&&!s(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return y&&!s(t)?void 0:n.call(this,0===t?0:t)}:"add"==t?function(t){return n.call(this,0===t?0:t),this}:function(t,r){return n.call(this,0===t?0:t,r),this})};if("function"==typeof m&&(y||w.forEach&&!l(function(){(new m).entries().next()}))){var E=new m,O=E[x](y?{}:-0,1)!=E,P=l(function(){E.has(1)}),M=h(function(t){new m(t)}),F=!y&&l(function(){for(var t=new m,n=5;n--;)t[x](n,n);return!t.has(-0)});M||((m=n(function(n,r){f(n,m,t);var e=p(new b,n,m);return null!=r&&a(r,g,e[x],e),e})).prototype=w,w.constructor=m),(P||F)&&(_("delete"),_("has"),g&&_("get")),(F||O)&&_(x),y&&w.clear&&delete w.clear}else m=d.getConstructor(n,t,g,x),u(m.prototype,r),c.NEED=!0;return v(m,t),S[t]=m,i(i.G+i.W+i.F*(m!=b),S),y||d.setStrong(m,t,g),m}},function(t,n,r){for(var e,i=r(1),o=r(14),u=r(29),c=u("typed_array"),a=u("view"),f=!(!i.ArrayBuffer||!i.DataView),s=f,l=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<9;)(e=i[h[l++]])?(o(e.prototype,c,!0),o(e.prototype,a,!0)):s=!1;t.exports={ABV:f,CONSTR:s,TYPED:c,VIEW:a}},function(t,n,r){var e=r(4),i=r(1).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n,r){n.f=r(5)},function(t,n,r){var e=r(48)("keys"),i=r(29);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n,r){var e=r(1).document;t.exports=e&&e.documentElement},function(t,n,r){var e=r(4),i=r(3),o=function(t,n){if(i(t),!e(n)&&null!==n)throw TypeError(n+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,e){try{(e=r(17)(Function.call,r(20).f(Object.prototype,"__proto__").set,2))(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,r){return o(t,r),n?t.__proto__=r:e(t,r),t}}({},!1):void 0),check:o}},function(t,n){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,n,r){var e=r(4),i=r(65).set;t.exports=function(t,n,r){var o,u=n.constructor;return u!==r&&"function"==typeof u&&(o=u.prototype)!==r.prototype&&e(o)&&i&&i(t,o),t}},function(t,n,r){"use strict";var e=r(19),i=r(24);t.exports=function(t){var n=String(i(this)),r="",o=e(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(n+=n))1&o&&(r+=n);return r}},function(t,n){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,n){var r=Math.expm1;t.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:r},function(t,n,r){var e=r(19),i=r(24);t.exports=function(t){return function(n,r){var o,u,c=String(i(n)),a=e(r),f=c.length;return a<0||a>=f?t?"":void 0:(o=c.charCodeAt(a))<55296||o>56319||a+1===f||(u=c.charCodeAt(a+1))<56320||u>57343?t?c.charAt(a):o:t?c.slice(a,a+2):u-56320+(o-55296<<10)+65536}}},function(t,n,r){"use strict";var e=r(30),i=r(0),o=r(11),u=r(14),c=r(40),a=r(102),f=r(38),s=r(35),l=r(5)("iterator"),h=!([].keys&&"next"in[].keys()),v=function(){return this};t.exports=function(t,n,r,p,d,g,y){a(r,n,p);var b,m,x,w=function(t){if(!h&&t in O)return O[t];switch(t){case"keys":case"values":return function(){return new r(this,t)}}return function(){return new r(this,t)}},S=n+" Iterator",_="values"==d,E=!1,O=t.prototype,P=O[l]||O["@@iterator"]||d&&O[d],M=P||w(d),F=d?_?w("entries"):M:void 0,A="Array"==n&&O.entries||P;if(A&&(x=s(A.call(new t)))!==Object.prototype&&x.next&&(f(x,S,!0),e||"function"==typeof x[l]||u(x,l,v)),_&&P&&"values"!==P.name&&(E=!0,M=function(){return P.call(this)}),e&&!y||!h&&!E&&O[l]||u(O,l,M),c[n]=M,c[S]=v,d)if(b={values:_?M:w("values"),keys:g?M:w("keys"),entries:F},y)for(m in b)m in O||o(O,m,b[m]);else i(i.P+i.F*(h||E),n,b);return b}},function(t,n,r){var e=r(74),i=r(24);t.exports=function(t,n,r){if(e(n))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(t))}},function(t,n,r){var e=r(4),i=r(23),o=r(5)("match");t.exports=function(t){var n;return e(t)&&(void 0!==(n=t[o])?!!n:"RegExp"==i(t))}},function(t,n,r){var e=r(5)("match");t.exports=function(t){var n=/./;try{"/./"[t](n)}catch(r){try{return n[e]=!1,!"/./"[t](n)}catch(t){}}return!0}},function(t,n,r){var e=r(40),i=r(5)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(e.Array===t||o[i]===t)}},function(t,n,r){"use strict";var e=r(9),i=r(28);t.exports=function(t,n,r){n in t?e.f(t,n,i(0,r)):t[n]=r}},function(t,n,r){var e=r(46),i=r(5)("iterator"),o=r(40);t.exports=r(7).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[e(t)]}},function(t,n,r){"use strict";var e=r(10),i=r(32),o=r(6);t.exports=function(t){for(var n=e(this),r=o(n.length),u=arguments.length,c=i(u>1?arguments[1]:void 0,r),a=u>2?arguments[2]:void 0,f=void 0===a?r:i(a,r);f>c;)n[c++]=t;return n}},function(t,n,r){"use strict";var e=r(36),i=r(107),o=r(40),u=r(15);t.exports=r(72)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):i(0,"keys"==n?r:"values"==n?t[r]:[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n,r){"use strict";var e,i,o=r(53),u=RegExp.prototype.exec,c=String.prototype.replace,a=u,f=(e=/a/,i=/b*/g,u.call(e,"a"),u.call(i,"a"),0!==e.lastIndex||0!==i.lastIndex),s=void 0!==/()??/.exec("")[1];(f||s)&&(a=function(t){var n,r,e,i,a=this;return s&&(r=new RegExp("^"+a.source+"$(?!\\s)",o.call(a))),f&&(n=a.lastIndex),e=u.call(a,t),f&&e&&(a.lastIndex=a.global?e.index+e[0].length:n),s&&e&&e.length>1&&c.call(e[0],r,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(e[i]=void 0)}),e}),t.exports=a},function(t,n,r){"use strict";var e=r(71)(!0);t.exports=function(t,n,r){return n+(r?e(t,n).length:1)}},function(t,n,r){var e,i,o,u=r(17),c=r(96),a=r(64),f=r(60),s=r(1),l=s.process,h=s.setImmediate,v=s.clearImmediate,p=s.MessageChannel,d=s.Dispatch,g=0,y={},b=function(){var t=+this;if(y.hasOwnProperty(t)){var n=y[t];delete y[t],n()}},m=function(t){b.call(t.data)};h&&v||(h=function(t){for(var n=[],r=1;arguments.length>r;)n.push(arguments[r++]);return y[++g]=function(){c("function"==typeof t?t:Function(t),n)},e(g),g},v=function(t){delete y[t]},"process"==r(23)(l)?e=function(t){l.nextTick(u(b,t,1))}:d&&d.now?e=function(t){d.now(u(b,t,1))}:p?(o=(i=new p).port2,i.port1.onmessage=m,e=u(o.postMessage,o,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(e=function(t){s.postMessage(t+"","*")},s.addEventListener("message",m,!1)):e="onreadystatechange"in f("script")?function(t){a.appendChild(f("script")).onreadystatechange=function(){a.removeChild(this),b.call(t)}}:function(t){setTimeout(u(b,t,1),0)}),t.exports={set:h,clear:v}},function(t,n,r){"use strict";var e=r(1),i=r(8),o=r(30),u=r(59),c=r(14),a=r(43),f=r(2),s=r(42),l=r(19),h=r(6),v=r(115),p=r(34).f,d=r(9).f,g=r(79),y=r(38),b="prototype",m="Wrong index!",x=e.ArrayBuffer,w=e.DataView,S=e.Math,_=e.RangeError,E=e.Infinity,O=x,P=S.abs,M=S.pow,F=S.floor,A=S.log,I=S.LN2,j=i?"_b":"buffer",N=i?"_l":"byteLength",L=i?"_o":"byteOffset";function T(t,n,r){var e,i,o,u=new Array(r),c=8*r-n-1,a=(1<<c)-1,f=a>>1,s=23===n?M(2,-24)-M(2,-77):0,l=0,h=t<0||0===t&&1/t<0?1:0;for((t=P(t))!=t||t===E?(i=t!=t?1:0,e=a):(e=F(A(t)/I),t*(o=M(2,-e))<1&&(e--,o*=2),(t+=e+f>=1?s/o:s*M(2,1-f))*o>=2&&(e++,o/=2),e+f>=a?(i=0,e=a):e+f>=1?(i=(t*o-1)*M(2,n),e+=f):(i=t*M(2,f-1)*M(2,n),e=0));n>=8;u[l++]=255&i,i/=256,n-=8);for(e=e<<n|i,c+=n;c>0;u[l++]=255&e,e/=256,c-=8);return u[--l]|=128*h,u}function k(t,n,r){var e,i=8*r-n-1,o=(1<<i)-1,u=o>>1,c=i-7,a=r-1,f=t[a--],s=127&f;for(f>>=7;c>0;s=256*s+t[a],a--,c-=8);for(e=s&(1<<-c)-1,s>>=-c,c+=n;c>0;e=256*e+t[a],a--,c-=8);if(0===s)s=1-u;else{if(s===o)return e?NaN:f?-E:E;e+=M(2,n),s-=u}return(f?-1:1)*e*M(2,s-n)}function R(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function D(t){return[255&t]}function C(t){return[255&t,t>>8&255]}function B(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function W(t){return T(t,52,8)}function U(t){return T(t,23,4)}function V(t,n,r){d(t[b],n,{get:function(){return this[r]}})}function G(t,n,r,e){var i=v(+r);if(i+n>t[N])throw _(m);var o=t[j]._b,u=i+t[L],c=o.slice(u,u+n);return e?c:c.reverse()}function z(t,n,r,e,i,o){var u=v(+r);if(u+n>t[N])throw _(m);for(var c=t[j]._b,a=u+t[L],f=e(+i),s=0;s<n;s++)c[a+s]=f[o?s:n-s-1]}if(u.ABV){if(!f(function(){x(1)})||!f(function(){new x(-1)})||f(function(){return new x,new x(1.5),new x(NaN),"ArrayBuffer"!=x.name})){for(var Y,q=(x=function(t){return s(this,x),new O(v(t))})[b]=O[b],K=p(O),$=0;K.length>$;)(Y=K[$++])in x||c(x,Y,O[Y]);o||(q.constructor=x)}var H=new w(new x(2)),J=w[b].setInt8;H.setInt8(0,2147483648),H.setInt8(1,2147483649),!H.getInt8(0)&&H.getInt8(1)||a(w[b],{setInt8:function(t,n){J.call(this,t,n<<24>>24)},setUint8:function(t,n){J.call(this,t,n<<24>>24)}},!0)}else x=function(t){s(this,x,"ArrayBuffer");var n=v(t);this._b=g.call(new Array(n),0),this[N]=n},w=function(t,n,r){s(this,w,"DataView"),s(t,x,"DataView");var e=t[N],i=l(n);if(i<0||i>e)throw _("Wrong offset!");if(i+(r=void 0===r?e-i:h(r))>e)throw _("Wrong length!");this[j]=t,this[L]=i,this[N]=r},i&&(V(x,"byteLength","_l"),V(w,"buffer","_b"),V(w,"byteLength","_l"),V(w,"byteOffset","_o")),a(w[b],{getInt8:function(t){return G(this,1,t)[0]<<24>>24},getUint8:function(t){return G(this,1,t)[0]},getInt16:function(t){var n=G(this,2,t,arguments[1]);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=G(this,2,t,arguments[1]);return n[1]<<8|n[0]},getInt32:function(t){return R(G(this,4,t,arguments[1]))},getUint32:function(t){return R(G(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return k(G(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return k(G(this,8,t,arguments[1]),52,8)},setInt8:function(t,n){z(this,1,t,D,n)},setUint8:function(t,n){z(this,1,t,D,n)},setInt16:function(t,n){z(this,2,t,C,n,arguments[2])},setUint16:function(t,n){z(this,2,t,C,n,arguments[2])},setInt32:function(t,n){z(this,4,t,B,n,arguments[2])},setUint32:function(t,n){z(this,4,t,B,n,arguments[2])},setFloat32:function(t,n){z(this,4,t,U,n,arguments[2])},setFloat64:function(t,n){z(this,8,t,W,n,arguments[2])}});y(x,"ArrayBuffer"),y(w,"DataView"),c(w[b],u.VIEW,!0),n.ArrayBuffer=x,n.DataView=w},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n,r){t.exports=!r(120)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){t.exports=!r(8)&&!r(2)(function(){return 7!=Object.defineProperty(r(60)("div"),"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(1),i=r(7),o=r(30),u=r(61),c=r(9).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){var e=r(13),i=r(15),o=r(49)(!1),u=r(62)("IE_PROTO");t.exports=function(t,n){var r,c=i(t),a=0,f=[];for(r in c)r!=u&&e(c,r)&&f.push(r);for(;n.length>a;)e(c,r=n[a++])&&(~o(f,r)||f.push(r));return f}},function(t,n,r){var e=r(9),i=r(3),o=r(31);t.exports=r(8)?Object.defineProperties:function(t,n){i(t);for(var r,u=o(n),c=u.length,a=0;c>a;)e.f(t,r=u[a++],n[r]);return t}},function(t,n,r){var e=r(15),i=r(34).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return u.slice()}}(t):i(e(t))}},function(t,n,r){"use strict";var e=r(8),i=r(31),o=r(50),u=r(45),c=r(10),a=r(44),f=Object.assign;t.exports=!f||r(2)(function(){var t={},n={},r=Symbol(),e="abcdefghijklmnopqrst";return t[r]=7,e.split("").forEach(function(t){n[t]=t}),7!=f({},t)[r]||Object.keys(f({},n)).join("")!=e})?function(t,n){for(var r=c(t),f=arguments.length,s=1,l=o.f,h=u.f;f>s;)for(var v,p=a(arguments[s++]),d=l?i(p).concat(l(p)):i(p),g=d.length,y=0;g>y;)v=d[y++],e&&!h.call(p,v)||(r[v]=p[v]);return r}:f},function(t,n){t.exports=Object.is||function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}},function(t,n,r){"use strict";var e=r(18),i=r(4),o=r(96),u=[].slice,c={},a=function(t,n,r){if(!(n in c)){for(var e=[],i=0;i<n;i++)e[i]="a["+i+"]";c[n]=Function("F,a","return new F("+e.join(",")+")")}return c[n](t,r)};t.exports=Function.bind||function(t){var n=e(this),r=u.call(arguments,1),c=function(){var e=r.concat(u.call(arguments));return this instanceof c?a(n,e.length,e):o(n,e,t)};return i(n.prototype)&&(c.prototype=n.prototype),c}},function(t,n){t.exports=function(t,n,r){var e=void 0===r;switch(n.length){case 0:return e?t():t.call(r);case 1:return e?t(n[0]):t.call(r,n[0]);case 2:return e?t(n[0],n[1]):t.call(r,n[0],n[1]);case 3:return e?t(n[0],n[1],n[2]):t.call(r,n[0],n[1],n[2]);case 4:return e?t(n[0],n[1],n[2],n[3]):t.call(r,n[0],n[1],n[2],n[3])}return t.apply(r,n)}},function(t,n,r){var e=r(1).parseInt,i=r(39).trim,o=r(66),u=/^[-+]?0[xX]/;t.exports=8!==e(o+"08")||22!==e(o+"0x16")?function(t,n){var r=i(String(t),3);return e(r,n>>>0||(u.test(r)?16:10))}:e},function(t,n,r){var e=r(1).parseFloat,i=r(39).trim;t.exports=1/e(r(66)+"-0")!=-1/0?function(t){var n=i(String(t),3),r=e(n);return 0===r&&"-"==n.charAt(0)?-0:r}:e},function(t,n,r){var e=r(23);t.exports=function(t,n){if("number"!=typeof t&&"Number"!=e(t))throw TypeError(n);return+t}},function(t,n,r){var e=r(4),i=Math.floor;t.exports=function(t){return!e(t)&&isFinite(t)&&i(t)===t}},function(t,n){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,n,r){"use strict";var e=r(33),i=r(28),o=r(38),u={};r(14)(u,r(5)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n,r){var e=r(3);t.exports=function(t,n,r,i){try{return i?n(e(r)[0],r[1]):n(r)}catch(n){var o=t.return;throw void 0!==o&&e(o.call(t)),n}}},function(t,n,r){var e=r(216);t.exports=function(t,n){return new(e(t))(n)}},function(t,n,r){var e=r(18),i=r(10),o=r(44),u=r(6);t.exports=function(t,n,r,c,a){e(n);var f=i(t),s=o(f),l=u(f.length),h=a?l-1:0,v=a?-1:1;if(r<2)for(;;){if(h in s){c=s[h],h+=v;break}if(h+=v,a?h<0:l<=h)throw TypeError("Reduce of empty array with no initial value")}for(;a?h>=0:l>h;h+=v)h in s&&(c=n(c,s[h],h,f));return c}},function(t,n,r){"use strict";var e=r(10),i=r(32),o=r(6);t.exports=[].copyWithin||function(t,n){var r=e(this),u=o(r.length),c=i(t,u),a=i(n,u),f=arguments.length>2?arguments[2]:void 0,s=Math.min((void 0===f?u:i(f,u))-a,u-c),l=1;for(a<c&&c<a+s&&(l=-1,a+=s-1,c+=s-1);s-- >0;)a in r?r[c]=r[a]:delete r[c],c+=l,a+=l;return r}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,r){"use strict";var e=r(81);r(0)({target:"RegExp",proto:!0,forced:e!==/./.exec},{exec:e})},function(t,n,r){r(8)&&"g"!=/./g.flags&&r(9).f(RegExp.prototype,"flags",{configurable:!0,get:r(53)})},function(t,n,r){"use strict";var e,i,o,u,c=r(30),a=r(1),f=r(17),s=r(46),l=r(0),h=r(4),v=r(18),p=r(42),d=r(56),g=r(47),y=r(83).set,b=r(236)(),m=r(111),x=r(237),w=r(57),S=r(112),_=a.TypeError,E=a.process,O=E&&E.versions,P=O&&O.v8||"",M=a.Promise,F="process"==s(E),A=function(){},I=i=m.f,j=!!function(){try{var t=M.resolve(1),n=(t.constructor={})[r(5)("species")]=function(t){t(A,A)};return(F||"function"==typeof PromiseRejectionEvent)&&t.then(A)instanceof n&&0!==P.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(t){}}(),N=function(t){var n;return!(!h(t)||"function"!=typeof(n=t.then))&&n},L=function(t,n){if(!t._n){t._n=!0;var r=t._c;b(function(){for(var e=t._v,i=1==t._s,o=0,u=function(n){var r,o,u,c=i?n.ok:n.fail,a=n.resolve,f=n.reject,s=n.domain;try{c?(i||(2==t._h&&R(t),t._h=1),!0===c?r=e:(s&&s.enter(),r=c(e),s&&(s.exit(),u=!0)),r===n.promise?f(_("Promise-chain cycle")):(o=N(r))?o.call(r,a,f):a(r)):f(e)}catch(t){s&&!u&&s.exit(),f(t)}};r.length>o;)u(r[o++]);t._c=[],t._n=!1,n&&!t._h&&T(t)})}},T=function(t){y.call(a,function(){var n,r,e,i=t._v,o=k(t);if(o&&(n=x(function(){F?E.emit("unhandledRejection",i,t):(r=a.onunhandledrejection)?r({promise:t,reason:i}):(e=a.console)&&e.error&&e.error("Unhandled promise rejection",i)}),t._h=F||k(t)?2:1),t._a=void 0,o&&n.e)throw n.v})},k=function(t){return 1!==t._h&&0===(t._a||t._c).length},R=function(t){y.call(a,function(){var n;F?E.emit("rejectionHandled",t):(n=a.onrejectionhandled)&&n({promise:t,reason:t._v})})},D=function(t){var n=this;n._d||(n._d=!0,(n=n._w||n)._v=t,n._s=2,n._a||(n._a=n._c.slice()),L(n,!0))},C=function(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw _("Promise can't be resolved itself");(n=N(t))?b(function(){var e={_w:r,_d:!1};try{n.call(t,f(C,e,1),f(D,e,1))}catch(t){D.call(e,t)}}):(r._v=t,r._s=1,L(r,!1))}catch(t){D.call({_w:r,_d:!1},t)}}};j||(M=function(t){p(this,M,"Promise","_h"),v(t),e.call(this);try{t(f(C,this,1),f(D,this,1))}catch(t){D.call(this,t)}},(e=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(43)(M.prototype,{then:function(t,n){var r=I(g(this,M));return r.ok="function"!=typeof t||t,r.fail="function"==typeof n&&n,r.domain=F?E.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&L(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new e;this.promise=t,this.resolve=f(C,t,1),this.reject=f(D,t,1)},m.f=I=function(t){return t===M||t===u?new o(t):i(t)}),l(l.G+l.W+l.F*!j,{Promise:M}),r(38)(M,"Promise"),r(41)("Promise"),u=r(7).Promise,l(l.S+l.F*!j,"Promise",{reject:function(t){var n=I(this);return(0,n.reject)(t),n.promise}}),l(l.S+l.F*(c||!j),"Promise",{resolve:function(t){return S(c&&this===u?M:this,t)}}),l(l.S+l.F*!(j&&r(52)(function(t){M.all(t).catch(A)})),"Promise",{all:function(t){var n=this,r=I(n),e=r.resolve,i=r.reject,o=x(function(){var r=[],o=0,u=1;d(t,!1,function(t){var c=o++,a=!1;r.push(void 0),u++,n.resolve(t).then(function(t){a||(a=!0,r[c]=t,--u||e(r))},i)}),--u||e(r)});return o.e&&i(o.v),r.promise},race:function(t){var n=this,r=I(n),e=r.reject,i=x(function(){d(t,!1,function(t){n.resolve(t).then(r.resolve,e)})});return i.e&&e(i.v),r.promise}})},function(t,n,r){"use strict";var e=r(18);function i(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=e(n),this.reject=e(r)}t.exports.f=function(t){return new i(t)}},function(t,n,r){var e=r(3),i=r(4),o=r(111);t.exports=function(t,n){if(e(t),i(n)&&n.constructor===t)return n;var r=o.f(t);return(0,r.resolve)(n),r.promise}},function(t,n,r){"use strict";var e=r(9).f,i=r(33),o=r(43),u=r(17),c=r(42),a=r(56),f=r(72),s=r(107),l=r(41),h=r(8),v=r(27).fastKey,p=r(37),d=h?"_s":"size",g=function(t,n){var r,e=v(n);if("F"!==e)return t._i[e];for(r=t._f;r;r=r.n)if(r.k==n)return r};t.exports={getConstructor:function(t,n,r,f){var s=t(function(t,e){c(t,s,n,"_i"),t._t=n,t._i=i(null),t._f=void 0,t._l=void 0,t[d]=0,null!=e&&a(e,r,t[f],t)});return o(s.prototype,{clear:function(){for(var t=p(this,n),r=t._i,e=t._f;e;e=e.n)e.r=!0,e.p&&(e.p=e.p.n=void 0),delete r[e.i];t._f=t._l=void 0,t[d]=0},delete:function(t){var r=p(this,n),e=g(r,t);if(e){var i=e.n,o=e.p;delete r._i[e.i],e.r=!0,o&&(o.n=i),i&&(i.p=o),r._f==e&&(r._f=i),r._l==e&&(r._l=o),r[d]--}return!!e},forEach:function(t){p(this,n);for(var r,e=u(t,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(e(r.v,r.k,this);r&&r.r;)r=r.p},has:function(t){return!!g(p(this,n),t)}}),h&&e(s.prototype,"size",{get:function(){return p(this,n)[d]}}),s},def:function(t,n,r){var e,i,o=g(t,n);return o?o.v=r:(t._l=o={i:i=v(n,!0),k:n,v:r,p:e=t._l,n:void 0,r:!1},t._f||(t._f=o),e&&(e.n=o),t[d]++,"F"!==i&&(t._i[i]=o)),t},getEntry:g,setStrong:function(t,n,r){f(t,n,function(t,r){this._t=p(t,n),this._k=r,this._l=void 0},function(){for(var t=this._k,n=this._l;n&&n.r;)n=n.p;return this._t&&(this._l=n=n?n.n:this._t._f)?s(0,"keys"==t?n.k:"values"==t?n.v:[n.k,n.v]):(this._t=void 0,s(1))},r?"entries":"values",!r,!0),l(n)}}},function(t,n,r){"use strict";var e=r(43),i=r(27).getWeak,o=r(3),u=r(4),c=r(42),a=r(56),f=r(22),s=r(13),l=r(37),h=f(5),v=f(6),p=0,d=function(t){return t._l||(t._l=new g)},g=function(){this.a=[]},y=function(t,n){return h(t.a,function(t){return t[0]===n})};g.prototype={get:function(t){var n=y(this,t);if(n)return n[1]},has:function(t){return!!y(this,t)},set:function(t,n){var r=y(this,t);r?r[1]=n:this.a.push([t,n])},delete:function(t){var n=v(this.a,function(n){return n[0]===t});return~n&&this.a.splice(n,1),!!~n}},t.exports={getConstructor:function(t,n,r,o){var f=t(function(t,e){c(t,f,n,"_i"),t._t=n,t._i=p++,t._l=void 0,null!=e&&a(e,r,t[o],t)});return e(f.prototype,{delete:function(t){if(!u(t))return!1;var r=i(t);return!0===r?d(l(this,n)).delete(t):r&&s(r,this._i)&&delete r[this._i]},has:function(t){if(!u(t))return!1;var r=i(t);return!0===r?d(l(this,n)).has(t):r&&s(r,this._i)}}),f},def:function(t,n,r){var e=i(o(n),!0);return!0===e?d(t).set(n,r):e[t._i]=r,t},ufstore:d}},function(t,n,r){var e=r(19),i=r(6);t.exports=function(t){if(void 0===t)return 0;var n=e(t),r=i(n);if(n!==r)throw RangeError("Wrong length!");return r}},function(t,n,r){var e=r(34),i=r(50),o=r(3),u=r(1).Reflect;t.exports=u&&u.ownKeys||function(t){var n=e.f(o(t)),r=i.f;return r?n.concat(r(t)):n}},function(t,n,r){var e=r(6),i=r(68),o=r(24);t.exports=function(t,n,r,u){var c=String(o(t)),a=c.length,f=void 0===r?" ":String(r),s=e(n);if(s<=a||""==f)return c;var l=s-a,h=i.call(f,Math.ceil(l/f.length));return h.length>l&&(h=h.slice(0,l)),u?h+c:c+h}},function(t,n,r){var e=r(8),i=r(31),o=r(15),u=r(45).f;t.exports=function(t){return function(n){for(var r,c=o(n),a=i(c),f=a.length,s=0,l=[];f>s;)r=a[s++],e&&!u.call(c,r)||l.push(t?[r,c[r]]:c[r]);return l}}},function(t,n){var r=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=r)},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,r){r(122),t.exports=r(308)},function(t,n,r){"use strict";r(123);var e,i=(e=r(295))&&e.__esModule?e:{default:e};i.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),i.default._babelPolyfill=!0},function(t,n,r){"use strict";r(124),r(267),r(269),r(272),r(274),r(276),r(278),r(280),r(282),r(284),r(286),r(288),r(290),r(294)},function(t,n,r){r(125),r(128),r(129),r(130),r(131),r(132),r(133),r(134),r(135),r(136),r(137),r(138),r(139),r(140),r(141),r(142),r(143),r(144),r(145),r(146),r(147),r(148),r(149),r(150),r(151),r(152),r(153),r(154),r(155),r(156),r(157),r(158),r(159),r(160),r(161),r(162),r(163),r(164),r(165),r(166),r(167),r(168),r(169),r(171),r(172),r(173),r(174),r(175),r(176),r(177),r(178),r(179),r(180),r(181),r(182),r(183),r(184),r(185),r(186),r(187),r(188),r(189),r(190),r(191),r(192),r(193),r(194),r(195),r(196),r(197),r(198),r(199),r(200),r(201),r(202),r(203),r(204),r(206),r(207),r(209),r(210),r(211),r(212),r(213),r(214),r(215),r(217),r(218),r(219),r(220),r(221),r(222),r(223),r(224),r(225),r(226),r(227),r(228),r(229),r(80),r(230),r(108),r(231),r(109),r(232),r(233),r(234),r(235),r(110),r(238),r(239),r(240),r(241),r(242),r(243),r(244),r(245),r(246),r(247),r(248),r(249),r(250),r(251),r(252),r(253),r(254),r(255),r(256),r(257),r(258),r(259),r(260),r(261),r(262),r(263),r(264),r(265),r(266),t.exports=r(7)},function(t,n,r){"use strict";var e=r(1),i=r(13),o=r(8),u=r(0),c=r(11),a=r(27).KEY,f=r(2),s=r(48),l=r(38),h=r(29),v=r(5),p=r(61),d=r(89),g=r(127),y=r(51),b=r(3),m=r(4),x=r(10),w=r(15),S=r(26),_=r(28),E=r(33),O=r(92),P=r(20),M=r(50),F=r(9),A=r(31),I=P.f,j=F.f,N=O.f,L=e.Symbol,T=e.JSON,k=T&&T.stringify,R=v("_hidden"),D=v("toPrimitive"),C={}.propertyIsEnumerable,B=s("symbol-registry"),W=s("symbols"),U=s("op-symbols"),V=Object.prototype,G="function"==typeof L&&!!M.f,z=e.QObject,Y=!z||!z.prototype||!z.prototype.findChild,q=o&&f(function(){return 7!=E(j({},"a",{get:function(){return j(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=I(V,n);e&&delete V[n],j(t,n,r),e&&t!==V&&j(V,n,e)}:j,K=function(t){var n=W[t]=E(L.prototype);return n._k=t,n},$=G&&"symbol"==typeof L.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof L},H=function(t,n,r){return t===V&&H(U,n,r),b(t),n=S(n,!0),b(r),i(W,n)?(r.enumerable?(i(t,R)&&t[R][n]&&(t[R][n]=!1),r=E(r,{enumerable:_(0,!1)})):(i(t,R)||j(t,R,_(1,{})),t[R][n]=!0),q(t,n,r)):j(t,n,r)},J=function(t,n){b(t);for(var r,e=g(n=w(n)),i=0,o=e.length;o>i;)H(t,r=e[i++],n[r]);return t},X=function(t){var n=C.call(this,t=S(t,!0));return!(this===V&&i(W,t)&&!i(U,t))&&(!(n||!i(this,t)||!i(W,t)||i(this,R)&&this[R][t])||n)},Z=function(t,n){if(t=w(t),n=S(n,!0),t!==V||!i(W,n)||i(U,n)){var r=I(t,n);return!r||!i(W,n)||i(t,R)&&t[R][n]||(r.enumerable=!0),r}},Q=function(t){for(var n,r=N(w(t)),e=[],o=0;r.length>o;)i(W,n=r[o++])||n==R||n==a||e.push(n);return e},tt=function(t){for(var n,r=t===V,e=N(r?U:w(t)),o=[],u=0;e.length>u;)!i(W,n=e[u++])||r&&!i(V,n)||o.push(W[n]);return o};G||(c((L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),n=function(r){this===V&&n.call(U,r),i(this,R)&&i(this[R],t)&&(this[R][t]=!1),q(this,t,_(1,r))};return o&&Y&&q(V,t,{configurable:!0,set:n}),K(t)}).prototype,"toString",function(){return this._k}),P.f=Z,F.f=H,r(34).f=O.f=Q,r(45).f=X,M.f=tt,o&&!r(30)&&c(V,"propertyIsEnumerable",X,!0),p.f=function(t){return K(v(t))}),u(u.G+u.W+u.F*!G,{Symbol:L});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;nt.length>rt;)v(nt[rt++]);for(var et=A(v.store),it=0;et.length>it;)d(et[it++]);u(u.S+u.F*!G,"Symbol",{for:function(t){return i(B,t+="")?B[t]:B[t]=L(t)},keyFor:function(t){if(!$(t))throw TypeError(t+" is not a symbol!");for(var n in B)if(B[n]===t)return n},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),u(u.S+u.F*!G,"Object",{create:function(t,n){return void 0===n?E(t):J(E(t),n)},defineProperty:H,defineProperties:J,getOwnPropertyDescriptor:Z,getOwnPropertyNames:Q,getOwnPropertySymbols:tt});var ot=f(function(){M.f(1)});u(u.S+u.F*ot,"Object",{getOwnPropertySymbols:function(t){return M.f(x(t))}}),T&&u(u.S+u.F*(!G||f(function(){var t=L();return"[null]"!=k([t])||"{}"!=k({a:t})||"{}"!=k(Object(t))})),"JSON",{stringify:function(t){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);if(r=n=e[1],(m(n)||void 0!==t)&&!$(t))return y(n)||(n=function(t,n){if("function"==typeof r&&(n=r.call(this,t,n)),!$(n))return n}),e[1]=n,k.apply(T,e)}}),L.prototype[D]||r(14)(L.prototype,D,L.prototype.valueOf),l(L,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){t.exports=r(48)("native-function-to-string",Function.toString)},function(t,n,r){var e=r(31),i=r(50),o=r(45);t.exports=function(t){var n=e(t),r=i.f;if(r)for(var u,c=r(t),a=o.f,f=0;c.length>f;)a.call(t,u=c[f++])&&n.push(u);return n}},function(t,n,r){var e=r(0);e(e.S,"Object",{create:r(33)})},function(t,n,r){var e=r(0);e(e.S+e.F*!r(8),"Object",{defineProperty:r(9).f})},function(t,n,r){var e=r(0);e(e.S+e.F*!r(8),"Object",{defineProperties:r(91)})},function(t,n,r){var e=r(15),i=r(20).f;r(21)("getOwnPropertyDescriptor",function(){return function(t,n){return i(e(t),n)}})},function(t,n,r){var e=r(10),i=r(35);r(21)("getPrototypeOf",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(10),i=r(31);r(21)("keys",function(){return function(t){return i(e(t))}})},function(t,n,r){r(21)("getOwnPropertyNames",function(){return r(92).f})},function(t,n,r){var e=r(4),i=r(27).onFreeze;r(21)("freeze",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(4),i=r(27).onFreeze;r(21)("seal",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(4),i=r(27).onFreeze;r(21)("preventExtensions",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(4);r(21)("isFrozen",function(t){return function(n){return!e(n)||!!t&&t(n)}})},function(t,n,r){var e=r(4);r(21)("isSealed",function(t){return function(n){return!e(n)||!!t&&t(n)}})},function(t,n,r){var e=r(4);r(21)("isExtensible",function(t){return function(n){return!!e(n)&&(!t||t(n))}})},function(t,n,r){var e=r(0);e(e.S+e.F,"Object",{assign:r(93)})},function(t,n,r){var e=r(0);e(e.S,"Object",{is:r(94)})},function(t,n,r){var e=r(0);e(e.S,"Object",{setPrototypeOf:r(65).set})},function(t,n,r){"use strict";var e=r(46),i={};i[r(5)("toStringTag")]="z",i+""!="[object z]"&&r(11)(Object.prototype,"toString",function(){return"[object "+e(this)+"]"},!0)},function(t,n,r){var e=r(0);e(e.P,"Function",{bind:r(95)})},function(t,n,r){var e=r(9).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||r(8)&&e(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,n,r){"use strict";var e=r(4),i=r(35),o=r(5)("hasInstance"),u=Function.prototype;o in u||r(9).f(u,o,{value:function(t){if("function"!=typeof this||!e(t))return!1;if(!e(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,n,r){var e=r(0),i=r(97);e(e.G+e.F*(parseInt!=i),{parseInt:i})},function(t,n,r){var e=r(0),i=r(98);e(e.G+e.F*(parseFloat!=i),{parseFloat:i})},function(t,n,r){"use strict";var e=r(1),i=r(13),o=r(23),u=r(67),c=r(26),a=r(2),f=r(34).f,s=r(20).f,l=r(9).f,h=r(39).trim,v=e.Number,p=v,d=v.prototype,g="Number"==o(r(33)(d)),y="trim"in String.prototype,b=function(t){var n=c(t,!1);if("string"==typeof n&&n.length>2){var r,e,i,o=(n=y?n.trim():h(n,3)).charCodeAt(0);if(43===o||45===o){if(88===(r=n.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(n.charCodeAt(1)){case 66:case 98:e=2,i=49;break;case 79:case 111:e=8,i=55;break;default:return+n}for(var u,a=n.slice(2),f=0,s=a.length;f<s;f++)if((u=a.charCodeAt(f))<48||u>i)return NaN;return parseInt(a,e)}}return+n};if(!v(" 0o1")||!v("0b1")||v("+0x1")){v=function(t){var n=arguments.length<1?0:t,r=this;return r instanceof v&&(g?a(function(){d.valueOf.call(r)}):"Number"!=o(r))?u(new p(b(n)),r,v):b(n)};for(var m,x=r(8)?f(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;x.length>w;w++)i(p,m=x[w])&&!i(v,m)&&l(v,m,s(p,m));v.prototype=d,d.constructor=v,r(11)(e,"Number",v)}},function(t,n,r){"use strict";var e=r(0),i=r(19),o=r(99),u=r(68),c=1..toFixed,a=Math.floor,f=[0,0,0,0,0,0],s="Number.toFixed: incorrect invocation!",l=function(t,n){for(var r=-1,e=n;++r<6;)e+=t*f[r],f[r]=e%1e7,e=a(e/1e7)},h=function(t){for(var n=6,r=0;--n>=0;)r+=f[n],f[n]=a(r/t),r=r%t*1e7},v=function(){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==f[t]){var r=String(f[t]);n=""===n?r:n+u.call("0",7-r.length)+r}return n},p=function(t,n,r){return 0===n?r:n%2==1?p(t,n-1,r*t):p(t*t,n/2,r)};e(e.P+e.F*(!!c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(2)(function(){c.call({})})),"Number",{toFixed:function(t){var n,r,e,c,a=o(this,s),f=i(t),d="",g="0";if(f<0||f>20)throw RangeError(s);if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return String(a);if(a<0&&(d="-",a=-a),a>1e-21)if(r=(n=function(t){for(var n=0,r=a*p(2,69,1);r>=4096;)n+=12,r/=4096;for(;r>=2;)n+=1,r/=2;return n}()-69)<0?a*p(2,-n,1):a/p(2,n,1),r*=4503599627370496,(n=52-n)>0){for(l(0,r),e=f;e>=7;)l(1e7,0),e-=7;for(l(p(10,e,1),0),e=n-1;e>=23;)h(1<<23),e-=23;h(1<<e),l(1,1),h(2),g=v()}else l(0,r),l(1<<-n,0),g=v()+u.call("0",f);return f>0?d+((c=g.length)<=f?"0."+u.call("0",f-c)+g:g.slice(0,c-f)+"."+g.slice(c-f)):d+g}})},function(t,n,r){"use strict";var e=r(0),i=r(2),o=r(99),u=1..toPrecision;e(e.P+e.F*(i(function(){return"1"!==u.call(1,void 0)})||!i(function(){u.call({})})),"Number",{toPrecision:function(t){var n=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?u.call(n):u.call(n,t)}})},function(t,n,r){var e=r(0);e(e.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,n,r){var e=r(0),i=r(1).isFinite;e(e.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,n,r){var e=r(0);e(e.S,"Number",{isInteger:r(100)})},function(t,n,r){var e=r(0);e(e.S,"Number",{isNaN:function(t){return t!=t}})},function(t,n,r){var e=r(0),i=r(100),o=Math.abs;e(e.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,n,r){var e=r(0);e(e.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,n,r){var e=r(0);e(e.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,n,r){var e=r(0),i=r(98);e(e.S+e.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,n,r){var e=r(0),i=r(97);e(e.S+e.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,n,r){var e=r(0),i=r(101),o=Math.sqrt,u=Math.acosh;e(e.S+e.F*!(u&&710==Math.floor(u(Number.MAX_VALUE))&&u(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,n,r){var e=r(0),i=Math.asinh;e(e.S+e.F*!(i&&1/i(0)>0),"Math",{asinh:function t(n){return isFinite(n=+n)&&0!=n?n<0?-t(-n):Math.log(n+Math.sqrt(n*n+1)):n}})},function(t,n,r){var e=r(0),i=Math.atanh;e(e.S+e.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,n,r){var e=r(0),i=r(69);e(e.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,n,r){var e=r(0);e(e.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,n,r){var e=r(0),i=Math.exp;e(e.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,n,r){var e=r(0),i=r(70);e(e.S+e.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,n,r){var e=r(0);e(e.S,"Math",{fround:r(170)})},function(t,n,r){var e=r(69),i=Math.pow,o=i(2,-52),u=i(2,-23),c=i(2,127)*(2-u),a=i(2,-126);t.exports=Math.fround||function(t){var n,r,i=Math.abs(t),f=e(t);return i<a?f*(i/a/u+1/o-1/o)*a*u:(r=(n=(1+u/o)*i)-(n-i))>c||r!=r?f*(1/0):f*r}},function(t,n,r){var e=r(0),i=Math.abs;e(e.S,"Math",{hypot:function(t,n){for(var r,e,o=0,u=0,c=arguments.length,a=0;u<c;)a<(r=i(arguments[u++]))?(o=o*(e=a/r)*e+1,a=r):o+=r>0?(e=r/a)*e:r;return a===1/0?1/0:a*Math.sqrt(o)}})},function(t,n,r){var e=r(0),i=Math.imul;e(e.S+e.F*r(2)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(t,n){var r=+t,e=+n,i=65535&r,o=65535&e;return 0|i*o+((65535&r>>>16)*o+i*(65535&e>>>16)<<16>>>0)}})},function(t,n,r){var e=r(0);e(e.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,n,r){var e=r(0);e(e.S,"Math",{log1p:r(101)})},function(t,n,r){var e=r(0);e(e.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,n,r){var e=r(0);e(e.S,"Math",{sign:r(69)})},function(t,n,r){var e=r(0),i=r(70),o=Math.exp;e(e.S+e.F*r(2)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,n,r){var e=r(0),i=r(70),o=Math.exp;e(e.S,"Math",{tanh:function(t){var n=i(t=+t),r=i(-t);return n==1/0?1:r==1/0?-1:(n-r)/(o(t)+o(-t))}})},function(t,n,r){var e=r(0);e(e.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,n,r){var e=r(0),i=r(32),o=String.fromCharCode,u=String.fromCodePoint;e(e.S+e.F*(!!u&&1!=u.length),"String",{fromCodePoint:function(t){for(var n,r=[],e=arguments.length,u=0;e>u;){if(n=+arguments[u++],i(n,1114111)!==n)throw RangeError(n+" is not a valid code point");r.push(n<65536?o(n):o(55296+((n-=65536)>>10),n%1024+56320))}return r.join("")}})},function(t,n,r){var e=r(0),i=r(15),o=r(6);e(e.S,"String",{raw:function(t){for(var n=i(t.raw),r=o(n.length),e=arguments.length,u=[],c=0;r>c;)u.push(String(n[c++])),c<e&&u.push(String(arguments[c]));return u.join("")}})},function(t,n,r){"use strict";r(39)("trim",function(t){return function(){return t(this,3)}})},function(t,n,r){"use strict";var e=r(71)(!0);r(72)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";var e=r(0),i=r(71)(!1);e(e.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(0),i=r(6),o=r(73),u="".endsWith;e(e.P+e.F*r(75)("endsWith"),"String",{endsWith:function(t){var n=o(this,t,"endsWith"),r=arguments.length>1?arguments[1]:void 0,e=i(n.length),c=void 0===r?e:Math.min(i(r),e),a=String(t);return u?u.call(n,a,c):n.slice(c-a.length,c)===a}})},function(t,n,r){"use strict";var e=r(0),i=r(73);e(e.P+e.F*r(75)("includes"),"String",{includes:function(t){return!!~i(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,n,r){var e=r(0);e(e.P,"String",{repeat:r(68)})},function(t,n,r){"use strict";var e=r(0),i=r(6),o=r(73),u="".startsWith;e(e.P+e.F*r(75)("startsWith"),"String",{startsWith:function(t){var n=o(this,t,"startsWith"),r=i(Math.min(arguments.length>1?arguments[1]:void 0,n.length)),e=String(t);return u?u.call(n,e,r):n.slice(r,r+e.length)===e}})},function(t,n,r){"use strict";r(12)("anchor",function(t){return function(n){return t(this,"a","name",n)}})},function(t,n,r){"use strict";r(12)("big",function(t){return function(){return t(this,"big","","")}})},function(t,n,r){"use strict";r(12)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,n,r){"use strict";r(12)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,n,r){"use strict";r(12)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,n,r){"use strict";r(12)("fontcolor",function(t){return function(n){return t(this,"font","color",n)}})},function(t,n,r){"use strict";r(12)("fontsize",function(t){return function(n){return t(this,"font","size",n)}})},function(t,n,r){"use strict";r(12)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,n,r){"use strict";r(12)("link",function(t){return function(n){return t(this,"a","href",n)}})},function(t,n,r){"use strict";r(12)("small",function(t){return function(){return t(this,"small","","")}})},function(t,n,r){"use strict";r(12)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,n,r){"use strict";r(12)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,n,r){"use strict";r(12)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,n,r){var e=r(0);e(e.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,n,r){"use strict";var e=r(0),i=r(10),o=r(26);e(e.P+e.F*r(2)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var n=i(this),r=o(n);return"number"!=typeof r||isFinite(r)?n.toISOString():null}})},function(t,n,r){var e=r(0),i=r(205);e(e.P+e.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(t,n,r){"use strict";var e=r(2),i=Date.prototype.getTime,o=Date.prototype.toISOString,u=function(t){return t>9?t:"0"+t};t.exports=e(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!e(function(){o.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this,n=t.getUTCFullYear(),r=t.getUTCMilliseconds(),e=n<0?"-":n>9999?"+":"";return e+("00000"+Math.abs(n)).slice(e?-6:-4)+"-"+u(t.getUTCMonth()+1)+"-"+u(t.getUTCDate())+"T"+u(t.getUTCHours())+":"+u(t.getUTCMinutes())+":"+u(t.getUTCSeconds())+"."+(r>99?r:"0"+u(r))+"Z"}:o},function(t,n,r){var e=Date.prototype,i=e.toString,o=e.getTime;new Date(NaN)+""!="Invalid Date"&&r(11)(e,"toString",function(){var t=o.call(this);return t==t?i.call(this):"Invalid Date"})},function(t,n,r){var e=r(5)("toPrimitive"),i=Date.prototype;e in i||r(14)(i,e,r(208))},function(t,n,r){"use strict";var e=r(3),i=r(26);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return i(e(this),"number"!=t)}},function(t,n,r){var e=r(0);e(e.S,"Array",{isArray:r(51)})},function(t,n,r){"use strict";var e=r(17),i=r(0),o=r(10),u=r(103),c=r(76),a=r(6),f=r(77),s=r(78);i(i.S+i.F*!r(52)(function(t){Array.from(t)}),"Array",{from:function(t){var n,r,i,l,h=o(t),v="function"==typeof this?this:Array,p=arguments.length,d=p>1?arguments[1]:void 0,g=void 0!==d,y=0,b=s(h);if(g&&(d=e(d,p>2?arguments[2]:void 0,2)),null==b||v==Array&&c(b))for(r=new v(n=a(h.length));n>y;y++)f(r,y,g?d(h[y],y):h[y]);else for(l=b.call(h),r=new v;!(i=l.next()).done;y++)f(r,y,g?u(l,d,[i.value,y],!0):i.value);return r.length=y,r}})},function(t,n,r){"use strict";var e=r(0),i=r(77);e(e.S+e.F*r(2)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,n=arguments.length,r=new("function"==typeof this?this:Array)(n);n>t;)i(r,t,arguments[t++]);return r.length=n,r}})},function(t,n,r){"use strict";var e=r(0),i=r(15),o=[].join;e(e.P+e.F*(r(44)!=Object||!r(16)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,n,r){"use strict";var e=r(0),i=r(64),o=r(23),u=r(32),c=r(6),a=[].slice;e(e.P+e.F*r(2)(function(){i&&a.call(i)}),"Array",{slice:function(t,n){var r=c(this.length),e=o(this);if(n=void 0===n?r:n,"Array"==e)return a.call(this,t,n);for(var i=u(t,r),f=u(n,r),s=c(f-i),l=new Array(s),h=0;h<s;h++)l[h]="String"==e?this.charAt(i+h):this[i+h];return l}})},function(t,n,r){"use strict";var e=r(0),i=r(18),o=r(10),u=r(2),c=[].sort,a=[1,2,3];e(e.P+e.F*(u(function(){a.sort(void 0)})||!u(function(){a.sort(null)})||!r(16)(c)),"Array",{sort:function(t){return void 0===t?c.call(o(this)):c.call(o(this),i(t))}})},function(t,n,r){"use strict";var e=r(0),i=r(22)(0),o=r(16)([].forEach,!0);e(e.P+e.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,n,r){var e=r(4),i=r(51),o=r(5)("species");t.exports=function(t){var n;return i(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!i(n.prototype)||(n=void 0),e(n)&&null===(n=n[o])&&(n=void 0)),void 0===n?Array:n}},function(t,n,r){"use strict";var e=r(0),i=r(22)(1);e(e.P+e.F*!r(16)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(0),i=r(22)(2);e(e.P+e.F*!r(16)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(0),i=r(22)(3);e(e.P+e.F*!r(16)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(0),i=r(22)(4);e(e.P+e.F*!r(16)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(0),i=r(105);e(e.P+e.F*!r(16)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,n,r){"use strict";var e=r(0),i=r(105);e(e.P+e.F*!r(16)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,n,r){"use strict";var e=r(0),i=r(49)(!1),o=[].indexOf,u=!!o&&1/[1].indexOf(1,-0)<0;e(e.P+e.F*(u||!r(16)(o)),"Array",{indexOf:function(t){return u?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(0),i=r(15),o=r(19),u=r(6),c=[].lastIndexOf,a=!!c&&1/[1].lastIndexOf(1,-0)<0;e(e.P+e.F*(a||!r(16)(c)),"Array",{lastIndexOf:function(t){if(a)return c.apply(this,arguments)||0;var n=i(this),r=u(n.length),e=r-1;for(arguments.length>1&&(e=Math.min(e,o(arguments[1]))),e<0&&(e=r+e);e>=0;e--)if(e in n&&n[e]===t)return e||0;return-1}})},function(t,n,r){var e=r(0);e(e.P,"Array",{copyWithin:r(106)}),r(36)("copyWithin")},function(t,n,r){var e=r(0);e(e.P,"Array",{fill:r(79)}),r(36)("fill")},function(t,n,r){"use strict";var e=r(0),i=r(22)(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),e(e.P+e.F*o,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(36)("find")},function(t,n,r){"use strict";var e=r(0),i=r(22)(6),o="findIndex",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(36)(o)},function(t,n,r){r(41)("Array")},function(t,n,r){var e=r(1),i=r(67),o=r(9).f,u=r(34).f,c=r(74),a=r(53),f=e.RegExp,s=f,l=f.prototype,h=/a/g,v=/a/g,p=new f(h)!==h;if(r(8)&&(!p||r(2)(function(){return v[r(5)("match")]=!1,f(h)!=h||f(v)==v||"/a/i"!=f(h,"i")}))){f=function(t,n){var r=this instanceof f,e=c(t),o=void 0===n;return!r&&e&&t.constructor===f&&o?t:i(p?new s(e&&!o?t.source:t,n):s((e=t instanceof f)?t.source:t,e&&o?a.call(t):n),r?this:l,f)};for(var d=function(t){t in f||o(f,t,{configurable:!0,get:function(){return s[t]},set:function(n){s[t]=n}})},g=u(s),y=0;g.length>y;)d(g[y++]);l.constructor=f,f.prototype=l,r(11)(e,"RegExp",f)}r(41)("RegExp")},function(t,n,r){"use strict";r(109);var e=r(3),i=r(53),o=r(8),u=/./.toString,c=function(t){r(11)(RegExp.prototype,"toString",t,!0)};r(2)(function(){return"/a/b"!=u.call({source:"a",flags:"b"})})?c(function(){var t=e(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):"toString"!=u.name&&c(function(){return u.call(this)})},function(t,n,r){"use strict";var e=r(3),i=r(6),o=r(82),u=r(54);r(55)("match",1,function(t,n,r,c){return[function(r){var e=t(this),i=null==r?void 0:r[n];return void 0!==i?i.call(r,e):new RegExp(r)[n](String(e))},function(t){var n=c(r,t,this);if(n.done)return n.value;var a=e(t),f=String(this);if(!a.global)return u(a,f);var s=a.unicode;a.lastIndex=0;for(var l,h=[],v=0;null!==(l=u(a,f));){var p=String(l[0]);h[v]=p,""===p&&(a.lastIndex=o(f,i(a.lastIndex),s)),v++}return 0===v?null:h}]})},function(t,n,r){"use strict";var e=r(3),i=r(10),o=r(6),u=r(19),c=r(82),a=r(54),f=Math.max,s=Math.min,l=Math.floor,h=/\$([$&`']|\d\d?|<[^>]*>)/g,v=/\$([$&`']|\d\d?)/g;r(55)("replace",2,function(t,n,r,p){return[function(e,i){var o=t(this),u=null==e?void 0:e[n];return void 0!==u?u.call(e,o,i):r.call(String(o),e,i)},function(t,n){var i=p(r,t,this,n);if(i.done)return i.value;var l=e(t),h=String(this),v="function"==typeof n;v||(n=String(n));var g=l.global;if(g){var y=l.unicode;l.lastIndex=0}for(var b=[];;){var m=a(l,h);if(null===m)break;if(b.push(m),!g)break;""===String(m[0])&&(l.lastIndex=c(h,o(l.lastIndex),y))}for(var x,w="",S=0,_=0;_<b.length;_++){m=b[_];for(var E=String(m[0]),O=f(s(u(m.index),h.length),0),P=[],M=1;M<m.length;M++)P.push(void 0===(x=m[M])?x:String(x));var F=m.groups;if(v){var A=[E].concat(P,O,h);void 0!==F&&A.push(F);var I=String(n.apply(void 0,A))}else I=d(E,h,O,P,F,n);O>=S&&(w+=h.slice(S,O)+I,S=O+E.length)}return w+h.slice(S)}];function d(t,n,e,o,u,c){var a=e+t.length,f=o.length,s=v;return void 0!==u&&(u=i(u),s=h),r.call(c,s,function(r,i){var c;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,e);case"'":return n.slice(a);case"<":c=u[i.slice(1,-1)];break;default:var s=+i;if(0===s)return r;if(s>f){var h=l(s/10);return 0===h?r:h<=f?void 0===o[h-1]?i.charAt(1):o[h-1]+i.charAt(1):r}c=o[s-1]}return void 0===c?"":c})}})},function(t,n,r){"use strict";var e=r(3),i=r(94),o=r(54);r(55)("search",1,function(t,n,r,u){return[function(r){var e=t(this),i=null==r?void 0:r[n];return void 0!==i?i.call(r,e):new RegExp(r)[n](String(e))},function(t){var n=u(r,t,this);if(n.done)return n.value;var c=e(t),a=String(this),f=c.lastIndex;i(f,0)||(c.lastIndex=0);var s=o(c,a);return i(c.lastIndex,f)||(c.lastIndex=f),null===s?-1:s.index}]})},function(t,n,r){"use strict";var e=r(74),i=r(3),o=r(47),u=r(82),c=r(6),a=r(54),f=r(81),s=r(2),l=Math.min,h=[].push,v=!s(function(){RegExp(4294967295,"y")});r(55)("split",2,function(t,n,r,s){var p;return p="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var i=String(this);if(void 0===t&&0===n)return[];if(!e(t))return r.call(i,t,n);for(var o,u,c,a=[],s=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,v=void 0===n?4294967295:n>>>0,p=new RegExp(t.source,s+"g");(o=f.call(p,i))&&!((u=p.lastIndex)>l&&(a.push(i.slice(l,o.index)),o.length>1&&o.index<i.length&&h.apply(a,o.slice(1)),c=o[0].length,l=u,a.length>=v));)p.lastIndex===o.index&&p.lastIndex++;return l===i.length?!c&&p.test("")||a.push(""):a.push(i.slice(l)),a.length>v?a.slice(0,v):a}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:r.call(this,t,n)}:r,[function(r,e){var i=t(this),o=null==r?void 0:r[n];return void 0!==o?o.call(r,i,e):p.call(String(i),r,e)},function(t,n){var e=s(p,t,this,n,p!==r);if(e.done)return e.value;var f=i(t),h=String(this),d=o(f,RegExp),g=f.unicode,y=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(v?"y":"g"),b=new d(v?f:"^(?:"+f.source+")",y),m=void 0===n?4294967295:n>>>0;if(0===m)return[];if(0===h.length)return null===a(b,h)?[h]:[];for(var x=0,w=0,S=[];w<h.length;){b.lastIndex=v?w:0;var _,E=a(b,v?h:h.slice(w));if(null===E||(_=l(c(b.lastIndex+(v?0:w)),h.length))===x)w=u(h,w,g);else{if(S.push(h.slice(x,w)),S.length===m)return S;for(var O=1;O<=E.length-1;O++)if(S.push(E[O]),S.length===m)return S;w=x=_}}return S.push(h.slice(x)),S}]})},function(t,n,r){var e=r(1),i=r(83).set,o=e.MutationObserver||e.WebKitMutationObserver,u=e.process,c=e.Promise,a="process"==r(23)(u);t.exports=function(){var t,n,r,f=function(){var e,i;for(a&&(e=u.domain)&&e.exit();t;){i=t.fn,t=t.next;try{i()}catch(e){throw t?r():n=void 0,e}}n=void 0,e&&e.enter()};if(a)r=function(){u.nextTick(f)};else if(!o||e.navigator&&e.navigator.standalone)if(c&&c.resolve){var s=c.resolve(void 0);r=function(){s.then(f)}}else r=function(){i.call(e,f)};else{var l=!0,h=document.createTextNode("");new o(f).observe(h,{characterData:!0}),r=function(){h.data=l=!l}}return function(e){var i={fn:e,next:void 0};n&&(n.next=i),t||(t=i,r()),n=i}}},function(t,n){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,n,r){"use strict";var e=r(113),i=r(37);t.exports=r(58)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var n=e.getEntry(i(this,"Map"),t);return n&&n.v},set:function(t,n){return e.def(i(this,"Map"),0===t?0:t,n)}},e,!0)},function(t,n,r){"use strict";var e=r(113),i=r(37);t.exports=r(58)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return e.def(i(this,"Set"),t=0===t?0:t,t)}},e)},function(t,n,r){"use strict";var e,i=r(1),o=r(22)(0),u=r(11),c=r(27),a=r(93),f=r(114),s=r(4),l=r(37),h=r(37),v=!i.ActiveXObject&&"ActiveXObject"in i,p=c.getWeak,d=Object.isExtensible,g=f.ufstore,y=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},b={get:function(t){if(s(t)){var n=p(t);return!0===n?g(l(this,"WeakMap")).get(t):n?n[this._i]:void 0}},set:function(t,n){return f.def(l(this,"WeakMap"),t,n)}},m=t.exports=r(58)("WeakMap",y,b,f,!0,!0);h&&v&&(a((e=f.getConstructor(y,"WeakMap")).prototype,b),c.NEED=!0,o(["delete","has","get","set"],function(t){var n=m.prototype,r=n[t];u(n,t,function(n,i){if(s(n)&&!d(n)){this._f||(this._f=new e);var o=this._f[t](n,i);return"set"==t?this:o}return r.call(this,n,i)})}))},function(t,n,r){"use strict";var e=r(114),i=r(37);r(58)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return e.def(i(this,"WeakSet"),t,!0)}},e,!1,!0)},function(t,n,r){"use strict";var e=r(0),i=r(59),o=r(84),u=r(3),c=r(32),a=r(6),f=r(4),s=r(1).ArrayBuffer,l=r(47),h=o.ArrayBuffer,v=o.DataView,p=i.ABV&&s.isView,d=h.prototype.slice,g=i.VIEW;e(e.G+e.W+e.F*(s!==h),{ArrayBuffer:h}),e(e.S+e.F*!i.CONSTR,"ArrayBuffer",{isView:function(t){return p&&p(t)||f(t)&&g in t}}),e(e.P+e.U+e.F*r(2)(function(){return!new h(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(t,n){if(void 0!==d&&void 0===n)return d.call(u(this),t);for(var r=u(this).byteLength,e=c(t,r),i=c(void 0===n?r:n,r),o=new(l(this,h))(a(i-e)),f=new v(this),s=new v(o),p=0;e<i;)s.setUint8(p++,f.getUint8(e++));return o}}),r(41)("ArrayBuffer")},function(t,n,r){var e=r(0);e(e.G+e.W+e.F*!r(59).ABV,{DataView:r(84).DataView})},function(t,n,r){r(25)("Int8",1,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(25)("Uint8",1,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(25)("Uint8",1,function(t){return function(n,r,e){return t(this,n,r,e)}},!0)},function(t,n,r){r(25)("Int16",2,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(25)("Uint16",2,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(25)("Int32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(25)("Uint32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(25)("Float32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(25)("Float64",8,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){var e=r(0),i=r(18),o=r(3),u=(r(1).Reflect||{}).apply,c=Function.apply;e(e.S+e.F*!r(2)(function(){u(function(){})}),"Reflect",{apply:function(t,n,r){var e=i(t),a=o(r);return u?u(e,n,a):c.call(e,n,a)}})},function(t,n,r){var e=r(0),i=r(33),o=r(18),u=r(3),c=r(4),a=r(2),f=r(95),s=(r(1).Reflect||{}).construct,l=a(function(){function t(){}return!(s(function(){},[],t)instanceof t)}),h=!a(function(){s(function(){})});e(e.S+e.F*(l||h),"Reflect",{construct:function(t,n){o(t),u(n);var r=arguments.length<3?t:o(arguments[2]);if(h&&!l)return s(t,n,r);if(t==r){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}var e=[null];return e.push.apply(e,n),new(f.apply(t,e))}var a=r.prototype,v=i(c(a)?a:Object.prototype),p=Function.apply.call(t,v,n);return c(p)?p:v}})},function(t,n,r){var e=r(9),i=r(0),o=r(3),u=r(26);i(i.S+i.F*r(2)(function(){Reflect.defineProperty(e.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,n,r){o(t),n=u(n,!0),o(r);try{return e.f(t,n,r),!0}catch(t){return!1}}})},function(t,n,r){var e=r(0),i=r(20).f,o=r(3);e(e.S,"Reflect",{deleteProperty:function(t,n){var r=i(o(t),n);return!(r&&!r.configurable)&&delete t[n]}})},function(t,n,r){"use strict";var e=r(0),i=r(3),o=function(t){this._t=i(t),this._i=0;var n,r=this._k=[];for(n in t)r.push(n)};r(102)(o,"Object",function(){var t,n=this._k;do{if(this._i>=n.length)return{value:void 0,done:!0}}while(!((t=n[this._i++])in this._t));return{value:t,done:!1}}),e(e.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,n,r){var e=r(20),i=r(35),o=r(13),u=r(0),c=r(4),a=r(3);u(u.S,"Reflect",{get:function t(n,r){var u,f,s=arguments.length<3?n:arguments[2];return a(n)===s?n[r]:(u=e.f(n,r))?o(u,"value")?u.value:void 0!==u.get?u.get.call(s):void 0:c(f=i(n))?t(f,r,s):void 0}})},function(t,n,r){var e=r(20),i=r(0),o=r(3);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,n){return e.f(o(t),n)}})},function(t,n,r){var e=r(0),i=r(35),o=r(3);e(e.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,n,r){var e=r(0);e(e.S,"Reflect",{has:function(t,n){return n in t}})},function(t,n,r){var e=r(0),i=r(3),o=Object.isExtensible;e(e.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,n,r){var e=r(0);e(e.S,"Reflect",{ownKeys:r(116)})},function(t,n,r){var e=r(0),i=r(3),o=Object.preventExtensions;e(e.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,n,r){var e=r(9),i=r(20),o=r(35),u=r(13),c=r(0),a=r(28),f=r(3),s=r(4);c(c.S,"Reflect",{set:function t(n,r,c){var l,h,v=arguments.length<4?n:arguments[3],p=i.f(f(n),r);if(!p){if(s(h=o(n)))return t(h,r,c,v);p=a(0)}if(u(p,"value")){if(!1===p.writable||!s(v))return!1;if(l=i.f(v,r)){if(l.get||l.set||!1===l.writable)return!1;l.value=c,e.f(v,r,l)}else e.f(v,r,a(0,c));return!0}return void 0!==p.set&&(p.set.call(v,c),!0)}})},function(t,n,r){var e=r(0),i=r(65);i&&e(e.S,"Reflect",{setPrototypeOf:function(t,n){i.check(t,n);try{return i.set(t,n),!0}catch(t){return!1}}})},function(t,n,r){r(268),t.exports=r(7).Array.includes},function(t,n,r){"use strict";var e=r(0),i=r(49)(!0);e(e.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(36)("includes")},function(t,n,r){r(270),t.exports=r(7).Array.flatMap},function(t,n,r){"use strict";var e=r(0),i=r(271),o=r(10),u=r(6),c=r(18),a=r(104);e(e.P,"Array",{flatMap:function(t){var n,r,e=o(this);return c(t),n=u(e.length),r=a(e,0),i(r,e,e,n,0,1,t,arguments[1]),r}}),r(36)("flatMap")},function(t,n,r){"use strict";var e=r(51),i=r(4),o=r(6),u=r(17),c=r(5)("isConcatSpreadable");t.exports=function t(n,r,a,f,s,l,h,v){for(var p,d,g=s,y=0,b=!!h&&u(h,v,3);y<f;){if(y in a){if(p=b?b(a[y],y,r):a[y],d=!1,i(p)&&(d=void 0!==(d=p[c])?!!d:e(p)),d&&l>0)g=t(n,r,p,o(p.length),g,l-1)-1;else{if(g>=9007199254740991)throw TypeError();n[g]=p}g++}y++}return g}},function(t,n,r){r(273),t.exports=r(7).String.padStart},function(t,n,r){"use strict";var e=r(0),i=r(117),o=r(57),u=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);e(e.P+e.F*u,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,n,r){r(275),t.exports=r(7).String.padEnd},function(t,n,r){"use strict";var e=r(0),i=r(117),o=r(57),u=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);e(e.P+e.F*u,"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,n,r){r(277),t.exports=r(7).String.trimLeft},function(t,n,r){"use strict";r(39)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,n,r){r(279),t.exports=r(7).String.trimRight},function(t,n,r){"use strict";r(39)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,n,r){r(281),t.exports=r(61).f("asyncIterator")},function(t,n,r){r(89)("asyncIterator")},function(t,n,r){r(283),t.exports=r(7).Object.getOwnPropertyDescriptors},function(t,n,r){var e=r(0),i=r(116),o=r(15),u=r(20),c=r(77);e(e.S,"Object",{getOwnPropertyDescriptors:function(t){for(var n,r,e=o(t),a=u.f,f=i(e),s={},l=0;f.length>l;)void 0!==(r=a(e,n=f[l++]))&&c(s,n,r);return s}})},function(t,n,r){r(285),t.exports=r(7).Object.values},function(t,n,r){var e=r(0),i=r(118)(!1);e(e.S,"Object",{values:function(t){return i(t)}})},function(t,n,r){r(287),t.exports=r(7).Object.entries},function(t,n,r){var e=r(0),i=r(118)(!0);e(e.S,"Object",{entries:function(t){return i(t)}})},function(t,n,r){"use strict";r(110),r(289),t.exports=r(7).Promise.finally},function(t,n,r){"use strict";var e=r(0),i=r(7),o=r(1),u=r(47),c=r(112);e(e.P+e.R,"Promise",{finally:function(t){var n=u(this,i.Promise||o.Promise),r="function"==typeof t;return this.then(r?function(r){return c(n,t()).then(function(){return r})}:t,r?function(r){return c(n,t()).then(function(){throw r})}:t)}})},function(t,n,r){r(291),r(292),r(293),t.exports=r(7)},function(t,n,r){var e=r(1),i=r(0),o=r(57),u=[].slice,c=/MSIE .\./.test(o),a=function(t){return function(n,r){var e=arguments.length>2,i=!!e&&u.call(arguments,2);return t(e?function(){("function"==typeof n?n:Function(n)).apply(this,i)}:n,r)}};i(i.G+i.B+i.F*c,{setTimeout:a(e.setTimeout),setInterval:a(e.setInterval)})},function(t,n,r){var e=r(0),i=r(83);e(e.G+e.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,n,r){for(var e=r(80),i=r(31),o=r(11),u=r(1),c=r(14),a=r(40),f=r(5),s=f("iterator"),l=f("toStringTag"),h=a.Array,v={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(v),d=0;d<p.length;d++){var g,y=p[d],b=v[y],m=u[y],x=m&&m.prototype;if(x&&(x[s]||c(x,s,h),x[l]||c(x,l,y),a[y]=h,b))for(g in e)x[g]||o(x,g,e[g],!0)}},function(t,n,r){var e=function(t){"use strict";var n,r=Object.prototype,e=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function a(t,n,r,e){var i=n&&n.prototype instanceof d?n:d,o=Object.create(i.prototype),u=new M(e||[]);return o._invoke=function(t,n,r){var e=s;return function(i,o){if(e===h)throw new Error("Generator is already running");if(e===v){if("throw"===i)throw o;return A()}for(r.method=i,r.arg=o;;){var u=r.delegate;if(u){var c=E(u,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(e===s)throw e=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);e=h;var a=f(t,n,r);if("normal"===a.type){if(e=r.done?v:l,a.arg===p)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(e=v,r.method="throw",r.arg=a.arg)}}}(t,r,u),o}function f(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=a;var s="suspendedStart",l="suspendedYield",h="executing",v="completed",p={};function d(){}function g(){}function y(){}var b={};b[o]=function(){return this};var m=Object.getPrototypeOf,x=m&&m(m(F([])));x&&x!==r&&e.call(x,o)&&(b=x);var w=y.prototype=d.prototype=Object.create(b);function S(t){["next","throw","return"].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function _(t){var n;this._invoke=function(r,i){function o(){return new Promise(function(n,o){!function n(r,i,o,u){var c=f(t[r],t,i);if("throw"!==c.type){var a=c.arg,s=a.value;return s&&"object"==typeof s&&e.call(s,"__await")?Promise.resolve(s.__await).then(function(t){n("next",t,o,u)},function(t){n("throw",t,o,u)}):Promise.resolve(s).then(function(t){a.value=t,o(a)},function(t){return n("throw",t,o,u)})}u(c.arg)}(r,i,n,o)})}return n=n?n.then(o,o):o()}}function E(t,r){var e=t.iterator[r.method];if(e===n){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=n,E(t,r),"throw"===r.method))return p;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=f(e,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=n),r.delegate=null,p):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function O(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function P(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function F(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,u=function r(){for(;++i<t.length;)if(e.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=n,r.done=!0,r};return u.next=u}}return{next:A}}function A(){return{value:n,done:!0}}return g.prototype=w.constructor=y,y.constructor=g,y[c]=g.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===g||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},S(_.prototype),_.prototype[u]=function(){return this},t.AsyncIterator=_,t.async=function(n,r,e,i){var o=new _(a(n,r,e,i));return t.isGeneratorFunction(r)?o:o.next().then(function(t){return t.done?t.value:o.next()})},S(w),w[c]="Generator",w[o]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var n=[];for(var r in t)n.push(r);return n.reverse(),function r(){for(;n.length;){var e=n.pop();if(e in t)return r.value=e,r.done=!1,r}return r.done=!0,r}},t.values=F,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&e.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(e,i){return c.type="throw",c.arg=t,r.next=e,i&&(r.method="next",r.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var u=this.tryEntries[o],c=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var a=e.call(u,"catchLoc"),f=e.call(u,"finallyLoc");if(a&&f){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(a){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!f)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&e.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=t,u.arg=n,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(u)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),p},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),p}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var e=r.completion;if("throw"===e.type){var i=e.arg;P(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:F(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=n),p}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}},function(t,n,r){r(296),t.exports=r(119).global},function(t,n,r){var e=r(297);e(e.G,{global:r(85)})},function(t,n,r){var e=r(85),i=r(119),o=r(298),u=r(300),c=r(307),a=function(t,n,r){var f,s,l,h=t&a.F,v=t&a.G,p=t&a.S,d=t&a.P,g=t&a.B,y=t&a.W,b=v?i:i[n]||(i[n]={}),m=b.prototype,x=v?e:p?e[n]:(e[n]||{}).prototype;for(f in v&&(r=n),r)(s=!h&&x&&void 0!==x[f])&&c(b,f)||(l=s?x[f]:r[f],b[f]=v&&"function"!=typeof x[f]?r[f]:g&&s?o(l,e):y&&x[f]==l?function(t){var n=function(n,r,e){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,r)}return new t(n,r,e)}return t.apply(this,arguments)};return n.prototype=t.prototype,n}(l):d&&"function"==typeof l?o(Function.call,l):l,d&&((b.virtual||(b.virtual={}))[f]=l,t&a.R&&m&&!m[f]&&u(m,f,l)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,n,r){var e=r(299);t.exports=function(t,n,r){if(e(t),void 0===n)return t;switch(r){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,i){return t.call(n,r,e,i)}}return function(){return t.apply(n,arguments)}}},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n,r){var e=r(301),i=r(306);t.exports=r(87)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var e=r(302),i=r(303),o=r(305),u=Object.defineProperty;n.f=r(87)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){var e=r(86);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n,r){t.exports=!r(87)&&!r(120)(function(){return 7!=Object.defineProperty(r(304)("div"),"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(86),i=r(85).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n,r){var e=r(86);t.exports=function(t,n){if(!e(t))return t;var r,i;if(n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!e(i=r.call(t)))return i;if(!n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n){function r(t,n,r,e,i,o,u){try{var c=t[o](u),a=c.value}catch(t){return void r(t)}c.done?n(a):Promise.resolve(a).then(e,i)}function e(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var i;i=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.options={verbose:!0},this.bait={},this.baitProperties={class:"pub_300x25 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links",style:"width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;"}}var n,i;return n=t,(i=[{key:"init",value:function(t){this.createBait(),t&&(this.options.adServiceURL=t.adServiceURL,this.options.verbose=!1!==t.verbose)}},{key:"createBait",value:function(){var t=document.createElement("div");t.setAttribute("class",this.baitProperties.class),t.setAttribute("style",this.baitProperties.style),this.bait=window.document.body.appendChild(t)}},{key:"isBaitGone",value:function(){return this.bait&&("none"==this.bait.style.display||"hidden"==this.bait.style.visibility||0==this.bait.offsetHeight)}},{key:"adBlockPixelCheck",value:function(t){var n=this,r=this.options.adServiceURL?this.options.adServiceURL:t;return new Promise(function(t){"MutationObserver"in window||(window.MutationObserver=window.WebKitMutationObserver||window.MozMutationObserver);var e=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),i="dab.container."+e,o="dab.img."+e,u=function(t){return document.getElementById(t).remove()},c=new MutationObserver(function(n){n.forEach(function(n){"childList"==n.type&&Array.prototype.forEach.call(n.target.children,function(n){n.id===o&&(n.addEventListener("load",function(){u(i),t(!1)}),n.addEventListener("error",function(){u(i),t(!0)}))})})}),a=document.createElement("div");a.id=i,a.style=n.baitProperties.style,document.body.append(a);var f=document.getElementById(i);c.observe(f,{childList:!0});var s=new Image(1,1);s.id=o,s.style=n.baitProperties.style,s.src=r,f.append(s)})}},{key:"isAdblockDetected",value:function(){var t,n=(t=regeneratorRuntime.mark(function t(){var n,r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=!1,t.prev=2,t.next=5,fetch(new Request("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js")).then(function(t){return t.ok||r.options.verbose&&console.info("Network response was not ok when trying to detect adblock"),t.text()}).then(function(t){t&&(t=t.replace(/  |\r\n|\n|\r/gm,"")),t&&t.length>0?r.options.verbose&&console.info("No ADBlock detection | data loaded successfully"):(n=!0,r.options.verbose&&console.info("Data loaded is empty. ADBlock must be active | data info:",t))}).catch(function(t){r.options.verbose&&console.info("Error while fetching data for adblock detection. An Adblock must be active | ",t),n=!0});case 5:t.next=11;break;case 7:t.prev=7,t.t0=t.catch(2),this.options.verbose&&console.info("Fetch request blocked. ADBlock is active | ",error),n=!0;case 11:return t.prev=11,t.abrupt("return",n);case 14:case"end":return t.stop()}},t,this,[[2,7,11,14]])}),function(){var n=this,e=arguments;return new Promise(function(i,o){var u=t.apply(n,e);function c(t){r(u,i,o,c,a,"next",t)}function a(t){r(u,i,o,c,a,"throw",t)}c(void 0)})});return function(){return n.apply(this,arguments)}}()},{key:"detectPrivateMode",value:function(){return new Promise(function(t){var n,r,e=function(){t(!0)},i=function(){t(!1)};if(!((n=/(?=.*(opera|chrome)).*/i.test(navigator.userAgent)&&navigator.storage&&navigator.storage.estimate)&&navigator.storage.estimate().then(function(t){return t.quota<12e7?e():i()}),n||function(){var t="MozAppearance"in document.documentElement.style;if(t)if(null==indexedDB)e();else{var n=indexedDB.open("inPrivate");n.onsuccess=i,n.onerror=e}return t}()||function(){var t=navigator.userAgent.match(/Version\/([0-9\._]+).*Safari/);if(t){if(parseInt(t[1],10)<11)return function(){try{localStorage.length?i():(localStorage.setItem("inPrivate","0"),localStorage.removeItem("inPrivate"),i())}catch(t){navigator.cookieEnabled?e():i()}return!0}();try{window.openDatabase(null,null,null,null),i()}catch(t){e()}}return!!t}()||((r=!window.indexedDB&&(window.PointerEvent||window.MSPointerEvent))&&e(),r)))return i()})}}])&&e(n.prototype,i),t}(),window.EV=window.EV||{},window.EV.Dab=new i}]);
/**
 * @license ev-em.js v3.4.4 (Google One Tap more conf - 12:07 CEST - 2 May 2023)
 * (c) 2015-2023 Evolok, Inc. https://www.evolok.com/
 *
 * License: MIT
 */
var runtime=function(a){"use strict";var u,t=Object.prototype,h=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",e=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function i(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{i({},"")}catch(t){i=function(t,r,e){return t[r]=e}}function c(t,r,e,n){var o,i,a,c,r=r&&r.prototype instanceof d?r:d,r=Object.create(r.prototype),n=new j(n||[]);return r._invoke=(o=t,i=e,a=n,c=l,function(t,r){if(c===p)throw new Error("Generator is already running");if(c===y){if("throw"===t)throw r;return k()}for(a.method=t,a.arg=r;;){var e=a.delegate;if(e){var n=function t(r,e){var n=r.iterator[e.method];if(n===u){if(e.delegate=null,"throw"===e.method){if(r.iterator.return&&(e.method="return",e.arg=u,t(r,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var n=f(n,r.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,v;n=n.arg;if(!n)return e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v;{if(!n.done)return n;e[r.resultName]=n.value,e.next=r.nextLoc,"return"!==e.method&&(e.method="next",e.arg=u)}e.delegate=null;return v}(e,a);if(n){if(n===v)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===l)throw c=y,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=p;n=f(o,i,a);if("normal"===n.type){if(c=a.done?y:s,n.arg!==v)return{value:n.arg,done:a.done}}else"throw"===n.type&&(c=y,a.method="throw",a.arg=n.arg)}}),r}function f(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}a.wrap=c;var l="suspendedStart",s="suspendedYield",p="executing",y="completed",v={};function d(){}function g(){}function m(){}var w={};w[n]=function(){return this};r=Object.getPrototypeOf,r=r&&r(r(O([])));r&&r!==t&&h.call(r,n)&&(w=r);var L=m.prototype=d.prototype=Object.create(w);function x(t){["next","throw","return"].forEach(function(r){i(t,r,function(t){return this._invoke(r,t)})})}function b(a,c){var r;this._invoke=function(e,n){function t(){return new c(function(t,r){!function r(t,e,n,o){t=f(a[t],a,e);if("throw"!==t.type){var i=t.arg;return(e=i.value)&&"object"==typeof e&&h.call(e,"__await")?c.resolve(e.__await).then(function(t){r("next",t,n,o)},function(t){r("throw",t,n,o)}):c.resolve(e).then(function(t){i.value=t,n(i)},function(t){return r("throw",t,n,o)})}o(t.arg)}(e,n,t,r)})}return r=r?r.then(t,t):t()}}function E(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function _(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function O(r){if(r){var t=r[n];if(t)return t.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var e=-1,t=function t(){for(;++e<r.length;)if(h.call(r,e))return t.value=r[e],t.done=!1,t;return t.value=u,t.done=!0,t};return t.next=t}}return{next:k}}function k(){return{value:u,done:!0}}return((g.prototype=L.constructor=m).constructor=g).displayName=i(m,o,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,i(t,o,"GeneratorFunction")),t.prototype=Object.create(L),t},a.awrap=function(t){return{__await:t}},x(b.prototype),b.prototype[e]=function(){return this},a.AsyncIterator=b,a.async=function(t,r,e,n,o){void 0===o&&(o=Promise);var i=new b(c(t,r,e,n),o);return a.isGeneratorFunction(r)?i:i.next().then(function(t){return t.done?t.value:i.next()})},x(L),i(L,o,"Generator"),L[n]=function(){return this},L.toString=function(){return"[object Generator]"},a.keys=function(e){var t,n=[];for(t in e)n.push(t);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},a.values=O,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&h.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=u)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function t(t,r){return i.type="throw",i.arg=e,n.next=t,r&&(n.method="next",n.arg=u),!!r}for(var r=this.tryEntries.length-1;0<=r;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=h.call(o,"catchLoc"),c=h.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&h.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}var i=(o=o&&("break"===t||"continue"===t)&&o.tryLoc<=r&&r<=o.finallyLoc?null:o)?o.completion:{};return i.type=t,i.arg=r,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),v},finish:function(t){for(var r=this.tryEntries.length-1;0<=r;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),_(e),v}},catch:function(t){for(var r=this.tryEntries.length-1;0<=r;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n,o=e.completion;return"throw"===o.type&&(n=o.arg,_(e)),n}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:O(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=u),v}},a}("object"==typeof module?module.exports:{});try{regeneratorRuntime=runtime}catch(t){Function("r","regeneratorRuntime = r")(runtime)}
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _createSuper(n){var r=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(n);return _possibleConstructorReturn(this,r?(e=_getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _wrapNativeSuper(e){var n="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(t,e)})(e)}function _construct(e,t,n){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);r=new(Function.bind.apply(e,r));return n&&_setPrototypeOf(r,n.prototype),r}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function asyncGeneratorStep(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function _asyncToGenerator(s){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=s.apply(e,a);function i(e){asyncGeneratorStep(r,t,n,i,o,"next",e)}function o(e){asyncGeneratorStep(r,t,n,i,o,"throw",e)}i(void 0)})}}function _createForOfIteratorHelper(e,t){var n,r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,t=function(){};return{s:t,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:(r=function(e){throw e},o.toString=function(){return r.toString()},o),f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e){return r.apply(this,arguments)}var a,s,l=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:(s=function(e){c=!0,a=e},u.toString=function(){return s.toString()},u),f:function(){try{l||null==n.return||n.return()}finally{if(c)throw a}}};function u(e){return s.apply(this,arguments)}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ownKeys(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.EV=window.EV||{},function(G){var r,F,u,d,o,m=new w,a=new w,n=!1,i=0,s=0,p={};window.addEventListener("ev.widgets.dwelltime.enabled",function(e){e.detail.dwellTimeTrackingEnabled&&(n=!0,s=e.detail.maxDwellTimeRequests||3,setTimeout(function(){G.Em.initDwellTimeRequests(p.authorizeData)},1e3))});var l,t,c=(l="evolok.api.service",function(e){var t;if(!e||0===e.trim().length)throw new Error("Could not find the service name or key!");return G.Em.secureModeEnabled&&(t=q("ex_ss"))?"Evolok "+l+"="+e+" evolok.api.secureSessionId="+t:(t=q("ev_ss"),"Evolok "+l+"="+e+" evolok.api.sessionId="+t)});function h(){u&&(F.disableCookies||j("ev_sid")==u||(f("ev_sid",u),b("ev_sid",u,0,"localStorage"))),d&&(F.disableCookies||j("ev_did")==d||(f("ev_did",d),b("ev_did",d,0,"localStorage")))}function j(e){for(var t=(t=document.cookie).split("; "),n={},r=0;r<t.length;r++){var i=t[r].split("=");n[i[0]]=i[1]}return n[e]||""}G.Em={Event:{AD_AUTHORIZE:"ev.ad.authorize",PROFILE_ACCESS_RENDER_STATUS:"ev.ad.profile.access.render.status",GET_USER_PROFILE_SUCCESS:"ev.ad.get.user.profile.success",GET_USER_PROFILE_FAIL:"ev.ad.get.user.profile.fail",UPDATE_PROFILE_SUCCESS:"ev.em.profile.update.success",UPDATE_PROFILE_FAIL:"ev.em.profile.update.fail",GET_PROFILE_TEMPLATE_SUCCESS:"ev.em.profile.template.get.success",GET_PROFILE_TEMPLATE_FAIL:"ev.em.profile.template.get.fail",GET_PROFILE_DATA_SUCCESS:"ev.em.profile.data.get.success",GET_PROFILE_DATA_FAIL:"ev.em.profile.data.get.fail",DWELLTIME_CHECK:"ev.ad.dwelltime.check",DWELLTIME_WIDGETS_ENABLED:"ev.widgets.dwelltime.enabled",PAYWALL_MODAL_RENDERED:"ev.em.paywall.modal.rendered",NOTIFIER_MODAL_RENDERED:"ev.em.notifier.modal.rendered",PAYWALL_OPENED:"ev.em.paywall.opened",NOTIFIER_OPENED:"ev.em.notifier.opened",PAYWALL_SHOW_CTA:"ev.em.paywall.showCTA",NOTIFIER_SHOW_CTA:"ev.em.notifier.showCTA",PAYWALL_RENDER_READY:"ev.em.paywall.render.ready",NOTIFIER_RENDER_READY:"ev.em.notifier.render.ready",NOTIFIER_CLOSE:"ev.em.notifier.close",ARTICLE_DATA:"ev.em.article.data",ARTICLE_URL:"ev.em.article.url",CLOSE_ARTICLE_SHARING_MODAL:"ev.em.close.article.sharing.modal",SHARE_ARTICLE_SUCCESS:"ev.em.share.article.success",SHARE_ARTICLE_ERROR:"ev.em.share.article.error",OPEN_PRODUCT_SELECTION:"ev.em.open.product.selection",PRODUCT_SELECTION_LOADED:"ev.em.product.selection.loaded",SOCIAL_LOGIN_SUCCESS:"ev.em.social.login.success",SOCIAL_LOGIN_FAILED:"ev.em.social.login.failed",SESSION_REFRESH:"ev.em.session.refresh",SESSION_SAVED:"ev.em.user.session.saved",IDENTITY_LINK_AUTHENTICATION:"ev.em.identity.link.authentication",SOCIALS_LINK_AUTHENTICATION:"ev.em.socials.link.authentication",SOCIAL_LOGIN_ATTEMPTED_EXISTING_EMAIL:"social.login.existing.email.attempted",SOCIAL_LOGIN_ATTEMPTED_REQUIRES_AUTHENTICATION:"social.login.existing.email.authentication.required",USER_IDENTIFIED:"ev.em.user.identified",LOGOUT_SUCCESS:"ev.em.logout.success",LOGOUT_FAILED:"ev.em.logout.failed",SESSION_EXPIRED:"ev.em.session.expired"},on:function(e,t){window.addEventListener(e,t)},publish:function(e,t){var n;"function"==typeof CustomEvent?n=new CustomEvent(e,{detail:t}):(n=document.createEvent("CustomEvent")).initCustomEvent(e,!1,!1,{detail:t}),window.dispatchEvent(n)},shareArticle:function(t){var e=j("ev_ss")||j("ev_ss"),n="".concat(F.pmUrl,"/widget/account/sharearticle?ev_ss=").concat(e),e={articleUrl:t.articleUrl,articleId:t.articleId,recipientEmail:t.email};fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){200===e.status?e.json().then(function(e){G.Em.publish(G.Em.Event.CLOSE_ARTICLE_SHARING_MODAL,{}),G.Em.publish(G.Em.Event.SHARE_ARTICLE_SUCCESS,_objectSpread(_objectSpread({},e),{},{metadata:t.metadata}))}):e.json().then(function(e){return G.Em.publish(G.Em.Event.SHARE_ARTICLE_ERROR,e)})}).catch(function(e){G.Em.publish(G.Em.Event.SHARE_ARTICLE_ERROR,e),console.log(e)})},init:function(e){if(!e.url)throw"Configuration must specify the url property!";e.hasOwnProperty("brand")&&(this.brand=e.brand),e.hasOwnProperty("channel")&&(this.channel=e.channel),e.hasOwnProperty("realmName")&&(this.realmName=e.realmName),e.hasOwnProperty("serviceName")&&(this.serviceName=e.serviceName),e.hasOwnProperty("socialServiceName")&&(this.socialServiceName=e.socialServiceName),e.hasOwnProperty("secureModeEnabled")&&(this.secureModeEnabled=e.secureModeEnabled),e.hasOwnProperty("autoRegister")&&(this.autoRegister=e.autoRegister),e.hasOwnProperty("autoPopulate")&&(this.autoPopulate=e.autoPopulate),e.hasOwnProperty("socialAttributeMapping")&&(this.socialAttributeMapping=e.socialAttributeMapping),e.hasOwnProperty("ssoCookieDomain")&&(this.ssoCookieDomain=e.ssoCookieDomain),e.hasOwnProperty("enableSeamlessMode")&&(this.enableSeamlessMode=e.enableSeamlessMode),e.hasOwnProperty("disableCookies")&&(this.disableCookies=e.disableCookies),e.hasOwnProperty("qrCodeQueryParam")?this.qrCodeQueryParam=e.qrCodeQueryParam:this.qrCodeQueryParam="evAccessToken",e.hasOwnProperty("shareArticleTokenQueryParam")?this.shareArticleTokenQueryParam=e.shareArticleTokenQueryParam:this.shareArticleTokenQueryParam="shareArticleToken",e.hasOwnProperty("articleUrlKey")?this.articleUrlKey=e.articleUrlKey:this.articleUrlKey="article_url",e.hasOwnProperty("articleIdKey")?this.articleIdKey=e.articleIdKey:this.articleIdKey="articleId",e.hasOwnProperty("enableGoogleOneTap")&&!0===e.enableGoogleOneTap&&(e.hasOwnProperty("realmName")||e.hasOwnProperty("socialServiceName")&&e.hasOwnProperty("serviceName")?e.hasOwnProperty("googleClientId")?(this.googleClientId=e.googleClientId,this.enableGoogleOneTap=e.enableGoogleOneTap,this.googleGenericConf=e.googleGenericConf,G.Em.initGoogleApis()):(console.warn("Impossible to initialize Google One Tap. Check that you have setup correctly the `googleClientId`"),delete e.enableGoogleOneTap):(console.warn("Impossible to initialize Google One Tap. Check that you have setup correctly: `realmName`, `socialServiceName` / `serviceName`"),delete e.enableGoogleOneTap)),e.hasOwnProperty("authSchemeName")&&(this.authSchemeName=e.authSchemeName),e.hasOwnProperty("autoLinkLoginRedirectUrl")&&(this.autoLinkLoginRedirectUrl=e.autoLinkLoginRedirectUrl),e.hasOwnProperty("autoLinkLoginRedirectAutomatic")?this.autoLinkLoginRedirectAutomatic=e.autoLinkLoginRedirectAutomatic:this.autoLinkLoginRedirectAutomatic=!0,e.hasOwnProperty("icDomain")&&(this.icDomain=e.icDomain),e.hasOwnProperty("GTMDataLayerEnabled")&&(this.GTMDataLayerEnabled=e.GTMDataLayerEnabled),e.hasOwnProperty("enableDwellTime")&&(this.enableDwellTime=e.enableDwellTime),(F=e).icDomain&&F.serviceName&&G.Em.getUserProfileData(),G.Event&&G.Event.on(G.Event.USER_SESSION_SAVED,function(){G.Em.getUserProfileData()})},initGoogleApis:function(){var e=function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""}("ev_ss");function n(e){var t,n,r;console.log("Google One Tap Response",e),e.network="google",t=G.Em.socialServiceName||G.Em.serviceName,n=G.Em.autoRegister||!0,r=G.Em.autoPopulate||!1,function(n,r,i,o,a){return new Promise(function(e,t){!function(t,u,e,n,r,i,d,m){var p=t.network;if(t.hasOwnProperty("error")||t.hasOwnProperty("code")){var o=v(t,u,p);m(o)}else{var h,r={autoRegister:r||!0,autoPopulate:i||!1};if(t.hasOwnProperty("credential")){Object.assign(t,{jwt:t.credential}),h=t,Object.assign(h,{realmName:e}),Object.assign(h,{serviceName:n});var a=[];if(i&&G.Em.socialAttributeMapping){for(var s in G.Em.socialAttributeMapping){s={name:s,value:G.Em.socialAttributeMapping[s]};a.push(s)}Object.assign(h,{attributesMapping:a})}G.Em.brand&&(h.brand=G.Em.brand),G.Em.channel&&(h.channel=G.Em.channel);var E,r="https://".concat(G.Em.icDomain,"/social/").concat(p,"/session?autoRegister=").concat(r.autoRegister,"&autoPopulate=").concat(r.autoPopulate),n={Accept:"application/json;charset=UTF-8","Content-Type":"application/json;charset=UTF-8",Authorization:c(n)};fetch(r,{method:"POST",headers:n,body:JSON.stringify(h)}).then(function(e){return E=t.headers,e.json()}).then(function(e){var t,n,r,i,o,a,s,l,c;e.hasOwnProperty("error")||e.hasOwnProperty("code")||400<=u?(e.googleOneTap=h,function(e){if(e&&e.code&&"SOCIAL_EMAIL_ADDRESS_IN_USE"===e.code){var t,n={};if(n.googleOneTap=e.googleOneTap,n.identifiers=[{name:e.args[0],value:e.args[1]}],e.args&&(1===(r=e.args[2].split(",")).length&&""===r[0]?(r=[],G.Em.publish("hide.social",{networks:r}),n.hideSocial={networks:r},G.Em.publish(G.Em.Event.IDENTITY_LINK_AUTHENTICATION),G.Em.publish(G.Em.Event.USER_IDENTIFIED,n.identifiers)):(t="true"===e.args[3],r=r.map(function(e){return e.toLowerCase()}),t?(G.Em.publish(G.Em.Event.IDENTITY_LINK_AUTHENTICATION),G.Em.publish("user.identified.with.socials",{networks:r}),G.Em.publish(G.Em.Event.USER_IDENTIFIED,n.identifiers)):(1<r.length?(G.Em.publish(G.Em.Event.SOCIALS_LINK_AUTHENTICATION,r),n.socialLinkAuthentication=r):G.Em.publish(r[0]+".link.authentication"),G.Em.publish("hide.ic.login",{networks:r}),n.hideIcLogin={networks:r}))),e.network="google",n.socialNetwork=e.network,n.socialLoginAttempted=!0,!G.Em.authSchemeName){var r="EV.Em.init() is not provided with an authSchemeName attribute, impossible to proceed with Social Linking to existing account.";return console.error(r),G.Em.publish(G.Em.Event.SOCIAL_LOGIN_FAILED,r)}b("ev_auth_scheme",G.Em.authSchemeName,0,"sessionStorage"),b("google_one_tap_attempted",JSON.stringify(n),0,"sessionStorage"),G.Em.autoLinkLoginRedirectAutomatic&&G.Em.autoLinkLoginRedirectUrl?(console.info("Redirecting user to authenticate with Evolok before doing Social Linking"),window.location.href=G.Em.autoLinkLoginRedirectUrl):G.Em.publish(G.Em.Event.SOCIAL_LOGIN_ATTEMPTED_REQUIRES_AUTHENTICATION,{socialNetwork:e.network})}G.Em.publish(G.Em.Event.SOCIAL_LOGIN_FAILED,e)}(e),a=v(e,u,p),m(a)):(t=e).hasOwnProperty("guid")&&(n=!1,t.hasOwnProperty("mainSession")&&(n=t.mainSession.hasOwnProperty("sessionCookie")?t.mainSession.sessionCookie:n,r=t.mainSession.hasOwnProperty("expiry")?t.mainSession.expiry:new Date),i=!1,!G.Em.enableSeamlessMode||(a=E?E.get("X-EV-SSO"):void 0)&&(s=t,l=a,c=i=!0,new Promise(function(e,t){G.Em.assert(l,"Seamless domains should not be empty!"),G.Em.assert(s,"Session should not be empty!"),l=l.split(",");var n=c?"https://":"http://",r=0;function i(){r===l.length&&e()}l.forEach(function(e){var t=n+e+"/ic/api/session/"+s.mainSession.sessionId+"/sso.gif",e=new XMLHttpRequest;e.open("GET",t),e.withCredentials=!0,e.send(),e.onload=function(){r++,i()},e.onerror=function(){r++,i()}})}).then(function(){o=f(t,n,r,e,p,u),d(o)})),i||(o=f(t,n,r,e,p,u),d(o)))}).catch(function(e){console.error("Social login failed",e),G.Em.publish(G.Em.Event.SOCIAL_LOGIN_FAILED,e.message)})}else m("Credentials from Google One Tap response weren't found. Impossible to create User Session.")}}(a,null,n,r,i,o,e,t)})}(G.Em.realmName,t,n,r,e).then(function(e){G.Em.publish(G.Em.Event.SOCIAL_LOGIN_SUCCESS,e)},function(e){console.error("Social login error",e)}).catch(function(e){console.log("Error during social login",e)})}function f(e,t,n,r,i,o){return function(e,t,n,r){G.Em.assert(e,"Evolok session should not be empty!");var i="ev_session",o=G.Em.ssoCookieDomain||window.location.hostname;r||(!G.Em.disableCookies&&e&&e.hasOwnProperty("mainSession")&&a("ev_ss",e.mainSession.sessionId,{expireMillis:e.mainSession.expiry||n,domain:o}),!G.Em.disableCookies&&G.Em.secureModeEnabled&&e.hasOwnProperty("secureSession")&&a("ex_ss",e.secureSession.sessionId,{expireMillis:e.secureSession.expiry||n,domain:o}));(t?sessionStorage:localStorage).setItem(i,JSON.stringify(e));G.Em.publish(G.Em.Event.SESSION_SAVED,"session saved")}(e,t,n),G.Em.publish(G.Em.Event.SESSION_REFRESH,e),{network:i,statusCode:o,response:r}}function a(e,t,n){if(!navigator.cookieEnabled)throw Error("cookies are disabled");if(n=n||{},!e)throw Error("invalid key");t=e+"="+t;if(n.expireMillis&&((r=new Date).setTime(n.expireMillis),t+="; time="+new Date+"; expires="+r.toGMTString()),n.domain&&n.domain!==document.domain){var r=n.domain.replace(/^\./,"");if(-1===document.domain.indexOf(r)||r.split(".").length<=1)throw Error("invalid domain");t+="; domain="+n.domain}n=y();document.cookie=n&&n<13?t+"; path=/; Secure":t+"; path=/;SameSite=None; Secure"}function v(e,t,n){if(!e)return e;t={network:n,statusCode:t,error:{}};return e.hasOwnProperty("code")?(t.error.code=e.code,t.error.message=e.message):e.hasOwnProperty("error")?t.error=e.error:t.error=e,e.hasOwnProperty("args")&&(t.error.args=e.args),t}e&&""!==e?console.info("User is logged in, Google One Tap will be skipped",e):((e=document.createElement("script")).src="https://accounts.google.com/gsi/client",e.onload=function(){!function(){var e={client_id:F.googleClientId,callback:n};if(null!==F.googleGenericConf)for(var t in F.googleGenericConf)e[t]=F.googleGenericConf[t];google.accounts.id.initialize(e),google.accounts.id.prompt(function(e){console.log("Goole One Tap Notification",e),e.isNotDisplayed()?console.info("Google One Tap is not being displayed",e):e.isSkippedMoment()&&console.info("Google One Tap was skipped",e)})}()},e.defer=!0,document.body.appendChild(e))},getEVSession:function(){var e="evolok:ev_session",t=localStorage.getItem(e);return(t=null==t||0===t.length?sessionStorage.getItem(e)?sessionStorage.getItem(e):j(e):t)&&0<t.length?JSON.parse(t):null},logout:function(){return new Promise(function(e,t){var n,r,i=G.Em.getEVSession();S("ev_ss"),S("ex_ss"),i&&(n=G.Em.socialServiceName||G.Em.serviceName,r=window.location.protocol+"//"+window.location.host,r={Accept:"application/json;charset=UTF-8","Content-Type":"application/json;charset=UTF-8",Authorization:c(n),Origin:r},G.Em.deleteSession(i.mainSession.sessionId,r,null,e,t))})},deleteSession:function(e,t,n,r,i){G.Em.assert(e,"Session ID should not be empty!");e="https://".concat(F.icDomain,"/session/").concat(e);function o(e){G.Em.publish(G.Em.Event.LOGOUT_SUCCESS,e),r(e)}G.Em.delete(e,t,n).then(function(e){if(e.hasOwnProperty("statusCode")&&200==e.statusCode)if(G.Em.clearAllSessions(),G.Em.removeUserProfile(),G.Em.enableSeamlessMode){var t=e.headers?e.headers.get("X-EV-SSO"):void 0;if(!t)throw o(),new Error("Couldn't find the participating seamless sign-in domains");G.Em.deleteSeamlessSession(t,!0).then(function(){o(e)})}else o(e);else o(e)},function(e){"SESSION_NOT_FOUND"==e.error.code?(G.Em.clearAllSessions(),G.Em.removeUserProfile(),o(e)):i(e)})},deleteSeamlessSession:function(o,a){return new Promise(function(e,t){G.Em.assert(o,"Seamless domains should not be empty!"),o=o.split(",");var n=a?"https://":"http://",r=0;function i(){r===o.length&&e()}o.forEach(function(e){var t=n+e+"/ic/api/session/sso_logout.gif",e=new XMLHttpRequest;e.open("GET",t),e.withCredentials=!0,e.send(),e.onload=function(){r++,i()},e.onerror=function(){r++,i()}})})},delete:function(t,n,e,r){return new Promise(function(o,a){G.Em.assert(t,"Http request resource uri path should not be empty!"),G.Em.isValid();var s,l,e=r||{};r&&r.hasOwnProperty("serviceName")?e.serviceName=r.serviceName:(e.serviceName=G.Em.socialServiceName||G.Em.serviceName,e.realmName=G.Em.realmName),n=n||{},fetch(t,{method:"DELETE",headers:n}).then(function(e){return l=e.headers,s=e.status,200===e.status?e.text():void G.Em.publish(G.Em.Event.LOGOUT_FAILED,{status:e.status})}).then(function(e){if(e.error||e.code){var t=s,n=e.code,r=e.message||e.error&&e.error.message||e,i=[];return"SESSION_HAS_EXPIRED"===e.code&&(G.Em.clearAllSessions(),G.Em.removeUserProfile(),G.Event.publish(G.Em.SESSION_EXPIRED,"Session has expired.")),e.hasOwnProperty("args")?i=e.args:e.hasOwnProperty("error")&&(i=e.error.args),void a({code:n,message:r,statusCode:t,args:i})}o({response:e,statusCode:s,headers:l})}).catch(function(e){console.error("Logout failed",e),G.Em.publish(G.Em.Event.LOGOUT_FAILED,e)})})},clearAllSessions:function(){G.Em.removeEVSession()},removeUserProfile:function(){sessionStorage.removeItem("ev_profile")},removeEVSession:function(){var e="ev_session";sessionStorage.removeItem(e),localStorage.removeItem(e),S("ev_ss"),S("ex_ss");localStorage.removeItem("hello")},isValid:function(){if(!F.icDomain)throw new Error("Config must specify the icDomain property");if(!G.Em.detectBrowserSupport())throw console.error("Not Compatible with current browser!"),new Error("Not Compatible with current browser!")},detectBrowserSupport:function(){var e="withCredentials"in new XMLHttpRequest;return e||console.error("Error running EV: your browser does not support CORS."),e},getAuthResponse:function(){return m.promise},getSegmentResponse:function(){return a.promise},getUserProfileTemplate:function(){fetch("https://".concat(F.domainName,"/ic/api/ui/template/profile/").concat(F.profileServiceName),{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){return 200===e.status?e.json():void G.Em.publish(G.Em.Event.GET_PROFILE_TEMPLATE_FAIL,e.status)}).then(function(e){G.Em.publish(G.Em.Event.GET_PROFILE_TEMPLATE_SUCCESS,e)}).catch(function(e){return G.Em.publish(G.Em.Event.GET_PROFILE_TEMPLATE_FAIL,e.message)})},getUserProfileData:function(){var e=!1,t=document.getElementsByTagName("ev-em-profile-when"),n=localStorage.getItem("evolok:ev_session"),r=JSON.parse(JSON.parse(sessionStorage.getItem("evolok:ev_profile")))||{};if(n){var i,o=_createForOfIteratorHelper(t);try{for(o.s();!(i=o.n()).done;)"true"===i.value.getAttribute("getProfileEnable")&&(e=!0)}catch(e){o.e(e)}finally{o.f()}e?F.serviceName in r||(r=(n=JSON.parse(n)).guid,n=n.secureSession.sessionId,n="Evolok evolok.api.service=".concat(F.serviceName," evolok.api.secureSessionId=").concat(n),fetch("https://".concat(F.icDomain,"/userProfile/").concat(r,"?serviceName=").concat(F.serviceName),{method:"GET",headers:{"Content-Type":"application/xml",Accept:"application/json",Authorization:n}}).then(function(e){return 200===e.status?e.json():void G.Em.publish(G.Em.Event.GET_PROFILE_DATA_FAIL,e.status)}).then(function(e){!function(e,t){console.log(e),console.log(t);var n={};n[t]=e,console.log(n),sessionStorage.setItem("evolok:ev_profile",JSON.stringify(JSON.stringify(n)))}(e.userProfile,F.serviceName),G.Em.publish(G.Em.Event.GET_PROFILE_DATA_SUCCESS,e)}).catch(function(e){return G.Em.publish(G.Em.Event.GET_PROFILE_DATA_FAIL,e.message)})):G.Em.publish(G.Em.Event.GET_PROFILE_DATA_SUCCESS,"re-render")}},updateAttributes:(t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,r,i,o,a,s,l,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!document.cookie.match(new RegExp("(^| )ev_ss=([^;]+)"))){e.next=4;break}n=document.cookie.match(new RegExp("(^| )ev_ss=([^;]+)"))[2],e.next=6;break;case 4:return console.warn("Evolok Session not found, impossible to update user attributes"),e.abrupt("return");case 6:return r="Evolok evolok.api.service=".concat(F.profileServiceName," evolok.api.sessionId=").concat(n),e.next=9,fetch("https://".concat(F.domainName,"/ic/api/session/").concat(n),{method:"GET",headers:{"Content-Type":"application/json",Authorization:r}});case 9:return i=e.sent,e.next=12,i.text().then(function(e){return(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("guid")[0].innerHTML});case 12:for(i=e.sent,o={attributes:[]},a=0,s=Object.entries(t);a<s.length;a++)c=_slicedToArray(s[a],2),l=c[0],c=c[1],c={name:l,value:c},o.attributes.push(c);fetch("https://".concat(F.domainName,"/ic/api/userProfile/").concat(i,"/").concat(F.profileServiceName),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:r},body:JSON.stringify(o)}).then(function(e){200===e.status?G.Em.publish(G.Em.Event.UPDATE_PROFILE_SUCCESS,e.status):G.Em.publish(G.Em.Event.UPDATE_PROFILE_FAIL,e.status)}).catch(function(e){return G.Em.publish(G.Em.Event.UPDATE_PROFILE_FAIL,e.message)});case 16:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),authorize:function(e,t,n){G.Em.assert(e,"Parameters should not be empty!"),G.Em.assert(t,"Success callback should not be empty!"),G.Em.assert(n,"Error callback should not be empty!");var r=e?JSON.parse(e):{};Object.keys(r).forEach(function(e){r[e]=""+r[e]}),!r.hasOwnProperty("referer")&&document.referrer&&(r.referer=document.referrer),!r.hasOwnProperty("title")&&document.title&&(r.title=document.title),!r.hasOwnProperty("article_url")&&window.location.href&&(r.article_url=window.location.href),G.Em.publish(G.Em.Event.ARTICLE_DATA,{articleUrl:r[this.articleUrlKey],articleId:r[this.articleIdKey]}),F.brand?r.brand=F.brand:e.site&&(r.brand=e.site);var i=new URLSearchParams(window.location.search);if(i.has(this.qrCodeQueryParam)&&(e=(e=i.get(this.qrCodeQueryParam)).split(" ").join("+"),r[this.qrCodeQueryParam]=e),i.has(this.shareArticleTokenQueryParam)&&(l=(l=i.get(this.shareArticleTokenQueryParam)).split(" ").join("+"),r[this.shareArticleTokenQueryParam]=l),F.authorizeParams){var o,a=_createForOfIteratorHelper(F.authorizeParams);try{for(a.s();!(o=a.n()).done;){var s=o.value;i.has(s)&&(r[s]=i.get(s))}}catch(e){a.e(e)}finally{a.f()}}r.ev_sid="",r.ev_did="",r.ev_ss="",!F.disableCookies&&v("ev_sid")?(r.ev_sid=j("ev_sid"),b("ev_sid",j("ev_sid"),0,"localStorage")):!F.disableCookies&&g("ev_sid")&&(F.meterHD?!0===F.meterHD&&(f("ev_sid",q("ev_sid","localStorage")),r.ev_sid=q("ev_sid","localStorage"),F.meterHD):f("ev_sid",q("ev_sid","localStorage"))),!F.disableCookies&&v("ev_did")?(r.ev_did=j("ev_did"),b("ev_did",j("ev_did"),0,"localStorage")):!F.disableCookies&&g("ev_did")&&(F.meterHD?!0===F.meterHD&&(f("ev_did",q("ev_did","localStorage")),r.ev_did=q("ev_did","localStorage")):f("ev_did",q("ev_did","localStorage"))),""!==j("ev_ss")&&(r.ev_ss=j("ev_ss"));var l=_("/authorize/json",null),c=new XMLHttpRequest;c.open("POST",l,!0),c.setRequestHeader("Content-Type","application/json;charset=UTF-8"),c.withCredentials=!0,c.onload=function(){var e;200<=c.status&&c.status<400?(e={},200!==c.status||c.responseText?e=JSON.parse(c.responseText):e.result="ALLOW_ACCESS",m.resolve(e),p.authorizeData=e,console.log(e),e.sessionKeys?(e.sessionKeys.ev_sid&&(u=e.sessionKeys.ev_sid,h()),e.sessionKeys.ev_did&&(d=e.sessionKeys.ev_did,e.deviceId=e.sessionKeys.ev_did,h())):e.deviceId=j("ev_did"),G.Em.articleSharingHandler(e),G.Em.paywallAndNotifierEvents(e),"REQUIRE_LOGIN"===e.result&&G.Event&&(""!==j("ev_ss")&&G.Event.publish("session.cleanup","Session has expired"),G.Event.publish("login.required","Login is required")),"ALLOW_ACCESS"!=e.result&&G.Em.hideMeteredContent(),G.Em.GTMDataLayerEnabled&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push({evAuthResponse:e})),!e.loggedOut&&void 0!==e.loggedOut||G.Em.publish(G.Em.Event.PROFILE_ACCESS_RENDER_STATUS,"LoggedOut"),e.loggedOut||void 0===e.loggedOut||G.Em.publish(G.Em.Event.PROFILE_ACCESS_RENDER_STATUS,"LoggedIn"),t(e)):(n&&n(c.status,c.responseText),G.Em.publish(G.Em.Event.PROFILE_ACCESS_RENDER_STATUS,"LoggedOut"))},c.onerror=function(e){e?n(e):n(0,"unknown connection error")},c.send(JSON.stringify(r))},initDwellTimeRequests:function(t){var n=window.setInterval(function(){var e;document.hidden||(e=30*i+30,t.dwellTimeInterval=e,G.Em.paywallAndNotifierEvents(t),i++),i==s&&clearInterval(n)},3e4)},articleSharingHandler:function(e){var t,n=null!=e.articleSharingEnabled&&!0===e.articleSharingEnabled,r=_createForOfIteratorHelper(document.querySelectorAll("ev-share-article-btn"));try{for(r.s();!(t=r.n()).done;)t.value.style.display=n?"block":"none"}catch(e){r.e(e)}finally{r.f()}},paywallAndNotifierEvents:function(e){function t(e){G.Em.publish(G.Em.Event.AD_AUTHORIZE,e)}"ALLOW_ACCESS"!==e.result||e.articleSharingEvent||n||G.Em.publish(G.Em.Event.DWELLTIME_CHECK,{}),t(e),window.addEventListener("ev.widgets.paywall.load",function(){t(e)}),window.addEventListener("ev.widgets.notifier.load",function(){t(e)})},pretty_print:function(e){return"<pre>"+JSON.stringify(e,null,3).replace(/&/g,"&amp;").replace(/\\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/^( *)("[\w]+": )?("[^"]*"|[\w.+-]*)?([,[{])?$/gm,G.Em.replacer)+"</pre>"},replacer:function(e,t,n,r,i){t=t||"";return n&&(t=t+"<span class=json-key>"+n.replace(/[": ]/g,"")+"</span>: "),(t=r?t+('"'==r[0]?"<span class=json-string>":"<span class=json-value>")+r+"</span>":t)+(i||"")},segment:function(t,n,r){G.Em.assert(t,"Parameters should not be empty!"),G.Em.assert(n,"Success callback should not be empty!"),G.Em.assert(r,"Error callback should not be empty!");var t=_("/segment",function(e){var t,n="";for(t in e=JSON.parse(e))""!==n&&(n+="&"),n+=t+"="+encodeURIComponent(e[t]);return n}(t)),i=new XMLHttpRequest;i.open("GET",t,!0),i.withCredentials=!0,i.onload=function(){var e;200<=i.status&&i.status<400?(e=JSON.parse(i.responseText),a.resolve(e),n(e)):r&&r(i.status,i.responseText)},i.onerror=function(){e?r(e):r(0,"unknown connection error")},i.send()},assert:function(e,t){if(!e){if(t=t||"Assertion failed","undefined"!=typeof Error)throw new Error(t);throw t}},getUrl:function(){return F.url},showMeteredContent:function(){var e=document.getElementsByClassName("ev-meter-content");[].forEach.call(e,function(e){e.style.display="block"})},hideMeteredContent:function(){var e=document.getElementsByClassName("ev-meter-content");[].forEach.call(e,function(e){e.style.display="none"})}},setTimeout(function(){h()},4e3);var E=";SameSite=None; Secure";function f(e,t,n){if(!F.sidCookieDomain)throw new Error("Please specify sidCookieDomain in the config!",!0);var r=new Date;n=1460,r.setDate(r.getDate()+n),(o=y())&&o<13?(document.cookie=e+"="+escape(t)+";time="+new Date+";expires="+r.toUTCString()+";path=/; domain="+F.sidCookieDomain+"; Secure",console.log(e+"="+escape(t)+";time="+new Date+";expires="+r.toUTCString()+";path=/; domain="+F.sidCookieDomain+"; Secure")):(document.cookie=e+"="+escape(t)+";time="+new Date+";expires="+r.toUTCString()+";path=/; domain="+F.sidCookieDomain+E,console.log(e+"="+escape(t)+";time="+new Date+";expires="+r.toUTCString()+";path=/; domain="+F.sidCookieDomain+E))}function v(e){return""!==j(e)&&"undefined"!==j(e)&&j(e)}function g(e){return""!==q(e,"localStorage")&&"undefined"!==q(e,"localStorage")&&q(e,"localStorage")}function y(){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return null!=e&&(e=[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)],parseFloat(e.join(".")))}function q(e,t){var n=document.cookie.indexOf(e+"=");if("localStorage"==t){if("undefined"==typeof localStorage)return 0<document.cookie.length&&-1!==n?getCookieSubstring(n,e):"";try{return localStorage.getItem(e)}catch(e){return console.warn("Could not retrieve the cookie in local storage - maybe the browser's running on an environment with restricted access to localStorage?"),"undefined"}}if("sessionStorage"==t){if("undefined"==typeof sessionStorage)return n=document.cookie.indexOf(e+"="),0<document.cookie.length&&-1!==n?getCookieSubstring(n,e):"";console.log(sessionStorage.getItem(e));try{return sessionStorage.getItem(e)}catch(e){return console.warn("Could not retrieve the cookie in session storage - maybe the browser's running on an environment with restricted access to sessionStorage?"),"undefined"}}}function b(e,t,n,r){var i=new Date;if("localStorage"==r)if(i.setDate(i.getDate()+n),"undefined"!=typeof localStorage)try{localStorage.setItem(e,t)}catch(e){console.warn("Could not store the cookie in local storage - maybe the browser's running on an environment with restricted access to localStorage?")}else o=y(),document.cookie=o&&o<13?e+"="+escape(t)+(null===n?"":";time="+new Date+";expires="+i.toUTCString())+"; Secure":e+"="+escape(t)+(null===n?"":";time="+new Date+";expires="+i.toUTCString())+E;if("sessionStorage"==r)if(i.setDate(i.getDate()+n),"undefined"!=typeof sessionStorage)try{sessionStorage.setItem(e,t)}catch(e){console.warn("Could not store the cookie in session storage - maybe the browser's running on an environment with restricted access to sessionStorage?")}else o=y(),document.cookie=o&&o<13?e+"="+escape(t)+(null===n?"":";time="+new Date+";expires="+i.toUTCString())+"; Secure":e+"="+escape(t)+(null===n?"":";time="+new Date+";expires="+i.toUTCString())+E}function S(e){document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}function _(e,t){!function(){if(!F)throw"Evolok Metering library is not initialised!"}();var n=F.url;if(!n)throw new Error("Evolok Metering host url is not configured!");return"/"===n.charAt(n.length-1)&&"/"===e.charAt(0)?n+=e.substring(1,e.length):n+=e,n=t?n+"?"+t:n}function w(){var n=this;this.promise=new Promise(function(e,t){n.reject=t,n.resolve=e})}window.customElements.define("ev-engagement",function(){_inherits(n,_wrapNativeSuper(HTMLElement));var t,e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"registerCloseModal",value:function(){var t=this;"notifier"===this.widgetType?(this.allowBackgroundClickClosing()&&(window.onclick=function(e){"ev-em-modal-backdrop"===e.target.id&&t.closeModal()}),G.Em.on(G.Em.Event.NOTIFIER_CLOSE,this.closeModal.bind(this))):G.Em.on("ev.em.paywall.close",this.closeModal.bind(this))}},{key:"allowBackgroundClickClosing",value:function(){return null==this.getAttribute("modal-backdrop")||"false"!==this.getAttribute("modal-backdrop")}},{key:"getGroupName",value:function(){return this.getAttribute("group-name")}},{key:"closeModal",value:function(){null!=document.querySelector("#engagement-top")&&document.querySelector("#engagement-top").parentElement.remove(),document.body.style.overflow=null}},{key:"setModalContent",value:function(){window.closeModal=this.closeModal;var e=document.createElement("div");document.body.prepend(e),document.body.style.overflow="hidden",e.innerHTML='\n                <div id="engagement-top" class="ev-em-modals ev-em-modal">\n                    <div class="ev-em-modal-dialog ev-em-modal-'.concat(this.widgetResponse.modalSize,'">\n                        <div class="ev-em-modal-content">\n                            <div class="ev widget-container ev-engagement">\n                                <div class="ev-').concat(this.widgetType,'-template">\n                                    ').concat(this.widgetResponse.content,'\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div id="ev-em-modal-backdrop" class="ev-em-modal-backdrop"></div>\n                </div>'),this.renderContent()}},{key:"setInlineContent",value:function(){this.innerHTML='\n                        <div class="ev widget-container ev-engagement">\n                            <div class="ev-'.concat(this.widgetType,'-template">\n                                ').concat(this.widgetResponse.content,"\n                            </div>\n                        </div>"),this.renderContent()}},{key:"renderContent",value:function(){var e;null==G.Widgets||"function"!=typeof G.Widgets.asyncInit||this.isArticleSharingEngagement?this.publishRenderedEvents():(e=this,G.Widgets.asyncInit().then(function(){console.log("EV widgets initialized from ev-em library"),e.publishRenderedEvents()}));for(var t=document.querySelectorAll("script[data-ev-engagement]"),n=0;n<t.length;n++){var r=t[n],i=document.createElement("script");i.innerHTML=r.text,document.body.appendChild(i)}}},{key:"publishRenderedEvents",value:function(){var e={ev_sid:this.ev_sid,template:this.widgetResponse},t="notifier"===this.widgetType?G.Em.Event.NOTIFIER_MODAL_RENDERED:G.Em.Event.PAYWALL_MODAL_RENDERED;G.Em.publish(t,e)}},{key:"connectedCallback",value:function(){var e=this.getAttribute("article-sharing");this.isArticleSharingEngagement=null!=e&&"true"===e;r?this.internalWidgetDisplay(r):G.Em.on(G.Em.Event.AD_AUTHORIZE,this.internalWidgetDisplay.bind(this)),this.isArticleSharingEngagement?G.Em.on(G.Em.Event.CLOSE_ARTICLE_SHARING_MODAL,this.closeModal.bind(this)):G.Em.enableDwellTime&&G.Em.on(G.Em.Event.DWELLTIME_CHECK,this.dwellTimeCheckEvents.bind(this))}},{key:"internalWidgetDisplay",value:(t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,r,i,o,a,s,l,c,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(G.Em.enableDwellTime&&this.blockDwellTimeRequests)return e.abrupt("return");e.next=2;break;case 2:if(n=t.detail,this.isArticleSharingEngagement&&!n.articleSharingEvent||!this.isArticleSharingEngagement&&n.articleSharingEvent)return e.abrupt("return");e.next=5;break;case 5:if(n.articleUrl&&(this.articleUrl=n.articleUrl,this.articleId=n.articleId),this.ev_sid=n.sessionId||n.restoredSessionId,r=n.deviceId||j("ev_did")||q("ev_did","localStorage"),i=n.hasOwnProperty("loggedOut")&&!1===n.loggedOut,o=n.hasOwnProperty("abGroup")?n.abGroup.name:null,a=n.hasOwnProperty("abGroup")?n.abGroup.value:null,s=(s=this.getMeter(n))||{count:null,max:null},!this.isArticleSharingEngagement||null==this.widgetResponse){e.next=17;break}l=this.widgetResponse,e.next=29;break;case 17:if("ALLOW_ACCESS"===n.result)return c=n.dwellTimeInterval,e.next=21,this.getNotifierWidget(s,n.segments||[],r,c,i,o,a);e.next=24;break;case 21:l=e.sent,e.next=29;break;case 24:return this.blockDwellTimeRequests=!0,u=n.requireEntitlement?"REQUIRE_LOGIN_WITH_ENTITLEMENT":"REQUIRE_LOGIN"===n.result?"REQUIRE_LOGIN":"REQUIRE_ENTITLEMENT",e.next=28,this.getPaywallWidget(s,u,n.segments||[],r,i,o,a);case 28:l=e.sent;case 29:l&&(this.widgetResponse=l,u="notifier"===this.widgetType?G.Em.Event.NOTIFIER_MODAL_RENDERED:G.Em.Event.PAYWALL_MODAL_RENDERED,G.Em.on(u,this.initLinkTracking.bind(this)),l.autoRender&&this.displayEngagement());case 30:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"getMeter",value:function(e){return e.activeMeter||e.exceededMeter||e.offeredMeter}},{key:"displayEngagement",value:function(){var e;this.notifierDisplayed&&!this.isArticleSharingEngagement||(this.trackDwellTime||(this.notifierDisplayed=!0),null!=this.widgetResponse.dwellTime&&0<this.widgetResponse.dwellTime&&this.closeModal(),e="notifier"===this.widgetType?G.Em.Event.NOTIFIER_OPENED:G.Em.Event.PAYWALL_OPENED,G.Em.publish(e,this.widgetResponse),G.Em.publish("ev.em.open.modal.".concat(this.widgetType,".").concat(this.widgetResponse.displayOn)),this.widgetResponse.modal?(this.setModalContent(),this.registerCloseModal()):this.setInlineContent(),G.Em.publish(G.Em.Event.ARTICLE_URL,{articleUrl:this.articleUrl,articleId:this.articleId}),G.Em.publish(G.Em.Event.OPEN_PRODUCT_SELECTION,this))}},{key:"getPaywallWidget",value:function(e,t,n,r,i,o,a){var s=this,r="".concat(F.url,"/widgets/templates/paywall?ev_sid=").concat(this.ev_sid,"&ev_did=").concat(r),a={count:e.count,total:e.max,displayOn:t,segments:n,groupName:this.getGroupName(),loggedIn:i,brand:G.Em.brand,abGroupName:o,abGroupValue:a};return this.post(r,a).then(function(e){return e&&(s.widgetType="paywall",s.handleManualRenderEvents(e,"paywall")),e})}},{key:"getNotifierWidget",value:function(e,t,n,r,i,o,a){var s=this,n="".concat(F.url,"/widgets/templates/notifier?ev_sid=").concat(this.ev_sid,"&ev_did=").concat(n),a={count:e.count,total:e.max,segments:t,dwellTime:r,groupName:this.getGroupName(),loggedIn:i,brand:G.Em.brand,abGroupName:o,abGroupValue:a};return e.hasOwnProperty("viewed")&&(a.viewed=e.viewed),this.post(n,a).then(function(e){return e&&(s.widgetType="notifier",s.handleManualRenderEvents(e,"notifier")),e})}},{key:"post",value:function(e,t){return fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return 200===e.status?e.json():null})}},{key:"handleManualRenderEvents",value:function(e,t){var n;e.hasOwnProperty("autoRender")&&!1===e.autoRender&&(n="notifier"===t?G.Em.Event.NOTIFIER_SHOW_CTA:G.Em.Event.PAYWALL_SHOW_CTA,G.Em.on(n,this.displayEngagement.bind(this)));t="notifier"===t?G.Em.Event.NOTIFIER_RENDER_READY:G.Em.Event.PAYWALL_RENDER_READY;G.Em.publish(t,e)}},{key:"initLinkTracking",value:function(e){var t,n=e.detail,r=_createForOfIteratorHelper(document.querySelector(".ev-engagement").querySelectorAll("a[href]"));try{for(r.s();!(t=r.n()).done;){var i=t.value;i.dataset.widgetuid=n.template.uid,i.dataset.sessionid=n.ev_sid,i.addEventListener("click",this.trackLink.bind(this))}}catch(e){r.e(e)}finally{r.f()}}},{key:"trackLink",value:function(e){e.preventDefault();var t=e.target,n=(t="a"!==t.tagName.toLowerCase()?t.closest("a"):t).innerText,r=t.href,e=t.dataset.widgetuid,t=t.dataset.sessionid;this.storeLinkTracking(t,e,n,r).then(function(e){window.location=r}).catch(function(e){console.log(e),window.location=r})}},{key:"storeLinkTracking",value:function(e,t,n,r){e="".concat(F.url,"/widgets/templates/linkTracking?ev_sid=").concat(e);return this.post(e,{templateUid:t,linkName:n,linkValue:r})}},{key:"dwellTimeCheckEvents",value:function(){var t=this,n={dwellTimeTrackingEnabled:!1};this.checkDwellTimeWidgetsActive().then(function(e){e?(t.trackDwellTime=!0,n.dwellTimeTrackingEnabled=!0,n.maxDwellTimeRequests=e.maxDwellTimeRequests||3):console.warn("No dwell time widgets found"),G.Em.publish(G.Em.Event.DWELLTIME_WIDGETS_ENABLED,n)}).catch(function(e){console.error("Error checking dwell time widgets:",e)})}},{key:"checkDwellTimeWidgetsActive",value:function(){var e="".concat(F.url,"/widgets/templates/dwellTime?groupName=").concat(this.getGroupName());return fetch(e,{headers:{"Content-Type":"application/json"}}).then(function(e){return 200===e.status?e.json():null})}}]),n}()),window.customElements.define("ev-content-recommendations",function(){_inherits(n,_wrapNativeSuper(HTMLElement));var e,t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"connectedCallback",value:(e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=null!=this.getAttribute("all-brands")&&"true"===this.getAttribute("all-brands"),n=this.getAttribute("query-params"),r=j("ev_sid")||q("ev_sid","localStorage"),r="".concat(F.url,"/content/recommendations?ev_sid=").concat(r),!t&&G.Em.brand&&(r+="&brand=".concat(G.Em.brand)),F.recency&&(r+="&recency=".concat(F.recency)),F.section&&(r+="&section=".concat(F.section)),e.next=9,fetch(r).then(function(e){return 200===e.status?e.json():null});case 9:r=e.sent,i="",r.recommendations.forEach(function(e){n&&(e.contentUrl=(e.contentUrl.includes("?")?"".concat(e.contentUrl,"&"):"".concat(e.contentUrl,"?")).concat(n)),i+='\n                <article class="ev-content-item">\n                    <div class="ev-content-item-thumbnail">\n                        '.concat(e.thumbnailUrl?'\n                            <img src="'.concat(e.thumbnailUrl,'" width="120" height="67">                           \n                        '):"",'\n                    </div>\n                    <div class="ev-content-item-title">\n                        <a href="').concat(e.contentUrl,'">').concat(e.title,'</a>\n                    </div>\n\x3c!--                    <div class="ev-em-product-selection">This is aa sen</div>--\x3e\n                   \n                </article>\n            ')}),this.innerHTML='\n                <div class="ev-content-recommendations">\n                    '.concat(i,"\n                </div>");case 13:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})}]),n}()),window.customElements.define("ev-em-profile-when",function(){_inherits(t,_wrapNativeSuper(HTMLElement));var e=_createSuper(t);function t(){return _classCallCheck(this,t),e.apply(this,arguments)}return _createClass(t,[{key:"connectedCallback",value:function(){var e=this;for(this.customHtml=this.innerHTML;this.firstChild;)this.removeChild(this.firstChild);G.Em.on(G.Em.Event.PROFILE_ACCESS_RENDER_STATUS,this.initRenderElement.bind(this)),G.Em.on(G.Em.Event.GET_PROFILE_DATA_SUCCESS,function(){e.resetHtml("LoggedIn")}),G.Event&&G.Event.on(G.Event.LOGOUT_ACTION,function(){e.resetHtml("LoggedOut")})}},{key:"resetHtml",value:function(e){this.responseState=e,this.responseState===this.state&&(this.style.display="block"),this.responseState!==this.state&&(this.style.display="none");e=this.customHtml;for(this.tempFullHtmlStr=this.innerHTML;this.firstChild;)this.removeChild(this.firstChild);this.setCustomHtmlVar(),this.tempFullHtmlStr=this.tempFullHtmlStr.replace(e,this.customHtml),this.insertAdjacentHTML("beforeend",this.tempFullHtmlStr)}},{key:"setCustomHtmlVar",value:function(){if(this.userProfileData=sessionStorage.getItem("evolok:ev_profile"),this.userProfileData=JSON.parse(JSON.parse(this.userProfileData)),this.userProfileData){for(var n=this.customHtml,e=[],t=0,r=Object.entries(this.userProfileData);t<r.length;t++)var i=_slicedToArray(r[t],2),i=(i[0],i[1]),e=[].concat(_toConsumableArray(e),_toConsumableArray(i.attributes));(e=e.filter(function(t,e,n){return n.findIndex(function(e){return e.name===t.name})===e})).forEach(function(e){var t="user."+e.name;n.includes(t)&&(t=new RegExp(t,"g"),n=n.replace(t,e.value))}),this.customHtml=n}}},{key:"initRenderElement",value:function(e){this.responseState=e.detail,this.state=this.getAttribute("state"),this.state&&(this.setCustomHtmlVar(),this.mainParent=document.createElement("div"),this.responseState!==this.state&&(this.style.display="none"),this.responseState===this.state&&(this.style.display="block"),this.mainParent.className="container-fluid ev-em-profile-when",(e=document.createElement("div")).className="row",e.insertAdjacentHTML("beforeend",this.customHtml),this.mainParent.appendChild(e),this.appendChild(this.mainParent))}}]),t}()),window.customElements.define("ev-em-product-selection",function(){_inherits(r,_wrapNativeSuper(HTMLElement));var t,e,n=_createSuper(r);function r(){return _classCallCheck(this,r),n.apply(this,arguments)}return _createClass(r,[{key:"connectedCallback",value:(e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.addEventListener("ev.ad.authorize",this.initRendering.bind(this)),G.Em.on(G.Em.Event.OPEN_PRODUCT_SELECTION,this.initRendering.bind(this));case 2:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"initRendering",value:(t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,v,g,r,i,o,y,b,S,_,a,w,T,O,A,C,I,N,s,l,c,u,d,m,p,L,h,k,E,f,R,P,D,U,x,M,H=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(M=function(){return(M=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=l+"/countries",e.next=3,fetch(t).then(function(e){return 200===e.status?e.json():null}).then(function(e){return console.log("getCountries:",e),e});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)},x=function(){return M.apply(this,arguments)},U=function(){return(U=_asyncToGenerator(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=l+"/region/",r+=t?"?countryId="+t:"?countryName="+n,e.next=4,fetch(r).then(function(e){return 200===e.status?e.json():null}).then(function(e){return console.log("getRegion:",e),m=e});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)},D=function(e,t){return U.apply(this,arguments)},P=function(){if(a)return x().then(function(e){e.find(function(e){return u&&u.country?e.id===u.country?e.name:void 0:e.name===d})&&D()})},R=function(e,t,n,r){e=r?Number(Number(e)+Number(r)).toFixed(2):e;var i=0,o=0;if(t&&0!==t.value)switch(t.type){case"PERCENTAGE":i=Number(Number(e)*Number(t.value)/100).toFixed(2);break;case"AMOUNT":i=Number(t.value).toFixed(2);break;default:throw"Discount type '"+t.type+"' is unknown!"}var a=Number(e)-Number(i);if(n&&0!==n.value)switch(n.type){case"PERCENTAGE":o=Number(Number(a)*Number(n.value)/100).toFixed(2);break;case"AMOUNT":o=Number(n.value).toFixed(2);break;default:throw"Tax type '"+n.type+"' is unknown!"}r=Number(a)+Number(o);return r<0?0:r},f=function(e,t){return R(e.price,e.discount&&0<e.discount.value&&0===e.discount.period.numberOfDays?e.discount:null,e.tax,t)},E=function(e,t){return!e.discount||e.discount&&0===e.discount.period.numberOfDays?0:R(e.price,e.discount,e.tax,t)},k=function(t){var e,n;return t.regions&&0<t.regions.length&&m?(n=m.deliveryItems.find(function(e){return e.currency.id===t.currency.id}))&&(e=(t.trialPrice?E:f)(t,n.deliveryCost)):e=t.trialPrice||t.finalPrice,e},h=function(e){var t=e.querySelector(".product-footer"),n=document.createElement("div");n.className="row product-footer-spacer";var r=window.getComputedStyle(t),r=parseInt(r.getPropertyValue("padding-bottom").replace("px",""));n.style.minHeight=t.offsetHeight+r+"px",e.insertBefore(n,t)},L=function(e){var t=0,n=document.querySelectorAll(e);if(e.includes("product-wrapper"))for(var r=0;r<n.length;r++)h(n[r]);Array.prototype.map.call(n,function(e){e.clientHeight>t&&(t=e.clientHeight)});for(var i=0;i<n.length;i++)n[i].style.minHeight=t+"px"},i=t.detail,n=i.sessionId||i.restoredSessionId||j("ev_sid")||q("ev_sid","localStorage"),c=F.pmUrl||this.getAttribute("pm-domain"),v=this.getAttribute("subscribe-url-prefix"),g=this.getAttribute("subscribe-btn-text")||"Select",r=this.getAttribute("product-name"),i=this.getAttribute("product-group"),o="true"===this.getAttribute("display-vertical-products"),y="true"===this.getAttribute("display-horizontal-plans"),b="true"===this.getAttribute("show-plan-name"),S="true"===this.getAttribute("hide-plan-description"),_=this.getAttribute("translation-plan-frequency")?JSON.parse(this.getAttribute("translation-plan-frequency").replace(/'/g,'"')):{NONE:"One-off",DAY1:"Daily",WEEK1:"Weekly",MONTH1:"Monthly",MONTH3:"Quarterly",MONTH6:"Biannual",MONTH12:"Yearly",MONTH18:"Sesquiennial"},a="true"===this.getAttribute("show-delivery-country"),w="true"===this.getAttribute("show-boosted-text"),T=this.getAttribute("basic-text")||"Basic Plan",O=this.getAttribute("recommended-text")||"Recommended",A="true"===this.getAttribute("auto-select"),I=this.getAttribute("button-url-prefix")||g,N=this.getAttribute("button-url-value")||"btn-selected",s=parseInt(this.getAttribute("product-limit"))||"All",l=c+"/widget",c||v||r||i){e.next=34;break}throw"Metering Library Error: Trying to use product selection but check that all required attributes are specified: [pm-domain, subscribe-url-prefix, product-name, product-group]";case 34:return c=new URLSearchParams(window.location.search),u=Object.fromEntries(c.entries()),d=u&&u.defaultCountry||this.getAttribute("default-country"),P(),r?p=l+"/product/".concat(r,"?ev_sid=").concat(n):i&&(p=l+"/productgroup/".concat(i,"?ev_sid=").concat(n)),e.next=41,fetch(p).then(function(e){return 200===e.status?e.json():null}).then(function(d){if(console.log("data",d),!d)throw"Metering Library Error: Product/s info is empty";var m=[];d.products?m=d.products:m.push(d),"All"!==s&&s&&m.splice(s);var p=document.createElement("div");p.className="container-fluid ev-em-product-selection";var h=document.createElement("div");h.className="row";var E,f=o?12:12/m.length,t=_createForOfIteratorHelper(m);try{var e=function(){var o=E.value,e=document.createElement("div");e.id="product-"+o.name,e.className="col-lg-"+f+" col-md-"+f+" col-sm-12 col-xs-12 product-item-container";var t=document.createElement("div");t.className="container-fluid product-wrapper";var n=document.createElement("div");n.className="row product-header",w&&o.id===d.recommended?(d.recommended,e.classList.add("recommended-product"),(r=document.createElement("div")).className="col-lg-12 col-md-12 col-sm-12 col-xs-12 product-boosted",r.innerText=O,n.appendChild(r)):w&&((l=document.createElement("div")).className="col-lg-12 col-md-12 col-sm-12 col-xs-12 product-basic",l.innerText=T,n.appendChild(l));var r=document.createElement("div");r.className="col-lg-12 col-md-12 col-sm-12 col-xs-12 product-title",r.innerText=o.displayName,n.appendChild(r),t.appendChild(n);var a=document.createElement("div");a.className="row product-body";var s,i=_createForOfIteratorHelper(o.paymentPlans);try{for(i.s();!(s=i.n()).done;)!function(){var n=s.value,e=y?12/o.paymentPlans.length:12,t=document.createElement("div");t.id="payment-plan-"+o.name+"-"+n.name,t.className="col-lg-"+e+" col-md-"+e+" col-sm-12 col-xs-12 payment-plan-container",A&&o.id===d.recommended?n.id===o.autoSelectPlan&&(C={planName:n.name,productName:o.name},t.classList.add("payment-plan-selected")):A&&!d.recommended&&(C||n.id!==o.autoSelectPlan&&1!==o.paymentPlans.length||(C={planName:n.name,productName:o.name},t.classList.add("payment-plan-selected")));var r=document.createElement("div");r.className="payment-plan-price";e=document.createElement("span");e.className="payment-currency-symbol",e.innerText=n.currency.symbol,r.innerHTML=e.outerHTML+k(n),t.appendChild(r);var i,r=document.createElement("div");r.className="payment-plan-frequency",r.innerText=_[n.frequency.id],t.appendChild(r),b&&((i=document.createElement("div")).className="payment-plan-name",i.innerText=n.displayName,t.appendChild(i)),S||((i=document.createElement("div")).className="payment-plan-description",i.innerText=n.description,t.appendChild(i)),t.addEventListener("click",function(e){C={planName:n.name,productName:o.name};var t=document.querySelector(".payment-plan-selected");t&&t.classList.remove("payment-plan-selected"),e.currentTarget.classList.add("payment-plan-selected")}),a.appendChild(t)}()}catch(e){i.e(e)}finally{i.f()}var l=document.createElement("div");l.className="row product-footer";r=document.createElement("div");r.className="col-lg-12 col-md-12 col-sm-12 col-xs-12";var n=document.createElement("button"),c=m.indexOf(o)+1;n.className="btn btn-default product-select-btn",n.innerText=g;var u=(v.includes("?")?"&":"?").concat(I,"=").concat(N).concat(c);n.addEventListener("click",function(){console.log("The select button ".concat(g," with index ").concat(c," was clicked!")),C&&C.productName===o.name?window.location=v+u+"&productName="+o.name+"&paymentPlans="+C.planName:window.location=v+u+"&productName="+o.name}),r.appendChild(n),l.appendChild(r),t.appendChild(a),t.appendChild(l),e.appendChild(t),h.appendChild(e),p.appendChild(h)};for(t.s();!(E=t.n()).done;)e()}catch(e){t.e(e)}finally{t.f()}H.appendChild(p),L(".payment-plan-container"),L(".product-wrapper"),G.Em.publish(G.Em.Event.PRODUCT_SELECTION_LOADED,m)});case 41:e.sent;case 42:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}]),r}()),window.customElements.define("ev-share-article-btn",function(){_inherits(t,_wrapNativeSuper(HTMLElement));var e=_createSuper(t);function t(){return _classCallCheck(this,t),e.apply(this,arguments)}return _createClass(t,[{key:"connectedCallback",value:function(){G.Em.on(G.Em.Event.ARTICLE_DATA,this.storeArticleData.bind(this));var e=this.getAttribute("widget-count");this.widgetCount=null!=e?parseInt(e):1;e=this.getAttribute("share-article-group");this.articleShareGroup=e||"ShareArticle";e=this.getAttribute("share-button-text");this.shareBtnText=e||"Share Article",this.innerHTML='\n                <div>\n                    <button class="share-article-btn">'.concat(this.shareBtnText,'</button>\n                </div>\n                <ev-engagement group-name="').concat(this.articleShareGroup,'" article-sharing="true"></ev-engagement>\n            '),this.style.display="none",this.querySelector(".share-article-btn").addEventListener("click",this.openShareArticleModal.bind(this))}},{key:"storeArticleData",value:function(e){console.log(e.detail),this.articleUrl=e.detail.articleUrl,this.articleId=e.detail.articleId}},{key:"openShareArticleModal",value:function(){console.log("share article button clicked");var e={result:"ALLOW_ACCESS",sessionId:j("ev_sid")||q("ev_sid","localStorage"),activeMeter:{count:this.widgetCount,max:100},articleSharingEvent:!0,articleUrl:this.articleUrl,articleId:this.articleId};G.Em.paywallAndNotifierEvents(e)}}]),t}()),window.customElements.define("ev-share-article",function(){_inherits(t,_wrapNativeSuper(HTMLElement));var e=_createSuper(t);function t(){return _classCallCheck(this,t),e.apply(this,arguments)}return _createClass(t,[{key:"connectedCallback",value:function(){G.Em.on(G.Em.Event.ARTICLE_URL,this.storeArticleUrl.bind(this));var e=this.getAttribute("hide-email-input");this.hideEmailInput=null!=e&&"true"===e;e=this.getAttribute("email-label-text");this.emailLabelText=e||"Recipient Email";e=this.getAttribute("share-button-text");this.shareButtonText=e||"Share",this.innerHTML='\n                <div class="ev-share-article-template">\n                    <div style="display: '.concat(this.hideEmailInput?"none":"block",'">\n                        <label for="articleShareEmail">').concat(this.emailLabelText,'</label>\n                        <input id="ev-article-share-email" type="text">\n                    </div>\n                    \n                    <button class="share-submit-btn">').concat(this.shareButtonText,"</button>\n                    \n                </div>"),this.querySelector(".share-submit-btn").addEventListener("click",this.shareArticle.bind(this))}},{key:"storeArticleUrl",value:function(e){this.articleUrl=e.detail.articleUrl,this.articleId=e.detail.articleId}},{key:"shareArticle",value:function(){var e=document.querySelector("#ev-article-share-email").value;G.Em.shareArticle({articleUrl:this.articleUrl,articleId:this.articleId,email:e})}}]),t}()),G.Em.on(G.Em.Event.AD_AUTHORIZE,function(e){r=e})}(window.EV);
window.__evCurrentExecution={queue:[],pendingPromise:!1,workingOnPromise:!1,enqueue:function(e){__evCurrentExecution.queue.push({promise:e}),__evCurrentExecution.dequeue()},dequeue:function(){if(__evCurrentExecution.workingOnPromise)return!1;const e=__evCurrentExecution.queue.shift();if(!e)return!1;try{__evCurrentExecution.workingOnPromise=!0,e.promise.then((function(){__evCurrentExecution.workingOnPromise=!1,__evCurrentExecution.dequeue()})).catch((function(){__evCurrentExecution.workingOnPromise=!1,__evCurrentExecution.dequeue()}))}catch(e){__evCurrentExecution.workingOnPromise=!1,__evCurrentExecution.dequeue()}return!0},isRenderEventPublished:!1,isNotifierRenderEventPublished:!1,isSegmentEventPublished:!1,detail:null,notifierDetail:null,isOnAuthEventPublished:!1,params:null,opts:null,response:null,isApp:!1},gg.paywall=function(){const e=gg.accounts.getMultitenantScriptConfig().evolok.api.url+"/acd/api/3.0";gg.accounts.getMultitenantScriptConfig().cookie.domain;var t=function(){var e="evolok:ev_session",t=function(){var e="hello",t=ev.storage.load("local",e);if(ev.utils.isEmpty(t)){return ev.storage.load("session",e)||ev.cookie.get(e)}return t}();for(var n in ev.cookie.remove("ev_ss",null,null),ev.cookie.remove("ex_ss",null,null),ev.storage.remove("session",e),ev.storage.remove("session","evolok:ev_profile"),ev.storage.remove("local",e),ev.storage.remove("local","hello"),t)n&&delete t[n]},n=function(e){gg.paywall.utils.addEventHandlerFromData(e,"click","data-referrer-strategy",(function(e,t){"supplier"===e.getAttribute(t)&&ev.commons.referrer.save()}))},o=function(e){document.addEventListener("paywall.opened",(function(t){var o=t.detail,i=null,r="REQUIRE_LOGIN"!==o.displayOn,a=gg.accounts.getGGSite();n(o.container),gg.paywall.utils.addEventHandlerFromData(o.container,"click","data-paywall",(function(t,n){const o=t.getAttribute(n),i=gg.accounts.getMultitenantScriptConfig().base.url;var r={products:i+_conf.evolok.products.url,link:i+_conf.evolok.linkNif.url,main:i}[o];if("login"!==o){if(r){var a=t.getAttribute("data-paywall-href");if(a&&(r=a),e){if(("undefined"!=typeof __evContext&&-1!==__evContext.token.indexOf("anonimo")||"undefined"==typeof __evContext&&!gg.accounts.isEvolokCookiePresent())&&("products"===o||"link"===o)&&!0===gg.accounts.fwdToAppLogin())return;if("products"===o&&("undefined"==typeof __evContext||!1!==__evContext.isNativePurchaseEnabled)&&!0===gg.accounts.fwdToAppPaywall())return;if("main"===o&&!0===gg.accounts.fwdToNativeApp())return}ev.utils.redirect(r,"main"===o)}}else gg.accounts.reloadToEvLogin({ignoreSource:!0})})),i=o.isCustom?a+"-sw-consent":params&&"yes"===params.accessType?r?"pw-freemium":a+"-sw-freemium":r?"pw-metered":a+"-sw-metered",ev.gtm.source.save(i,{cookieEnabled:!0}),ev.gtm.pageview.conf("lightbox",r?"paywall":"signup-login");var s=ev.gtm.pageview.trigger("welcome",o.widgetName?o.widgetName:"");"undefined"!=typeof fbq&&fbq("trackCustom","VirtualPageView",{url:s})}))},i={notifier:function(e){e.closest("div[class*='ev-open-modal-notifier-']").remove();var t=ev.utils.find(document,"body");["ev-modals-notifier","modal-open-notifier"].forEach((function(e){t.removeClass(e)}))}},r=function(e){const t="consent",o={};o[t]=[];var r=function(e,n){o[t].includes(e)||(window.didomiEventListeners.push({event:e,listener:function(e){n(e)}}),o[t].push(e))};document.addEventListener("notifier.opened",(function(t){var o=t.detail,a="-";gg.accounts.getGGSite();n(o.container),gg.paywall.utils.addEventHandlerFromData(o.container,"click","data-paywall-notifier",(function(t,n){const o=t.getAttribute(n),a=gg.accounts.getMultitenantScriptConfig().base.url;var s={products:a+_conf.evolok.products.url,link:a+_conf.evolok.linkNif.url,main:a,custom:a}[o];if("login"!==o){if(s){var l=t.getAttribute("data-paywall-href");if(l&&(s=l),e){if(("undefined"!=typeof __evContext&&-1!==__evContext.token.indexOf("anonimo")||"undefined"==typeof __evContext&&!gg.accounts.isEvolokCookiePresent())&&("products"===o||"link"===o)&&!0===gg.accounts.fwdToAppLogin())return;if("products"===o&&("undefined"==typeof __evContext||!1!==__evContext.isNativePurchaseEnabled)&&!0===gg.accounts.fwdToAppPaywall())return;if(("main"===o||"custom"===o&&!l)&&!0===gg.accounts.fwdToNativeApp())return}ev.utils.redirect(s,"main"===o)}if("consent-agreetoall"===o){if(!0===ev.app.fwdToConsentAgreeToAll())return;window.didomiOnReady=window.didomiOnReady||[],window.didomiOnReady.push((function(e){e.setUserAgreeToAll()})),"function"==typeof gg.didomi.sendEventToAnalytics&&gg.didomi.sendEventToAnalytics(gg.didomi.getConsentAction().AGREE_TO_ALL)}if("consent-reject"===o&&"function"==typeof gg.didomi.sendEventToAnalytics&&gg.didomi.sendEventToAnalytics(gg.didomi.getConsentAction().REJECT),"consent-showpreferences"===o){if(!0===ev.app.fwdToConsentShowPreferences())return;window.didomiOnReady=window.didomiOnReady||[],window.didomiOnReady.push((function(e){e.preferences.show()})),"function"==typeof gg.didomi.sendEventToAnalytics&&gg.didomi.sendEventToAnalytics(gg.didomi.getConsentAction().PURPOSES)}if("consent-showvendors"===o){if(!0===ev.app.fwdToConsentShowVendors())return;window.didomiOnReady=window.didomiOnReady||[],window.didomiOnReady.push((function(e){e.preferences.show("vendors")}))}"consent-showpreferences"!==o&&"consent-showvendors"!==o||(r("preferences.clickclose",(function(e){gg.paywall.utils.isSubscriptionRequiredByCMP()||i.notifier(t)})),r("preferences.clicksavechoices",(function(e){gg.paywall.utils.isSubscriptionRequiredByCMP()||i.notifier(t),"function"==typeof gg.didomi.sendEventToAnalytics&&gg.didomi.sendEventToAnalytics(gg.didomi.getConsentAction().SAVE)}))),"close"!==o&&"consent-agreetoall"!==o&&"consent-reject"!==o||i.notifier(t)}else gg.accounts.reloadToEvLogin({ignoreSource:!0})}));const s=[{types:["homepage"],screen:"homepage"},{types:["section-page","section-page-opinion"],screen:"section-page"},{types:["story-reportage","story-video","la-contra","lacontra","story","opinion","topics"],screen:params.articleId||"-"}];params=params||{};for(var l=0;l<s.length;l++){const e=s[l];if(e.types.includes(params.webtype||"")){a=e.screen;break}}ev.gtm.source.save(params.webtype||""),ev.gtm.pageview.conf("lightbox","notifier"),ev.gtm.pageview.trigger(a,o.widgetName?o.widgetName:""),"string"==typeof o.widgetName&&-1!==o.widgetName.indexOf("consent")&&"function"==typeof gg.didomi.sendEventToAnalytics&&gg.didomi.sendEventToAnalytics(gg.didomi.getConsentAction().VIEW)}))},a=function(e,t){t=t||{};e&&(t.hasOwnProperty("type")&&"notifier"===t.type?function(e,t){if(e.content){var n=`\n                <div class="modal show fade ev ev-open-modal-notifier-${e.displayOn} in" id="${e.widgetName}">\n                    <div class="modal-dialog modal-${e.modalSize}">\n                        <div class="modal-content">\n                            <div class="ev widget-container">\n                                ${e.content}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            `;if(!e.hasOwnProperty("modal")||!0===e.modal||"undefined"==typeof __evContext){var o=ev.utils.find(document,"body");["ev-modals-notifier","modal-open-notifier"].forEach((function(e){o.addClass(e)})),o.append(n),e.container=o.getFirst()}t.ignoreOnNotifierOpened||document.dispatchEvent(new CustomEvent("notifier.opened",{detail:e}))}}(e,t):function(e,t){if(t=t||{},e){var n=`\n\t\t\t\t<div class="modal show fade ev ev-open-modal-paywall-${e.displayOn} in">\n\t\t\t\t\t<div class="modal-dialog modal-${e.modalSize}">\n\t\t\t\t\t\t<div class="modal-content">\n\t\t\t\t\t\t\t<div class="ev widget-container">\n\t\t\t\t\t\t\t\t${e.content}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;if(e.hasOwnProperty("modal")&&!0!==e.modal&&"undefined"!=typeof __evContext){if(!e.articleContainer){var o=ev.utils.find(document,".main-article-container > .generated.in-view").getFirst();e.articleContainer=o||ev.utils.find(document,".main-article-container > .article-default").getFirst()}if(e.container=e.articleContainer,ev.utils.find(e.container,".modal.ev").getFirst())t.ignoreOnPaywallOpened=!0;else{var i=null;try{var r=(new DOMParser).parseFromString(n,"text/html"),a=ev.utils.find(r,"div.evl-paywall__container").getFirst();i=a.getAttribute("data-blurparagraph")}catch(e){}if(null!=i){var s=!1,c=0;ev.utils.find(e.container,".article-modules >*").asArray().forEach((function(e){s?e.style.display="none":"paragraph"==e.className&&++c==i&&(e.className+=" evl-payw-content",s=!0)}))}else ev.utils.find(e.container,".article-modules >*:not(.trinityAudioPlaceholder)").first().addClass("evl-payw-content"),ev.utils.find(e.container,".article-modules >*:not(.trinityAudioPlaceholder):not(.evl-payw-content)").hide();ev.utils.find(e.container,".article-modules").append(n)}}else{var u=ev.utils.find(document,"body");["ev-modals","modal-open"].forEach((function(e){u.addClass(e)})),u.append(n),e.container=u.getFirst()}t.ignoreOnPaywallOpened||document.dispatchEvent(new CustomEvent("paywall.opened",{detail:e})),__evCurrentExecution.opts.notifier.enabled&&l(__evCurrentExecution.response,__evCurrentExecution.isApp)}}(e,t))},s=function(e){if("undefined"!=typeof __evContext&&!__evContext.isApp&&((__evContext.dab||{}).active&&e&&"1"!==ev.cookie.get("_pac")))return y(),!0;return!1},l=function(e,t){if(!0!==__evCurrentExecution.opts.notifier.sectionExempted){var n=e.segments||[],o=e.sessionId||e.restoredSessionId,i=e.deviceId||ev.cookie.get("ev_did"),r=gg.accounts.getMultitenantScriptConfig().engagementGroup||"Default",s=0,l=0,c=!1,u=e.hasOwnProperty("loggedOut")&&0==e.loggedOut,d=null;"ALLOW_ACCESS"==e.result?e.hasOwnProperty("activeMeter")&&(d=e.activeMeter):e.hasOwnProperty("exceededMeter")&&(d=e.exceededMeter),d&&d.hasOwnProperty("count")&&(s=d.count),d&&d.hasOwnProperty("max")&&(l=d.max),d&&d.hasOwnProperty("viewed")&&(c=d.viewed),function(e,t,n,o,i,r,s,l){gg.paywall.service.getNotifierTemplate(e,t,n,o,i,r,s,l).then((function(e){var t={type:"notifier"};__evCurrentExecution.notifierDetail=e,e.hasOwnProperty("widgetName")&&ev.utils.find(document,"div#"+e.widgetName).getFirst()||("undefined"!=typeof __evContext&&e.hasOwnProperty("autoRender")&&!1===e.autoRender?(document.addEventListener("ev.notifier.showCTA",(function(e){a(e.detail,t)})),document.dispatchEvent(new CustomEvent("ev.notifier.render.ready",{detail:__evCurrentExecution.notifierDetail})),__evCurrentExecution.isNotifierRenderEventPublished=!0):a(e,t))}))}(o,i,r,s,l,c,n,u)}},c=function(e){e=e||[],document.dispatchEvent(new CustomEvent("ev.user.segments.ready",{detail:e})),__evCurrentExecution.isSegmentEventPublished=!0},u=function(e,t){var n=e.segments||[];if(function(e){try{const o="undefined"!=typeof __evContext&&__evContext.segmentCDPattern?__evContext.segmentCDPattern:"^cds";var t=e.filter((function(e){return e.toLowerCase().match(o)}));t.length>0&&dataLayer.push({evolokSegments:t.join(",")}),ev.storage.save("local","evolokSegments",t.join(","));const i="undefined"!=typeof __evContext&&__evContext.segmentCDHPattern?__evContext.segmentCDHPattern:"^cdh";var n=e.filter((function(e){return e.toLowerCase().match(i)}));n.length>0&&dataLayer.push({evolokSegmentsHit:n.join(",")}),gg.accounts.didomiLogged()&&ev.gtm.push("evolok","segments",e.join(","),!1)}catch(e){console.log("Error: Could not process user segments."+(e.message?" Reason: "+e.message:""))}c(e)}(n),"ALLOW_ACCESS"!==e.result){"undefined"!=typeof __evContext&&__evContext.consent&&__evContext.consent.notifierRequired&&(!gg.paywall.utils.isSubscriptionRequiredByCMP()||__evCurrentExecution.opts.notifier.enabled&&"ALLOW_ACCESS"===e.result||l(e,t));var o=e.hasOwnProperty("loggedOut")&&0==e.loggedOut,i=p(e);if(!t||"undefined"!=typeof __evContext&&-1!==__evContext.token.indexOf("anonimo")||"REQUIRE_LOGIN_WITH_ENTITLEMENT"!==i&&"REQUIRE_LOGIN"!==i||!0!==gg.accounts.fwdToAppInvalidSession()){var r=e.sessionId||e.restoredSessionId,s=e.deviceId||ev.cookie.get("ev_did"),u=gg.accounts.getMultitenantScriptConfig().engagementGroup||"Default",d=e.articleContainer;d&&ev.utils.find(d,".modal.ev").getFirst()||"undefined"!=typeof __evContext&&"REQUIRE_LOGIN"!==i&&!0===__evCurrentExecution.opts.paywall.sectionExempted||function(e,t,n,o,i,r,s){gg.paywall.service.getPaywallTemplate(e,t,n,o,i,r).then((function(e){e.articleContainer=s,__evCurrentExecution.detail=e,"undefined"!=typeof __evContext&&e.hasOwnProperty("autoRender")&&!1===e.autoRender?(document.addEventListener("ev.paywall.showCTA",(function(e){a(e.detail)})),document.dispatchEvent(new CustomEvent("ev.paywall.render.ready",{detail:__evCurrentExecution.detail})),__evCurrentExecution.isRenderEventPublished=!0):a(e)}))}(i,n,r,s,u,o,d)}}else __evCurrentExecution.opts.notifier.enabled&&l(e,t)},d=function(e,t){__evCurrentExecution.opts.paywall.enabled?u(e,t):__evCurrentExecution.opts.notifier.enabled&&l(e,t)},g=function(e,t){if(__evCurrentExecution.opts=function(e,t){var n={authorization:{enabled:!0},notifier:{enabled:!1,sectionExempted:!1},paywall:{enabled:!0,sectionExempted:!1}};if(void 0!==e){if(!1===gg.paywall.authorize.isWebtypeAllowed(e,t))return n.authorization.enabled=!1,n;!1===gg.paywall.authorize.isPaywallAllowed(e,t)&&(n.paywall.enabled=!1),!0===gg.paywall.authorize.isSectionExemptedFromPaywall(e,t)&&(n.paywall.sectionExempted=!0),!0===gg.paywall.authorize.isNotifierAllowed(e,t)&&!0===gg.paywall.authorize.isUsertypeNotifierAllowed(e,t)&&(n.notifier.enabled=!0),!0===gg.paywall.authorize.isSectionExemptedFromNotifier(e,t)&&(n.notifier.sectionExempted=!0)}return n}(window.__evContext,e),__evCurrentExecution.params=Object.assign({},e),!1!==__evCurrentExecution.opts.authorization.enabled){var n=function(e){if(__evCurrentExecution.response=e,__evCurrentExecution.isApp=t,__evCurrentExecution.detail=null,__evCurrentExecution.notifierDetail=null,__evCurrentExecution.isSegmentEventPublished=!1,"GaaMetering"in window&&gg.googleShowcase.hasGAAParams())try{gg.googleShowcase.setUserState(e),__evCurrentExecution.googleShowcase.evResponse=e,document.addEventListener("ev.paywall.googleShowcase.showPaywall",(function(e){__evCurrentExecution.isShowcasePaywallEventPublished||(__evCurrentExecution.isShowcasePaywallEventPublished=!0,d(e.detail,t))})),gg.googleShowcase.init()}catch(n){console.log("Google Showcase: init aborted"),d(e,t)}else d(e,t)},o=function(){console.log("** paywall ** Rejected!")},i=function(){if("undefined"!=typeof __evContext){if(s(e.adblock))return;__evCurrentExecution.enqueue(gg.paywall.authorize.init(e,n,o,__evContext.articleContainer).promise)}else EV.Em.authorize(JSON.stringify(e),n,o)};void 0!==e.adblock&&void 0!==e.incognito?i():v((function(t){e.adblock=t.adblock,e.incognito=t.incognito,i()}))}else c()},v=function(e){var t={},n="undefined"!=typeof __evContext&&__evContext.dab?__evContext.dab:{};"undefined"!=typeof __evContext&&n.initialized?EV.Dab.isAdblockDetected().then((function(e){return t.adblock=e,EV.Dab.detectPrivateMode()})).then((function(n){t.incognito=n,e(t)})):setTimeout((function(){t.adblock=!1,t.incognito=!1,e(t)}))},p=function(e){return e.requireEntitlement?"REQUIRE_LOGIN_WITH_ENTITLEMENT":"REQUIRE_LOGIN"==e.result?"REQUIRE_LOGIN":"REQUIRE_ENTITLEMENT"},f=function(e){if("undefined"!=typeof __evContext){var t=__evContext.dab||{};if(t.initialized||__evContext.isApp)return;if(void 0!==e&&void 0!==t.exemptedWebtypes&&t.exemptedWebtypes.includes(e.webtype))return void(t.initialized=!1);t.active&&t.adServiceURL&&(EV.Dab.init({adServiceURL:t.adServiceURL}),t.initialized=!0)}},m=function(e,t){f(e),v((function(n){"undefined"!=typeof __evContext&&!1===gg.paywall.authorize.isWebtypeAllowed(__evContext,e)||s(n.adblock)||t&&"function"==typeof t&&t()}))},y=function(){gg.paywall.service.getDabNotifier().then((function(e){a({displayOn:"ADB_DETECTION",modalSize:"lg",content:e,modal:!0,isCustom:!0},{ignoreOnPaywallOpened:!0})}))},w=function(){try{window.EV=window.EV||{},EV.Event=EV.Event||{on:function(e,t){document.addEventListener(e,t)},publish:function(e,t){document.dispatchEvent(new CustomEvent(e,{detail:t}))}},ev.events()}catch(e){console.error("Error occurred initializing events",e)}};return{init:function(i,a){w(),window.__evAuthConfig={url:e,sidCookieDomain:gg.accounts.getMultitenantScriptConfig().cookie.domain},EV.Em.init(function(e,t,n){try{var o="undefined"==typeof __evContext?{}:__evContext.googleOneTap||{};if(gg.accounts.isLogged()||n||!o.active||!t.webtype||"string"!=typeof t.webtype||!o.webtypesAllowed||!Array.isArray(o.webtypesAllowed)||!o.webtypesAllowed.includes(t.webtype))return e;var i={channel:"WEB",realmName:"default_realm",serviceName:"social",icDomain:ev.accounts.getMultitenantScriptConfig().evolok.api.url.replace(/https:\/\//g,"")+"/ic/api",enableGoogleOneTap:!0,googleClientId:ev.accounts.getMultitenantScriptConfig().social.google.key,socialAttributeMapping:{email_address:"email",first_name:"firstName",last_name_first:"lastName"},autoPopulate:!0,autoLinkLoginRedirectAutomatic:!1,googleGenericConf:{cancel_on_tap_outside:!1}};o.autoLinkLogin&&(i.authSchemeName="default"),EV.Em.on(EV.Em.Event.SOCIAL_LOGIN_SUCCESS,(function(e){const t=(e.detail||{}).response||{},n=void 0!==t.socialAccountCreated&&t.socialAccountCreated,o={isSocial:!0,isRegister:n,isShowcase:!1};ev.gtm.source.save("googleonetap"),ev.gtm.pageview.conf("lightbox","signup-login"),n&&ev.gtm.pageview.trigger("thanks","google"),ev.gtm.pageview.trigger("login-ok","google"),ev.service.loginCompleted(o,null,!1,t).then((function(e){ev.marfeel.registerUserType(),window.location.reload()})).catch((function(e){window.location.reload()}))})),EV.Em.on(EV.Em.Event.SOCIAL_LOGIN_ATTEMPTED_REQUIRES_AUTHENTICATION,(function(e){ev.gtm.source.save("googleonetap"),gg.accounts.reloadToEvLogin({ignoreSource:!0})})),EV.Em.on(EV.Em.Event.SOCIAL_LOGIN_FAILED,(function(e){ev.gtm.source.save("googleonetap"),gg.accounts.reloadToEvLogin({ignoreSource:!0})}));const r=ev.utils.find(document,"body"),a="\n                <style>\n                    #credential_picker_container {\n                        top: 145px!important;\n                    }\n                </style>\n            ";return r.append(a),Object.assign({},e,i)}catch(e){}return e}(window.__evAuthConfig,i,a)),f(i),document.addEventListener("session.cleanup",(function(){gg.accounts.evolokClearCookies(),t(),gg.accounts.refresh()})),o(a),r(a),n(),i&&(!function(e){const t="evolok:thirdPartySegment";try{if("undefined"==typeof __evContext)return!1;const n=__evContext.delegationToThirdParty?Object.assign({},__evContext.delegationToThirdParty):{};if(!n.active||!n.facet||!Array.isArray(n.facet))return!1===n.active&&gg.paywall.utils.isPresentInStorage(t,"local")&&ev.storage.remove("local",t),!1;if(!1===n.ignoreSegmentOnStorage&&gg.paywall.utils.isPresentInStorage(t,"local"))return!1;if(n.facet.includes("web")&&!e||n.facet.includes("app")&&e)return!0}catch(e){}return!1}(a)?g(i,a):(document.addEventListener("ev.paywall.onAuth.trigger",(function(e){g(e.detail,gg.accounts.isApp())})),document.dispatchEvent(new CustomEvent("ev.paywall.onAuth.ready",{detail:i})),__evCurrentExecution.params=Object.assign({},i),__evCurrentExecution.isOnAuthEventPublished=!0))},initNotConsent:function(e){m({},(function(){o(e),gg.paywall.service.getNotConsentTemplate().then((function(e){a({displayOn:"REQUIRE_LOGIN",modalSize:"lg",content:e,modal:!0,isCustom:!0})}))}))},verifyAuthorization:g,triggerDabDetection:m}}(),gg.paywall.utils=function(){var e=function(e){return e&&"string"==typeof e?e.replace(/\#|(<([^>]+)>)/gi,"").replace(/&nbsp;/gi," "):""},t=function(t){return e(t).split("/").filter((e=>e))},n=function(e,t){if(void 0!==window[t+"Storage"])try{return window[t+"Storage"].getItem(e)}catch(e){return console.warn("Could not retrieve the cookie in "+t+" storage - maybe the browser's running on an environment with restricted access?"),""}else o(e)&&ev.cookie.get(e)},o=function(e){return!!ev.cookie.get(e)};return{addEventHandlerFromData:function(e,t,n,o){var i=function(e){return e.length?Array.prototype.slice.call(e):[]}(ev.utils.find(e||document,`[${n}]`).get());i.length&&i.forEach((function(e){e.addEventListener(t,(function(){o(e,n)}))}))},removeHash:e,getSections:t,getCategory:function(e){var n=t(e);if(n.length<2)return"";var o=n.shift();return n.filter((e=>e!==o)).join("/")},getDate:function(e){if(!e)return"";e=e.replace(/-/g,"/");var t=new Date(e),n=-t.getTimezoneOffset(),o=n>=0?"+":"-",i=function(e){var t=Math.floor(Math.abs(e));return(t<10?"0":"")+t};return t.getFullYear()+"-"+i(t.getMonth()+1)+"-"+i(t.getDate())+"T"+i(t.getHours())+":"+i(t.getMinutes())+":"+i(t.getSeconds())+o+i(n/60)+":"+i(n%60)},getAccessType:function(e){return e?"limitado-registro"===e?"yes":"abierto-libre"===e?"no":void 0:"no"},getAuthor:function(t){return e(t).split(/\||\,/gi).map((e=>e.trim())).join(",")},assert:function(e,t){if(!e){if(t=t||"Assertion failed","undefined"!=typeof Error)throw new Error(t);throw t}},storeInStorage:function(e,t,n,o,i){var r=new Date;if(r.setDate(r.getDate()+(n||0)),void 0!==window[o+"Storage"])try{window[o+"Storage"].setItem(e,t)}catch(e){console.warn("Could not store in "+o+" storage - maybe the browser's running on an environment with restricted access?")}else document.cookie=e+"="+encodeURIComponent(t)+";expires="+r.toUTCString()+"; path=/"+(i?";domain="+i:"")},getFromStorage:n,isPresentInStorage:function(e,t){return!!n(e,t)},isCookiePresent:o,getRegisteredValue:function(e){var t=void 0;if(e)try{e=+e;var n=new Date(e),o=new Date;const i=Math.abs(o-n),r=Math.ceil(i/864e5);r<=15?t=0:r&&(t=Math.ceil(r/30))}catch(e){t=0}return t},isSubscriptionRequiredByCMP:function(e){return"function"==typeof gg.didomi.isSubscriptionRequiredByPurposes&&gg.didomi.isSubscriptionRequiredByPurposes(e)||"function"==typeof gg.didomi.isSubscriptionRequiredByVendors&&gg.didomi.isSubscriptionRequiredByVendors(e)}}}(),gg.paywall.service=function(){const e=gg.accounts.getMultitenantScriptConfig().evolok.api.url,t=gg.accounts.getMultitenantScriptConfig().base.url,n=e+"/ic/api",o="registration";var i=function(e,t){var n=gg.util.url(e);if(null!=t)for(var o in t)n.params[o]=t[o];for(var o in n.params)n.params[o]=encodeURIComponent(n.params[o]);return n.toString()};return{getPaywallTemplate:function(e,t,n,o,r,a){var s=EV.Em.getUrl()+"/widgets/templates/paywall",l={displayOn:e,segments:t,groupName:r,loggedIn:a,brand:EV.Em.brand},c={ev_sid:n,ev_did:o};return ev.ajax.post(i(s,c),l,{type:"json"})},getNotConsentTemplate:function(){const e=t+"/suscripciones/signNoConsent";return ev.ajax.get(i(e),{ignoreParsing:!0})},getUser:function(e){var t=n+"/userProfile/"+e.guid,o=e.mainSession.sessionId;return ev.ajax.get(i(t),{headers:{Accept:"application/json",Authorization:"Evolok evolok.api.service=registration evolok.api.sessionId="+o}})},getUserByGuid:function(e,t){var o=n+"/userProfile/"+e;return ev.ajax.get(i(o),{headers:{Accept:"application/json",Authorization:"Evolok evolok.api.service=client_profile evolok.api.sessionId="+t}})},getSession:function(e){var t=n+"/session/"+e;return ev.ajax.get(i(t),{headers:{Accept:"application/json",Authorization:"Evolok evolok.api.service="+o+" evolok.api.sessionId="+e}})},deleteSession:function(e){var t=n+"/session/"+e;return ev.ajax.delete(i(t),{headers:{Accept:"application/json",Authorization:"Evolok evolok.api.service="+o+" evolok.api.sessionId="+e}})},refreshCookies:function(e,n){var o=t+"/perfil/user/ev/check/ev-browser/"+n;return ev.ajax.post(i(o),e,{type:"json",credentials:!0})},refreshAppCookies:function(e,n){var o=t+"/perfil/user/ev/check/ev-app/"+n;return ev.ajax.post(i(o),e,{type:"json",credentials:!0})},refreshAllCookies:function(e){var n=t+"/perfil/user/ev/check/cookies";return ev.ajax.post(i(n),{sessionId:e},{credentials:!0})},refreshAllCookiesWithLegacy:function(e){var n=t+"/perfil/user/ev/check/app";return ev.ajax.post(i(n),{"auth-token":e},{credentials:!0})},touchSession:function(e){var t=n+"/session/"+e+"/touch";return ev.ajax.post(i(t),{},{headers:{Accept:"application/json",Authorization:"Evolok evolok.api.service="+o}})},getExternalIntegrationToken:function(e){var n=t+"/perfil/user/ev/integrations/v1/token";return ev.ajax.post(i(n),e,{type:"json",credentials:!0})},getDabNotifier:function(){const e=t+"/suscripciones/dab-notifier";return ev.ajax.get(i(e),{ignoreParsing:!0})},getNotifierTemplate:function(e,t,n,o,r,a,s,l){var c=EV.Em.getUrl()+"/widgets/templates/notifier",u=(EV.Em.brand,{groupName:n,count:o,total:r,viewed:a,segments:s,loggedIn:l}),d={ev_sid:e,ev_did:t};return ev.ajax.post(i(c,d),u,{type:"json"})}}}(),gg.paywall.authorize=function(){var e=function(e,t){var n=new Date;n.setDate(n.getDate()+1461),ev.cookie.set(e,t,(n.getTime()-(new Date).getTime())/1e3,__evAuthConfig.sidCookieDomain)},t=function(t){var n="";if(gg.paywall.utils.isCookiePresent(t))n=ev.cookie.get(t),gg.paywall.utils.storeInStorage(t,n,0,"local",__evAuthConfig.sidCookieDomain);else if(gg.paywall.utils.isPresentInStorage(t,"local")){var o=gg.paywall.utils.getFromStorage(t,"local");e(t,o),__evAuthConfig.meterHD&&(n=o)}return n};return{init:function(n,o,i,r){gg.paywall.utils.assert(n,"Parameters should not be empty!"),gg.paywall.utils.assert(o,"Success callback should not be empty!"),gg.paywall.utils.assert(i,"Error callback should not be empty!");var a=Object.assign({},n),s="evolok:ev_access_token";if(!n.referrer&&document.referrer&&(a.referrer=document.referrer),!n.title&&document.title&&(a.title=document.title),!n.article_url&&window.location.href&&(a.article_url=window.location.href),(__evAuthConfig.brand||n.site)&&(a.brand=n.site?n.site:__evAuthConfig.brand),n.registered&&(a.registered=n.registered),a.ev_sid=t("ev_sid"),a.ev_did=t("ev_did"),gg.paywall.utils.isCookiePresent("ev_ss")&&(a.ev_ss=ev.cookie.get("ev_ss")),gg.paywall.utils.isPresentInStorage(s,"local"))try{const e=ev.storage.load("local",s);e.expires&&new Date/1e3>e.expires?ev.storage.remove("local",s):a.evAccessToken=e.accessCode}catch(e){}var l=__evAuthConfig.url+"/authorize/json",c=!1,u=function(){c=!0};return{promise:new Promise((function(t,n){var s=new XMLHttpRequest;s.withCredentials=!0,s.open("POST",l,!0),s.setRequestHeader("Content-type","application/json"),s.onload=function(){var a=s.status>=200&&s.status<300,l={};try{l=JSON.parse(s.responseText)}catch(e){}if(r&&(l.articleContainer=r),a){t(l);const n=ev.cookie.get("ev_ss");l.sessionKeys&&(l.sessionKeys.ev_sid&&l.sessionKeys.ev_sid!==ev.cookie.get("ev_sid")&&e("ev_sid",l.sessionKeys.ev_sid),l.sessionKeys.ev_did&&l.sessionKeys.ev_did!==ev.cookie.get("ev_did")&&e("ev_did",l.sessionKeys.ev_did)),l.deviceId=l.sessionKeys?l.sessionKeys.ev_did:ev.cookie.get("ev_did"),EV.Em.paywallAndNotifierEvents(l),"REQUIRE_LOGIN"===l.result&&n&&EV.Event.publish("session.cleanup","Session has expired"),"ALLOW_ACCESS"!==l.result&&EV.Em.hideMeteredContent(),o(l)}else i(l),n(l)},s.onerror=function(e){n(s.response),e?i(e):i(s.response,"unknown connection error")},s.onabort=function(e){n(s.response),e?i(e):i(s.response,"unknown connection error")},s.send(JSON.stringify(a)),u=function(){c||(s.abort(),n())},c&&u()})).then((function(e){return c=!0,e})).catch((function(e){return c=!0,e})),cancel:u}},isWebtypeAllowed:function(e,t){if(t=t||{},!0===(e=e||{}).triggerStop)return!1;if(!t.webtype||"string"!=typeof t.webtype||!e.webtypesAllowed||!Array.isArray(e.webtypesAllowed))return!0;for(i=0;i<e.webtypesAllowed.length;i++)if(e.webtypesAllowed[i]===t.webtype)return!0;return!1},isSectionExemptedFromPaywall:function(e,t){if(e=e||{},"yes"===(t=t||{}).accessType)return!1;if(!t.section||"string"!=typeof t.section||!e.exemptedSections||!Array.isArray(e.exemptedSections))return!1;for(i=0;i<e.exemptedSections.length;i++)if(e.exemptedSections[i]===t.section)return!0;return!1},isSectionExemptedFromNotifier:function(e,t){if(e=e||{},!(t=t||{}).section||"string"!=typeof t.section||!e.exemptedSectionsNotifier||!Array.isArray(e.exemptedSectionsNotifier))return!1;for(i=0;i<e.exemptedSectionsNotifier.length;i++)if(e.exemptedSectionsNotifier[i]===t.section)return!0;return!1},isPaywallAllowed:function(e,t){if(e=e||{},!(t=t||{}).webtype||"string"!=typeof t.webtype||!e.webtypesAllowedPaywall||!Array.isArray(e.webtypesAllowedPaywall))return!0;for(i=0;i<e.webtypesAllowedPaywall.length;i++)if(e.webtypesAllowedPaywall[i]===t.webtype)return!0;return!1},isNotifierAllowed:function(e,t){if(e=e||{},!(t=t||{}).webtype||"string"!=typeof t.webtype||!e.webtypesAllowedNotifier||!Array.isArray(e.webtypesAllowedNotifier))return!1;for(i=0;i<e.webtypesAllowedNotifier.length;i++)if(e.webtypesAllowedNotifier[i]===t.webtype)return!0;return!1},isUsertypeNotifierAllowed:function(e,t){if(t=t||{},!(e=e||{}).usertypeNotifierAllowed||!Array.isArray(e.usertypeNotifierAllowed))return!1;var n=gg.accounts.getUserType();if(!n)return!0;for(i=0;i<e.usertypeNotifierAllowed.length;i++)if(e.usertypeNotifierAllowed[i]===n)return!0;return!1}}}();
gg.EvlAccountsService=function(n){var t=function(t,e){var o=gg.util.url(n.baseUrl+t);if(n.lang&&(o.params.lang=n.lang),null!=e)for(var r in e)o.params[r]=e[r];for(var r in o.params)o.params[r]=encodeURIComponent(o.params[r]);return o.toString()},e=function(n){var t=new gg.AccountsServicePromise;return n(t),t.handler},o=function(n){console.log(n+" is not supported with Evolok impl")};return{requestVerification:function(){return e(function(n){gg.ajax.post(t("/user/ev/request/verification"),{},function(t){n.resolve(t)},{credentials:!0})})},recaptchaVerification:function(n){var o={catpchaResponse:n};return e(function(n){gg.ajax.post(t("/user/ev/verification/recaptcha"),o,function(t){n.resolve(t)},{credentials:!0})})},login:function(){o("login()")},oAuthLogin:function(){o("oAuthLogin()")},getInfo:function(){return e(function(n){gg.ajax.get(t("/user"),function(t){n.resolve(t)},{credentials:!0})})},signup:function(){o("signup()")},update:function(n){return e(function(e){gg.ajax.post(t("/user/ev/update/from-legacy-data"),n,function(n){e.resolve(n)},{credentials:!0,type:"json"})})},logout:function(){o("logout()")},changePassword:function(){o("changePassword()")},resetPassword:function(){o("resetPassword()")},forgottenPassword:function(){o("forgottenPassword()")},utils:{setUserImage:function(){o("setUserImage()")},getFullPath:t}}};
gg.googleShowcase=function(){var e=function(){return __evCurrentExecution.googleShowcase.userState},o=function(e){return Number(e)?t(Number(e)):e},t=function(e){return e>=1e14||e<=-1e14?Math.floor(e/1e6):e>=1e11||e<=-3e10?Math.floor(e/1e3):e},a=function(){console.log("Google Showcase: unlockArticle called");var e=ev.utils.find(document,"body");["ev-modals","modal-open"].forEach((function(o){e.removeClass(o)}))},g=function(){console.log("Google Showcase: showPaywall called"),document.dispatchEvent(new CustomEvent("ev.paywall.googleShowcase.showPaywall",{detail:__evCurrentExecution.googleShowcase.evResponse}))},n=function(){gg.accounts.show("login","login",{})};return{hasGAAParams:function(){return!!(gg.util&&"function"==typeof gg.util.getParams&&gg.util.getParams("gaa_at")&&gg.util.getParams("gaa_ts")&&gg.util.getParams("gaa_n")&&gg.util.getParams("gaa_sig"))&&("na"!==gg.util.getParams("gaa_at")&&!(parseInt(gg.util.getParams("gaa_ts"),16)<Date.now()/1e3))},setUserState:function(e){var t=gg.accounts.getUser(),a=t.uid||"",g=gg.accounts.getUserType(),n="",i=o(t.registrationDate)||"",s=o(t.subscriptionDate)||"";"ALLOW_ACCESS"===e.result&&("registrado"===g?(n="METERING",i=i||1640991600):"acceso_digital"===g?(n="SUBSCRIBER",i=i||1640991600,s=s||1640991600):n="METERING"),__evCurrentExecution.googleShowcase={userState:{id:a,registrationTimestamp:i,subscriptionTimestamp:s,granted:"ALLOW_ACCESS"===e.result,grantReason:n}}},getUserState:e,init:function(){console.log("Google Showcase: init called");var o=ev.accounts.getMultitenantScriptConfig(),t=e(),i=new Promise((e=>{GaaMetering.getLoginPromise().then((()=>{console.log("Google Showcase: getLoginPromise called"),n()}))})),s=new Promise((e=>{GaaMetering.getGaaUserPromise().then((e=>{console.log("Google Showcase: getGaaUserPromise called");var o={client_id:e.client_id,jwt:e.credential};ev.service.getSocialGoogleSession(o).then((e=>{console.log("Google Showcase session: ",e);var o=Boolean(e&&e.socialAccountCreated),t={isRegister:o,isSocial:!0,isShowcase:!0},a={};"app"===gg.util.getParams("facet")&&(a.facet="app");ev.gtm.source.save("googleshowcase"),ev.gtm.pageview.conf("lightbox","signup-login"),o&&ev.gtm.pageview.trigger("thanks","google"),ev.gtm.pageview.trigger("login-ok","google"),ev.service.loginCompleted(t,a,!1,e).then((e=>{window.location.reload()})).catch((e=>{n()}))})).catch((e=>{n()}))}))}));!1!==GaaMetering.init({googleApiClientId:o.social.google.key,userState:e(),allowedReferrers:["www.lavanguardia.com"],handleLoginPromise:i,registerUserPromise:s,unlockArticle:a,showPaywall:g})&&t.id&&!t.granted||g(),(self.SWG=self.SWG||[]).push((function(e){e.getEventManager().then((e=>{e.registerEventListener((e=>{console.log("Google Showcase Event:",e)}))}))}))}}}();
gg.campaigns=function(){const e=gg.accounts.getScriptConfig().api.club.loquiero.url,t=gg.accounts.getScriptConfig().api.club.loquiero.key,o="club_offer_container_popup",n="modal-club";var r=function(e){[...document.querySelectorAll(e)].forEach((e=>{e.addEventListener("click",(()=>{try{m(e.getAttribute("data-id"))}catch(e){console.log("Error: "+e)}}))}))},a=function(e,t){[...document.querySelectorAll(e)].forEach((e=>{t&&!0===t?d(e.getAttribute("data-id")):e.addEventListener("click",(()=>{d(e.getAttribute("data-id"))}))}))},i=function(){var e=this.getAttribute("data-loquiero-href");ev.commons.referrer.save(),ev.utils.redirect(e,!1)},d=function(e){try{p(e)}catch(t){console.log("OpenPromo "+e+" "+t)}},c=function(e){parent=this.closest("div.modal-club"),element=parent.closest("div."+o),s(parent),element.remove()},l=function(e){var t=document.getElementById(e);return s(t)},s=function(e){return e&&("block"!=e.style.display?e.style.display="block":e.style.display="none"),e},u=function(e){const t=document.createElement("div");var d;switch(document.body.appendChild(t),t.classList.add(o),t.innerHTML=e.page,d="div."+o+" .close-modal",[...document.querySelectorAll(d)].forEach((e=>{e.addEventListener("click",c,!1)})),e.type){case"static":!function(e){[...document.querySelectorAll(e)].forEach((e=>{e.addEventListener("click",i,!1)}))}("div."+o+" a[data-btn-link]"),l(n);break;case"dynamicList":a("div."+o+" button[data-btn-promo]"),r("div."+o+" button[data-btn-offer]"),l(n);break;case"dynamic":r("div."+o+" button[data-btn-offer]"),a("div."+o+" button[data-btn-promo]",!0)}},p=function(o){const r=document.getElementById(o).querySelectorAll("input");var a={};r.forEach((e=>{a[e.name]=e.value}));var i=document.getElementById(n);fetch(e+"/validate",{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8","x-api-key":t},redirect:"follow",body:JSON.stringify(a)}).then((e=>{if(!e.ok){let t=new Error("HTTP status code: "+e.status);throw t.response=e,t.status=e.status,t}i&&"block"==i.style.display&&l(n),l(o)})).catch((e=>{i&&"block"==i.style.display&&l(n),l("modal-club-promo-error")}))},m=function(e){if(navigator&&navigator.clipboard&&navigator.clipboard.writeText){var t=document.getElementById("modal-club-promo-"+e);const n=t.querySelectorAll("input[data-input-promocode]");var o="";return n&&n.length>0&&(o=n[0].value),navigator.clipboard.writeText(o).then((()=>{const e=t.querySelectorAll("button[data-promo-url]");if(e&&e.length>0){const t=e[0].getAttribute("data-promo-url");t&&""!=t&&window.open(t,"_blank")}var o;o=document.getElementById("text-copied"),s(o),setTimeout((function(){s(o)}),3e3)}))}return Promise.reject("The Clipboard API is not available.")};return{fwdOfferToCore:function(o){var n,r=gg.accounts.getUser().guid||"",a=gg.accounts.getUser().sapId||"",i=document.documentElement.lang||"ES",d=(n="loQuieroSpinnerModal",{create:function(){const e=document.createElement("div");e.id=n,e.classList.add("loQuieroSpinnerModalContainer");const t=document.createElement("head"),o=document.createElement("style");o.type="text/css",o.textContent='.loQuieroSpinnerModalContainer { z-index:10;background-color: rgba(0, 0, 0, .2); position: fixed; top: 0; left: 0; width:100%; height: 100%;} .spinnerTitle{font-size:14px; color:#FFFFFF; font-size: 1.4rem; line-height: 2.5rem; text-align: center; padding: 0 5%;}.loQuieroSpinnerModalBox{ background-color: #001c4c; min-width:150px; min-height: 125px; position: absolute; top:50%; left: 50%;transform: translate(-50%, -50%); padding:25px;}.loader{margin-top:20px;width:100px;height:100px;border-radius:100%;position:absolute;top:50%; left: 50%;transform:translate(-50%, -50%);}#loader-1:before,#loader-1:after{content:"";position:absolute;left:0;right:0;margin:0 auto;width:50%;height:50%;border-radius:100%;border:10px solid transparent;border-top-color:#baad72}#loader-1:before{z-index:100;animation:spin 1s infinite}#loader-1:after{border:10px solid rgba(186, 173, 114, 0.4)}@keyframes spin{from{transform:scale(1) rotate(0)}to{transform:scale(1) rotate(360deg)}}.md #loader-1:before{border-top-color:#baad72}.r1 #loader-1:before{border-top-color:#baad72}';const r=document.createElement("div");r.classList.add("loQuieroSpinnerModalBox");const a=document.createElement("div");a.classList.add("spinnerTitle"),a.textContent="",r.append(a);const i=document.createElement("div");i.id="loader-1",i.classList.add("loader");const d=document.createElement("div");d.append(i),r.append(d),document.body.appendChild(e),e.appendChild(t),e.appendChild(r),t.appendChild(o)},destroy:function(){document.getElementById(n).remove()}});d.create(),fetch(e+"/page/"+o,{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8","x-api-key":t},redirect:"follow",body:JSON.stringify({guid:r,sap_ic:a,language:i})}).then((e=>e.json())).then((e=>u(e))).catch((e=>console.log("Error fwdOfferToCore: "+e))).finally((()=>d.destroy()))}}}();
gg.qualifio=function(){var e,i,n,t,o=!1,s=(e="qualifo:ev_access_token",t=function(i){ev.storage.save("local",e,i)},{create:function(e){if(e=e||{},i()){var o=n();if(o.sessionId===gg.accounts.getEvolokSessionId())return ev.utils.isArray(o.requestedBy)&&-1===o.requestedBy.indexOf(e.divId)&&(o.requestedBy.push(e.divId),t(o)),Promise.resolve(n())}var s={sessionId:gg.accounts.getEvolokSessionId(),clientId:gg.accounts.getScriptConfig().integrations.qualifio};return new Promise((function(i,n){gg.paywall.service.getExternalIntegrationToken(s).then((function(n){(n=n||{}).sessionId=gg.accounts.getEvolokSessionId(),n.requestedBy=[e.divId],t(n),i(n)})).catch((function(){n({})}))}))},eraseIfNeeded:function(){if(i()){var t=n();if(gg.accounts.isLogged()&&t.sessionId===gg.accounts.getEvolokSessionId()||!ev.utils.isArray(t.requestedBy))return;t.requestedBy.forEach((function(e){document.cookie="_qual_restore_"+e.replace("qualifio_insert_place_","")+"=; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}));try{ev.storage.remove("local",e)}catch(e){}}},exists:i=function(){return gg.paywall.utils.isPresentInStorage(e,"local")},get:n=function(){return ev.storage.load("local",e)}}),r=function(e){if(!o){e.addEventListener("load",(function(){o||(_qual_async.push(["registerChildMessageCallback","requestParticipantAction",function(e){var i=!gg.accounts.isLogged();_qual_async.push(["sendChildMessage",e.divId,"requestParticipantAction",i])}]),_qual_async.push(["registerChildMessageCallback","isLoggedIn",function(e){!function(e){e=e||{},gg.accounts.isLogged()?s.create(e).then((function(i){_qual_async.push(["sendChildMessage",e.divId,"userInfo",i.token])})).catch((function(){})):(s.eraseIfNeeded(),gg.accounts.show("login","login",{sourceAgent:"qualifio"}))}(e)}]),_qual_async.push(["registerChildMessageCallback","error",function(e){!function(e){e=e||{},s.eraseIfNeeded()}(e)}]),o=!0)}),!0)}},a=function(e){if(!e)return;var i=e.querySelector("iframe[id^='qualifio-']");if(i)return void r(i);const n=e.querySelector("div[id^='qualifio_insert_place_']");if(!n)return;var t=new MutationObserver((function(i,n){for(var t=0;t<i.length;t++)if("childList"===i[t].type){var o=e.querySelector("iframe[id^='qualifio-']");if(o){r(o);break}}n.disconnect()}));t.observe(n,{attributes:!1,childList:!0,subtree:!0}),s.eraseIfNeeded()};return{sso:function(e){(e=e||{}).isSinglePage?a(document.querySelector("body")):(document.addEventListener("infiniteScrollChangeUrl",(function(e){a(e.articleContainer)})),a(document.querySelector("article.article-default")))}}}();
gg.serialize=function(){var e=function(e){for(var n={},r=0;r<e.length;r++)t(e[r],n);return n},t=function(e,t){t=t||{};var r=e.value,l=e.getAttribute("name");if(l){if("checkbox"===e.type||"radio"===e.type)if(null==e.getAttribute("value"))r=1==e.checked;else if(!e.checked)return;n({name:l,value:r},t)}return t},n=function(e,t){var r,l=e.name.match(/(.*?)\.(.*)/);if(l)if((r=l[1].split("[]")).length>1){t[r[0]]=t[r[0]]||[];var u={};t[r[0]].push(u),e.name=l[2],n(e,u)}else t[l[1]]=t[l[1]]||{},e.name=l[2],n(e,t[l[1]]);else(r=e.name.split("[]")).length>1?(t[r[0]]=t[r[0]]||[],t[r[0]].push(e.value)):t[e.name]=e.value};return{form:function(t){return e(t.querySelectorAll("input, select"))},elements:e,element:t}}();
md.spotim=function(){var t=gg.accounts.getMultitenantScriptConfig().api.url,e=function(){return gg.accounts.isLogged()&&1==gg.accounts.getUser().verified&&1==gg.accounts.getUser().human},n=function(){if(gg.accounts.isEvolokCookiePresent())return!1;const t=gg.accounts.getUser();return gg.cookie.get("_spotimLastUpdate")<=t.lastUpdate},o=function(){var t=localStorage.getItem("SPOTIM_CURRENT_USER");return null!=t&&gg.accounts.getUser().username!=JSON.parse(t).data.username},i=function(t){var e=document.createElement("script");e.setAttribute("async","true"),e.setAttribute("src","https://launcher.spot.im/spot/"+t.spotId),e.setAttribute("data-spotim-module","spotim-launcher"),e.setAttribute("data-post-url",t.url),e.setAttribute("data-post-id",t.articleId),e.setAttribute("data-article-tags",t.tags),e.setAttribute("data-livefyre-url",t.articleId),e.setAttribute("data-spotim-autorun","false"),document.querySelector("body").appendChild(e)},c=function(e){var n=e+"-auth-buttons",o=$("<div class='"+n+"'></div>");$("#"+e).append(o);var i=function(t){o.html("<span class='"+e+"-auth-confirm'>"+t+"</span>")},c=function(t,n){var i=o.html("<span class='"+e+"-auth-buttons-text'>"+t+"</span>");i.unbind("click"),i.click(n)};this.refresh=function(){gg.accounts.isLogged()?1!=gg.accounts.getUser().verified?c(">> Verifica tu email para comentar",function(){gg.accounts.getService().update({}).success(function(){gg.accounts.refresh(),1!=gg.accounts.getUser().verified&&gg.accounts.show("verify_email","required")})}):gg.accounts.getUser().username?1!=gg.accounts.getUser().human?(i("Confirma para comentar"),gg.recaptcha.init(),gg.recaptcha.register({selector:"#spotim-comments ."+n,callback:function(t){gg.accounts.getService().recaptchaVerification(t).success(function(){gg.accounts.refresh(),(new s).onUserlogin(a)})}})):i(""):c(">> Añade un nombre de usuario",function(){window.location.href=t}):c(">> Accede para comentar",function(){gg.accounts.show("login","login",{sourceAgent:"comments"})})}},s=function(){this.onUserlogin=function(t){window.SPOTIM&&window.SPOTIM.startSSO?t():document.addEventListener("spot-im-api-ready",t,!1)},this.updateData=function(t){window.SPOTIM&&window.SPOTIM.logout?window.SPOTIM.logout().then(function(){t()}):document.addEventListener("spot-im-api-ready",function(){window.SPOTIM.logout().then(function(){t()})},!1)},this.onUserLogout=function(){window.SPOTIM&&window.SPOTIM.logout?(window.SPOTIM.logout(),gg.cookie.remove("_spotimLastUpdate")):document.addEventListener("spot-im-api-ready",function(){window.SPOTIM.logout()},!1)},this.onUserPost=function(t){document.addEventListener("spot-im-login-start",function(){if(!e()){var n=document.getElementById(t).getBoundingClientRect().top+window.pageYOffset+-100;window.scrollTo({top:n,behavior:"smooth"})}},!1)}},a=function(){window.SPOTIM.startSSO(function(t,e){var n={codeA:t,uid:gg.accounts.getUser().uid},o=gg.util.url("/perfil/user/spotim/sso").toString();fetch(o,{method:"post",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then(function(t){return t.text()}).then(function(t){t&&e(t)}).catch(function(t){console.error(t)})})};return{init:function(t){var r=new s(t.elToScroll),u=new c(t.el);i(t),r.onUserPost(t.el),e()&&(n()||o())?r.updateData(a):e()?r.onUserlogin(a):r.onUserLogout(),gg.accounts.onLogged(function(){u.refresh()}),gg.accounts.onUnlogged(function(){u.refresh()})}}}();
gg.WindowLoad=function(e){var o=null,l=e&&e.selector,r=document.createElement("div");l?r=document.querySelector(e.selector):document.querySelector("body").appendChild(r);return{load:function(e,o,l){var t=r;l&&l.selector&&(t=t.querySelector(l.selector)),gg.ajax.load(gg.ajax.utils.url(e,o),t)},close:function(){if(l)for(;r.firstChild;)r.removeChild(r.firstChild);else r.parentNode.removeChild(r);o&&o()},onClose:function(e){o=e}}};
gg.screens.factory={popup:function(e){return new gg.screens.Screen(e,(t=gg.screens.utils.find(document,"body"),n=t.style("overflow"),{opts:{closeable:!0},load:function(){var e={layout:"none",flow:this.data.flow,screen:this.data.screen,id:this.id,facet:this.data.facet};for(var t in this.data.params)e[t]=this.data.params[t];gg.accounts.getScreen(this.id).load(gg.accounts.getMultitenantScriptConfig().screens.url,e,{selector:'[data-screen-id="'+this.id+'"] [data-screen-content]'})},close:function(){var e=gg.accounts.getScreen(this.id),s=gg.screens.utils.find(document,'[data-screen-overlay="'+this.id+'"]'),a=s.style("transition");s.removeClass("active"),!a||a.match(/^(\w+ 0s ease 0s|\w+ 0s)$/)?e.close():s.one(["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"],function(t){e.close()}),t.style("overflow",n)},display:function(e){t.style("overflow","hidden"),gg.screens.utils.find(document,'[data-screen-overlay="'+e+'"]').addClass("active")}}));var t,n},embedded:function(e,t){return new gg.screens.Screen(e,{opts:{closeable:!1},load:function(e){var t={layout:"none",flow:this.data.flow,screen:this.data.screen,id:this.id,facet:this.data.facet};for(var n in this.data.params)t[n]=this.data.params[n];gg.accounts.getScreen(this.id).load(gg.accounts.getMultitenantScriptConfig().screens.url,t,{selector:'[data-screen-id="'+this.id+'"]'})},close:function(){gg.accounts.getScreen(this.id).close()},display:function(e){gg.screens.utils.find(document,"[data-screen-id="+e+"]").show()}})}};
gg.screens.forms=function(){var e=function(e,s){return gg.screens.utils.findInScreen(e,"#"+s).get()[0]},s=function(s,r){t.onSubmit(e(s,r),function(e,r){gg.accounts.getService().login(r.email,r.password).success(function(n){t.submitDone(e),gg.screens.registry[s].analytics.pageview("login-ok","site"),gg.screens.registry[s].close()}).failure(function(s){n(e,s)})})},n=function(e,s){if(t.submitDone(e),400==s.status)for(i in s.validationErrors)t.markFieldError(e,s.validationErrors[i].field),t.error(e,s.validationErrors[i].message);else t.error(e,s.errorMessage)},r=function(e,s){var n=gg.screens.registry[s].data;return e.sourceRef=n.sourceRef,e.sourceFacet=n.facet,e.sourceAgent=n.params.sourceAgent,e.sourceCampaign=n.params.sourceCampaign,e},t={show:function(e,s,n){var r=gg.screens.utils.find(e,s);r.show(),n&&r.first().append("<p>"+n+"</p>")},success:function(e,s){t.show(e,'[data-screen-success-for="'+e.id+'"]',s)},error:function(e,s){t.show(e,'[data-screen-error-for="'+e.id+'"]',s)},markFieldError:function(e,s){gg.screens.utils.find(e,'[name="'+s+'"]').forEach(function(e){e.classList.add("error")})},cleanErrors:function(e){gg.screens.utils.find(e,"input[name]").forEach(function(e){e.classList.remove("error")}),gg.screens.utils.find(e,"[data-screen-error-bound-to]").empty(),gg.screens.utils.find(e,"[data-screen-error-for]").empty()},onSubmit:function(e,s){e.addEventListener("submit",function(n){n.preventDefault(),gg.screens.utils.find(e,"button[type=submit]").prop("disabled",!0),document.body.style.cursor="wait",t.cleanErrors(e),s(e,gg.serialize.form(e))})},submitDone:function(e){gg.screens.utils.find(e,"button[type=submit]").prop("disabled",!1),document.body.style.cursor="default"}};return{login:s,signup:function(s,i,o){t.onSubmit(e(s,i),function(e,i){var c=r(i,s);try{gg.screens.formsValidation.validate(gg.screens.formsValidation.Action.SIGNUP,c),gg.accounts.getService().signup(c).success(function(n){t.submitDone(e),gg.screens.utils.evalTransitionOnEvent(s,o,"onSuccess",{provider:"site"})}).failure(function(s){n(e,s)})}catch(s){n(e,{errorMessage:s.message})}})},completeSignup:function(s,i,o,c){gg.screens.utils.findInScreen(s,'input[name="email"]').first(function(e){null!=o.oauthIdentity.email?e.value=o.oauthIdentity.email:e.disabled=!1}),t.onSubmit(e(s,i),function(e,i){var u=gg.screens.registry[s].data;i.sourceRef=u.sourceRef,i.sourceFacet=u.facet,i.sourceAgent=u.sourceAgent,i.sourceCampaign=u.sourceCampaign,gg.accounts.getService().update(r(i,s)).success(function(n){t.submitDone(e);var r="PENDING_LINK"==gg.accounts.getUser().sessionState?"onPendingLink":"onSuccess";gg.screens.utils.evalTransitionOnEvent(s,c,r,{provider:o.oauthIdentity.provider})}).failure(function(s){n(e,s)})})},linkAccounts:function(e,n,r){1==r.hasPassword&&(gg.screens.utils.findInScreen(e,'input[name="email"]').first(function(e){e.value=r.email,e.disabled=!0}),gg.screens.utils.findInScreen(e,"#"+n).show(),gg.screens.utils.findInScreen(e,"[data-screen-email=email]").show()),r.oauthProviders&&r.oauthProviders.length>0&&r.oauthProviders.forEach(function(s){gg.screens.utils.findInScreen(e,"[data-screen-oauth-provider="+s+"]").show()}),s(e,n)},forgottenPassword:function(s,r){t.onSubmit(e(s,r),function(e,r){gg.accounts.getService().forgottenPassword(r.email).success(function(){t.submitDone(e),gg.screens.utils.findInScreen(s,"[data-screen-inputs],[data-screen-subtitle]").hide(),t.success(e)}).failure(function(s){n(e,s)})})},resetPassword:function(s,r,i){t.onSubmit(e(s,r),function(e,r){if(r.password!=r.repeatPassword){var o=gg.screens.utils.findInScreen(s,'[name="repeatPassword"]').attr("data-error-mismatch");t.error(e,o),t.submitDone(e)}else gg.accounts.getService().resetPassword(r.password,i).success(function(){t.submitDone(e),gg.screens.utils.findInScreen(s,"[data-screen-inputs],[data-screen-subtitle]").hide(),t.success(e)}).failure(function(s){n(e,s)})})},requestVerification:function(s,r){t.onSubmit(e(s,r),function(e,s){gg.accounts.getService().requestVerification().success(function(){t.submitDone(e),t.success(e)}).failure(function(s){n(e,s)})})},manageAlerts:function(s,n){t.onSubmit(e(s,n),function(e,n){var r=void 0!==n.alerts?n.alerts.join(";"):[];gg.screens.webpush.setCategories(r),t.submitDone(e),gg.screens.registry[s].close()})}}}();
gg.screens.formsValidation=function(){var n={};return{Action:{LOGIN:"LOGIN",SIGNUP:"SIGNUP"},validate:function(i,t){var a=n[i];a&&a(t)},setValidation:function(i,t){n[i]=t}}}();
gg.screens.navigation={init:function(n){var c=gg.screens.registry[n];gg.screens.utils.click(n,"transition",function(n){c.transition(n)}),c.hasPrevious()?gg.screens.utils.click(n,"back",function(n){c.back()}):gg.screens.utils.findInScreen(n,"[data-screen-back]").hide(),1==c.opts.closeable&&(gg.screens.utils.findInScreen(n,"[data-screen-close]").show(),gg.screens.utils.click(n,"close",function(){c.analytics.event("cerrar"),c.close()})),gg.screens.utils.click(n,"logout",function(n){gg.accounts.getService().logout().done(function(){n?c.transition(n):c.close()})}),gg.screens.utils.click(n,"end",function(){c.close()})}};
gg.screens.oauth=function(){var n=function(n,e){var s=gg.accounts.getUser().sessionState;"PENDING_SIGNUP"===s?gg.screens.utils.evalTransitionOnEvent(n,e,"onPendingSignup"):"PENDING_LINK"===s?gg.screens.utils.evalTransitionOnEvent(n,e,"onPendingLink"):"OPEN"===s&&gg.screens.registry[n].close()};return{initProviders:function(e,s){1==s.preStateCheck&&n(e,s),gg.screens.utils.click(e,"oauth-provider",function(t){gg.accounts.getService().oAuthLogin(t).success(function(){"OPEN"==gg.accounts.getUser().sessionState&&gg.screens.registry[e].analytics.pageview("login-ok",t),n(e,s)})})}}}();
gg.screens.Screen=function(t,s){var i,n,a,e,o,l=[],c=!0;for(var r in this.data=t,this.id=t.id,this.load=s.load,this.close=s.close,this.opts={closeable:!0},s.opts)this.opts[r]=s.opts[r];this.transition=function(t,s){l.push(this.data.screen),s&&(this.data.transition=s),this.data.screen=t,this.load()},this.back=function(){var t=l.length;t>0&&(this.data.screen=l[t-1],this.load(),l.splice(t-1,1))},this.hasPrevious=function(){return l.length>0},this.display=function(){c&&s.display(this.id)},this.blockDisplay=function(){c=!1},this.analytics=(i=null,n=null,a=null,e=null,o=null,{conf:function(t){i=t.layout||i,n=t.flow||n,a=t.facet||a,e=t.source||e},pageview:function(t,s){o=t,window.dataLayer&&n&&o&&gg.gtm.virtualPageView("/vpv/"+i+"/"+n+"/"+a+"/"+e+"/"+o+(s?"/"+s:""))},event:function(t){window.dataLayer&&n&&o&&gg.gtm.push(i,t,n+"/"+e+"/"+o)}}),gg.screens.registry=gg.screens.registry||{},gg.screens.registry[this.id]=this};
gg.screens.utils=function(){function t(n){var i=n||[];this.empty=function(){this.forEach(function(t){for(;t.firstChild;)t.removeChild(t.firstChild)})},this.hide=function(){this.style("display","none")},this.show=function(){this.style("display","inherit")},this.prop=function(t,n){if(null==n)return i[0][t];this.forEach(function(i){i[t]=n})},this.attr=function(t,n){if(null==n)return i[0].getAttribute(t);this.forEach(function(i){i.setAttribute(t,n)})},this.append=function(t){this.forEach(function(n){for(var i=t,e=(new DOMParser).parseFromString(i,"text/html"),o=0;o<e.body.childNodes.length;o++)n.appendChild(e.body.childNodes[o])})},this.first=function(n){return 0==i.length?this:(n&&n(i[0]),new t([i[0]]))},this.one=function(t,n){this.on(t,n,!0)},this.on=function(t,n,i){var e=function(t){(!i||i&&!this.triggered)&&(this.triggered=!0,n(t))};this.forEach(function(n){t.forEach(function(t){n.addEventListener(t,e)})})},this.style=function(t,n){if(null==n)return window.getComputedStyle(i[0]).getPropertyValue(t);this.forEach(function(i){i.style[t]=n})},this.addClass=function(t){this.forEach(function(n){n.classList.add(t)})},this.removeClass=function(t){this.forEach(function(n){n.classList.remove(t)})},this.forEach=function(t){for(var n=0;n<i.length;n++)t(i[n])},this.get=function(){return i}}var n=function(n,i){return new t(n.querySelectorAll(i))},i=function(t,i){return n(document,'[data-screen-id="'+t+'"] '+i)};return{find:n,findInScreen:i,click:function(t,n,e){var o="data-screen-"+n;i(t,"["+o+"]").forEach(function(t){t.addEventListener("click",function(){e(this.getAttribute(o))})})},evalTransitionOnEvent:function(t,n,i,e,o){var r=gg.screens.registry[t];n&&n.transitions&&n.transitions[i]?r.transition(n.transitions[i],e):o?o():r.close()},evalNonSecureRedirect:function(t){"https:"==window.location.protocol||window.location.search.match("facet=app(?:&|$)")||(window.location.href=t+"?_ref="+encodeURIComponent(window.location.href),screen.blockDisplay())},getUrlParam:function(t){var n=new RegExp("[?&]"+t+"=?(.*?)(?=(?:$|&))","g"),i=window.location.search.match(n);return i?i.pop().replace(/.*?(=|$)/,""):null}}}();
gg.screens.webpush=function(){window.ACC=window.ACC||[];return{setCategories:function(e){ACC.push(["core:updateDeviceInfo",{categories:e}]),gg.storage.save("local","webpush.categories",e)},getCategories:function(){var e=gg.storage.load("local","webpush.categories");return e.length>0?e.split(";"):[]}}}();
gg.screens.validations=function(){function i(i){if("app"==i.sourceFacet&&i.email!=i.email2)throw new Error("El email no coincide")}return{init:function(){gg.screens.formsValidation.setValidation(gg.screens.formsValidation.Action.SIGNUP,i)}}}();
var _AccountsService=gg.AccountsService;gg.AccountsService=function(e){var t=new _AccountsService(e),n=function(e){var t=new gg.AccountsServicePromise;return e(t),t.handler};return t.recaptchaVerification=function(e){var c={catpchaResponse:e};return n(function(e){gg.ajax.post(t.utils.getFullPath("/user/verification/recaptcha"),c,function(t){e.resolve(t)},{credentials:!0})})},t.tokenValidate=function(e){var c={"auth-token":e};return n(function(e){gg.ajax.post(t.utils.getFullPath("/user/validateToken"),c,function(t){e.resolve(t)},{credentials:!0})})},t};
})(window);
var ev = window.ev || {};var lv = window.lv = window.lv || {};
(function(window){
var __evScriptConfig={"backoffice":{"api":{"cookie":{"domain":".lavanguardia.com"},"invoices":{"getInvoices":"https://www.lavanguardia.com/perfil/evbk/invoices/get-invoices","negative":"https://www.lavanguardia.com/perfil/evbk/invoices/negative","substitutive":"https://www.lavanguardia.com/perfil/evbk/invoices/substitutive","getPdf":"https://www.lavanguardia.com/perfil/evbk/invoices/get-pdf","rectification":"https://www.lavanguardia.com/perfil/evbk/invoices/rectification","base":"https://www.lavanguardia.com/perfil/evbk/invoices"},"bck":{"loadRetentionConfig":"https://www.lavanguardia.com/perfil/evbk/load-retentionConfig","uploadNifs":"https://www.lavanguardia.com/perfil/user/evbk/uploadNifs","retention":{"content":{"upload":"https://fioahw4ht7.execute-api.eu-west-1.amazonaws.com/v1/upload"}},"landings":{"upload":"https://www.lavanguardia.com/perfil/user/evbk/landings/upload","list":"https://www.lavanguardia.com/perfil/evbk/landings","delete":"https://www.lavanguardia.com/perfil/user/evbk/landings/delete"}},"user":{"bck":{"subscriptions":"https://www.lavanguardia.com/perfil/evbk/subscriptions","digitalsubscriptions":"https://www.lavanguardia.com/perfil/evbk/digital-subscriptions","thirdPartiesSubscriptions":"https://www.lavanguardia.com/perfil/evbk/thirdParties-subscriptions","paymentPlans":"https://www.lavanguardia.com/perfil/evbk/payment-plans","products":"https://www.lavanguardia.com/perfil/evbk/products","recalculateInvoice":"https://www.lavanguardia.com/perfil/user/evbk/recalculate-invoice","baseUrl":"https://www.lavanguardia.com/perfil/user/evbk","appleSubscriptions":"https://www.lavanguardia.com/perfil/evbk/apple-subscriptions","invalidateCache":"https://ggo.evolok.net/acd/api/3.0/invalidate/user","roleAssignments":"https://www.lavanguardia.com/perfil/evbk/roleAssignments","retention":{"video":{"update":"https://www.lavanguardia.com/perfil/user/evbk/retention-video-update"},"uploadRetentionImage":"https://www.lavanguardia.com/perfil/user/evbk/upload-retention-image"},"beneficiarySubscriptions":"https://www.lavanguardia.com/perfil/evbk/beneficiary-subscriptions","info":"https://www.lavanguardia.com/perfil/user/evbk/info"}}}},"mdusa":{"defaultLanguage":"es","cookie":{"domain":".mundodeportivo.com"},"social":{"apple":{"key":"com.mundodeportivo.loginservice"},"facebook":{"key":"296333073816810"},"google":{"key":"589205672786-nmgvrf1hjf31dgfknp2o8us7umng7jo6.apps.googleusercontent.com"}},"evolok":{"api":{"url":"https://ev.mundodeportivo.com"}},"recaptcha":{"key":"6LekHqUUAAAAAFGr_ERvycV9pjTeqbczf8GYURlv"},"stripe":{"key":"pk_live_uSwclOkMJDXBrMimE8h9o0rx001L7UCTpw"},"api":{"url":"https://us.mundodeportivo.com/perfil/"},"brand":"MD","authorizedDomains":"https://us.mundodeportivo.com","base":{"url":"https://us.mundodeportivo.com"}},"streets":{"provinces":"https://streets.grupogodo.com/provinces","streets":"https://streets.grupogodo.com/streets/{town}/{streetType}?start={data}","streetTypes":"https://streets.grupogodo.com/streetTypes","towns":"https://streets.grupogodo.com/towns/{town}?start={data}"},"evolok":{"api":{"url":"https://ggo.evolok.net"}},"md":{"defaultLanguage":"es","cookie":{"domain":".mundodeportivo.com"},"social":{"apple":{"key":"com.mundodeportivo.loginservice"},"facebook":{"key":"296333073816810"},"google":{"key":"589205672786-nmgvrf1hjf31dgfknp2o8us7umng7jo6.apps.googleusercontent.com"}},"evolok":{"api":{"url":"https://ev.mundodeportivo.com"}},"recaptcha":{"key":"6LekHqUUAAAAAFGr_ERvycV9pjTeqbczf8GYURlv"},"stripe":{"key":"pk_live_uSwclOkMJDXBrMimE8h9o0rx001L7UCTpw"},"api":{"url":"https://www.mundodeportivo.com/perfil/"},"brand":"MD","authorizedDomains":"https://www.mundodeportivo.com,https://shopping.mundodeportivo.com,https://alta.mundodeportivo.com","base":{"url":"https://www.mundodeportivo.com"}},"club":{"defaultLanguage":"es","cookie":{"domain":".lavanguardia.com"},"social":{"apple":{"key":"com.lavanguardia.loginservice"},"facebook":{"key":"308114232627941"},"google":{"key":"766792178111-keuj5fj715i0qd7d612212p8ko369dg6.apps.googleusercontent.com"}},"evolok":{"api":{"url":"https://ev.lavanguardia.com"}},"stripe":{"key":"pk_live_uSwclOkMJDXBrMimE8h9o0rx001L7UCTpw"},"recaptcha":{"key":"6LdaCqQUAAAAAI3bjqFNdTYJWs4ttsWDAwuSrtIl"},"api":{"url":"https://club.lavanguardia.com/perfil/"},"brand":"LV","authorizedDomains":"https://club.lavanguardia.com","base":{"url":"https://club.lavanguardia.com"}},"lv":{"defaultLanguage":"es","cookie":{"domain":".lavanguardia.com"},"social":{"apple":{"key":"com.lavanguardia.loginservice"},"facebook":{"key":"308114232627941"},"google":{"key":"766792178111-keuj5fj715i0qd7d612212p8ko369dg6.apps.googleusercontent.com"}},"evolok":{"api":{"url":"https://ev.lavanguardia.com"}},"stripe":{"key":"pk_live_uSwclOkMJDXBrMimE8h9o0rx001L7UCTpw"},"recaptcha":{"key":"6LdaCqQUAAAAAI3bjqFNdTYJWs4ttsWDAwuSrtIl"},"api":{"url":"https://www.lavanguardia.com/perfil/"},"brand":"LV","authorizedDomains":"https://www.lavanguardia.com,https://entradas.lavanguardia.com,https://shopping.lavanguardia.com,https://alta.lavanguardia.com","base":{"url":"https://www.lavanguardia.com"}},"r1":{"defaultLanguage":"ca","cookie":{"domain":".rac1.cat"},"social":{"apple":{"key":"cat.rac1.loginservice"},"facebook":{"key":"1061068540655806"},"google":{"key":"444047032466-jf069uv7u5ohrinujei1odn859v61afm.apps.googleusercontent.com"}},"evolok":{"api":{"url":"https://ev.rac1.cat"}},"recaptcha":{"key":"6LdpK_EaAAAAADWyt7JUdoNtnUWOmUyOv_tYecTo"},"stripe":{"key":"pk_live_uSwclOkMJDXBrMimE8h9o0rx001L7UCTpw"},"api":{"url":"https://www.rac1.cat/perfil/"},"brand":"R1","authorizedDomains":"https://www.rac1.cat","base":{"url":"https://www.rac1.cat"}}};
lv.profile = lv.profile || {};
ev.accounts=function(){var e=function(){if("undefined"==typeof __evScriptConfig)throw new Error("Script config is missing!");return __evScriptConfig},t="anonimo",n="registrado",o="acceso_digital",i={0:"anonimo",1:"registrado",2:"acceso_digital",3:"exsuscriptor"},r=function(){if("undefined"!=typeof ggSite)return ggSite;var t=e();for(var n in t)if(t[n].authorizedDomains)for(var o=t[n].authorizedDomains.split(","),i=0;i<o.length;i++)if(o[i].includes(location.hostname))return n;return"lv"},a=function(){return e()[r()]},c=new gg.EventRegistry,u=a().cookie.domain,s={},g=function(e,t){c.trigger(e,t)},l=function(e,t){c.on(t,e)},d=function(){return ev.cookie.get("ev_ss")},f=function(){var e=ev.cookie.map();for(var r in e){var a=new RegExp("^_id_");a.test(r)&&(s[r.replace(a,"")]=e[r])}for(var c in s)if(a.test(s[c])){for(var u={},g=s[c].split(";"),l=0;l<g.length;l++){var d=g[l].split("=");try{u[d[0].replace(a,"")]=decodeURIComponent(d[1])}catch(e){}}for(var f in delete s[c],u)s[f]=u[f]}return s.hasActiveSubscription=function(){return"1"===gg.cookie.get("_pac")},s.getEvolokId=function(){return s.guid},s.getId=function(){return s.uid},s.getType=function(){if(s.type)return i[s.type];const e=ev.cookie.get("ev_ss");return null!=e?"function"==typeof s.hasActiveSubscription&&s.hasActiveSubscription()?o:n:t},s.getRoleName=function(){return s.roles},s.getRegisterDate=function(){if(void 0===s.registrationDate||""!==s.registrationDate){const e=new Date(parseInt(s.registrationDate));return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")}return""},s.getRegisteredMonthsValue=function(){var e=void 0,t=s.getRegisterDate();if(t)try{var n=new Date(t),o=new Date;const i=Math.abs(o-n),r=Math.ceil(i/864e5);r<=15?e=0:r&&(e=Math.ceil(r/30))}catch(t){e=0}return e},s.getNewsletterList=function(){return s.newsletters},s.getCommunicationList=function(){return s.communications},s};window.forgotPasswordHandler=function(){document.getElementById("evLogin").style.display="none",document.getElementById("evForgotPassword").style.display="block",ev.gtm.pageview.trigger("password-remember")};var v=function(){return"app"===ev.utils.getParam("facet")};return{isUserAuthenticated:function(){return null!==d()&&void 0!==d()},getUserGuid:function(){return f().guid},getUser:f,isApp:v,logout:function(e){const t=d();var n=!1;EV.Core.UI.logout(),EV.Event.on(EV.Event.LOGOUT_ACTION,(function(){if(!n){if(ev.cookie.remove("_id_loggedIn",u),t)ev.gtm.push("myaccount","cerrar-sesion","logout"),ev.service.logout(t).then((function(){ev.accounts.clearUserCookies(),e&&"function"==typeof e?e():window.location.reload()})).catch((function(){window.location.reload()}));else{if(e&&"function"==typeof e)return void e();window.location.reload()}n=!0}}))},setAttributesWhenRegistering:function(){var e=ev.service.setAttributesWhenRegistering;return ev.utils.retryAsync(e,2)},onUserIdentifierLoad:function(){const e="#apple-btn";ev.utils.registerMutationObserver({id:"user-identifier",onMutation:function(){ev.commons.registerAppleHandler(e)},targetElId:e}),ev.gtm.pageview.conf("embedded","signup-login"),d()&&ev.accounts.clearUserCookies()},onLogged:function(e){l(e,"evLogged")},onUnlogged:function(e){l(e,"evUnlogged")},getUserSessionId:d,getAuthTokenFromUrl:function(){return ev.utils.getParam("auth-token")},clearUserCookies:function(){for(var e in ev.cookie.remove("ev_ss",null,null),ev.cookie.remove("ex_ss",null,null),ev.cookie.map()){/^(_id_|yy__id_)/.test(e)&&ev.cookie.remove(e,u)}},loginAppInit:function(){ev.utils.addEventHandlerFromData("click","data-login-app=end",(function(){const e=ev.utils.getParam("auth-token");var t="";if(e){switch(r()){case"md":case"mdusa":t="mundodeportivoauth://callback?auth-token=";break;case"r1":case"lv":default:t="lavanguardiaauth://callback?auth-token=";break;case"club":t="clubvanguardiaauth://callback?auth-token="}t&&(t+=e,ev.utils.redirect(t,!0))}}))},getScriptConfig:e,getMultitenantScriptConfig:a,getGGSite:r,reloadToLogin:function(e){e=e||{};for(var t,n="",o={},i={shopping:"shopping",club:"club",alta:"campaignator",entradas:"entradas"},c=Object.keys(i),u=0;u<c.length;u++)if(t=c[u],window.location.href.indexOf(t)>-1){n=i[c[u]];break}if(!n&&e.sourceAgent&&(n=r()+"-"+e.sourceAgent),v()){if(ev.app.fwdToLogin())return;o.facet="app"}!e.ignoreSource&&n&&ev.gtm.source.save(n,{cookieEnabled:!0}),window.location.href=a().base.url+"/perfil/ev/login"+ev.utils.formatParams(o)},init:function(){const e=d();g(null!=e?"evLogged":"evUnlogged");const t=ev.utils.areCookiesEnabled(),n=ev.utils.hasBrowserSupport();if(!n||!t){if(n){ev.utils.find(document,"#nocookies").show()}else{ev.utils.find(document,"#nobrowser").show()}ev.utils.find(document,".main-content").hide()}}}}();
ev.ajax=function(){var e=function(e,n){return r("GET",e,null,{},n)},n=function(e,n,r){return t("POST",e,n,r)},t=function(e,n,t,a){var s="json"===(a=a||{}).type?"application/json":"application/x-www-form-urlencoded",u="json"===a.type?JSON.stringify(t):o(t);return!1===a.processData&&(s=null,u=t),r(e,n,s,u,a)},r=function(e,n,t,r,o){return new Promise((function(a,s){o=o||{};var u=new XMLHttpRequest;u.open(e,n),o.headers&&Object.keys(o.headers).forEach((function(e){u.setRequestHeader(e,o.headers[e])})),t&&u.setRequestHeader("Content-type",t),o.responseType&&(u.responseType=o.responseType),1==o.credentials&&(u.withCredentials=!0),u.onload=function(){var e=u.status>=200&&u.status<300,n={};if(o.ignoreParsing)n=u.response;else try{n=JSON.parse(u.response)}catch(e){}e?a(n):s(n)},u.onerror=function(){s(u.response)},u.send(r)}))},o=function(e){var n=[];for(var t in e)n.push(t+"="+encodeURIComponent(e[t]));return n.join("&")};return{get:e,post:n,put:function(e,n,r){return t("PUT",e,n,r)},delete:function(e,n){return r("DELETE",e,null,{},n)},load:function(n,t){return e(n,{ignoreParsing:!0}).then((function(e){t.append(e)}))},loadWithPayload:function(e,t,r){return n(e,t,{ignoreParsing:!0,type:"json"}).then((function(e){r.append(e)}))},jsonp:function(e,n){return n=n||{},new Promise((function(t,r){var o="_"+Math.round(1e4*Math.random()),a=n.callback||"jsonp_callback_"+o;window[a]=function(e){delete window[a];var n=document.getElementById(o);n.parentNode.removeChild(n),t(e)};var s=e+ev.utils.formatParams(n),u=document.createElement("script");u.src=s,u.id=o,u.addEventListener("error",r),(document.getElementsByTagName("head")[0]||document.body||document.documentElement).appendChild(u)}))}}}();
ev.app=function(){var n=function(){var n=navigator.userAgent.match(/gg[a-zA-Z]*\/[0-9a-zA-Z.]*[0-9\s]/);return(n=n?n[0]:"").toLowerCase().trim()},e=function(e,o){if(!e)return!1;o=o||{};const r=n();try{if(r.includes("ios"))return window.webkit.messageHandlers.appCallback.postMessage(e),!0;if(r.includes("and"))return appCallback.sendMessage(e),!0;console.log("fwdToApp for userAgent="+r)}catch(n){console.log("caught exception fwdToApp for userAgent="+r+"; message="+e)}return!1};return{fwdToNativeSection:function(){return e("HOME")},fwdToInvalidSession:function(){return e("UNAUTHORIZED")},fwdToPaywall:function(){return e("SUBSCRIPTION_REQUIRED")},fwdToRestorePurchases:function(){return e("RESTORE_PURCHASES")},fwdToManagePurchases:function(){return e("MANAGE_PURCHASES")},fwdToPurchaseCompleted:function(){return e("PURCHASE_COMPLETED")},fwdToSignOut:function(){return e("SIGN_OUT")},fwdToInbox:function(){return e("INBOX")},fwdToLogin:function(){return e("REQUIRED_LOGIN")},fwdToConsentAgreeToAll:function(){return e("ACCEPT_CONSENT")},fwdToConsentShowPreferences:function(){return e("DIDOMI_PREFERENCES")},fwdToConsentShowVendors:function(){return e("DIDOMI_PREFERENCES_VENDORS")}}}();
ev.commons=function(){const e=ev.accounts.getMultitenantScriptConfig().cookie.domain,t="_ref",a="ev_gg_ps",n="ev_gg_err";var i=new FileReader,r=null,o={save:function(a){const n=null!=a?a:d();ev.cookie.set(t,n,null,e)},origin:function(){return ev.utils.getParam(t)},load:function(e){var t=(e=e||{}).origin||o.origin();if(t&&!e.ignore){var a=e.queryParams?e.queryParams:ev.utils.getQueryParams();["_ref","base"].forEach((function(e){a[e]&&delete a[e]})),ev.utils.redirectWithParams((e.base?e.base:"")+t.replace(/%2F/g,"/"),a)}else{const e=this.get(),t=e||ev.accounts.getMultitenantScriptConfig().base.url;this.delete(),ev.utils.redirect(t.replace("%2F","/"))}},get:function(){return ev.cookie.get(t)},delete:function(){ev.cookie.remove(t,e)}},s=function(){var t=ev.cookie.get(a);if(t){try{t=JSON.parse(t)}catch(e){}ev.cookie.remove(a,e)}return t},u={get:function(){return s()},save:function(){var t={};t.base=ev.accounts.getMultitenantScriptConfig().base.url,t=ev.utils.getQueryParams(t),ev.utils.isEmpty(t)||ev.cookie.set(a,JSON.stringify(t),null,e)},delete:function(){this.get()}},l=function(){return EV.Translate.getConfig().translations[EV.Translate.getConfig().activeLanguage]},c=function(){return l().ev.widgets.errors},d=function(){return window.location.href},v=function(e){ev.utils.find(document,"#"+e).toggleClass("active"),ev.utils.find(document,"body").toggleClass("modal-open")},f=function(){const e="autoPopulate";var t=!1,a=function(e,a){t=!0;var i=ev.utils.find(document,"."+e).getFirst();if(i){var r;r="newsletters"===a?ev.utils.find(i,"span.newsletter__title").getFirst().innerHTML:ev.utils.find(i,"label.checkbox__label").getFirst().childNodes[0].nodeValue;var o=ev.utils.find(document,"p.autopopulate-popup-msg");ev.utils.find(o.getFirst(),"span").asArray().forEach((function(e){e.remove()})),o.append("<span>"+r+"</span>"),n()}},n=function(){ev.utils.find(document,"#autopopulatePopup").toggleClass("active"),ev.utils.find(document,"body").toggleClass("modal-open")};return{init:function(i){var r=ev.utils.getParam(e);if(ev.utils.find(document,"#autopopulatePopup").getFirst()&&r){var o=ev.utils.find(document,"."+r).getFirst();if(o){var s="newsletters"===i?"input[name$="+r+"]":"input[name^="+r+"]",u=ev.utils.find(o,s).getFirst();if(u.hasAttribute("checked"))t=!0,ev.utils.redirectWithOptions(d().split("?")[0],{paramsToDelete:[e,"base"]});else{var l=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});u.dispatchEvent(l)}}}EV.Event.on("gg.user_updated",(function(n){if(n.response.changedAttributes.some((function(e){var t="newsletters"===i?"newsletters"==e.name:e.name.includes("Optin");return"UPDATED"==e.value&&t}))){var r=ev.utils.getParam(e);r&&!t&&a(r,i)}})),ev.utils.addEventHandlerFromData("click","data-autopopulate-popup",(function(t,a){n(),ev.utils.redirectWithOptions(d().split("?")[0],{paramsToDelete:[e,"base"]})}))}}}();return{referrer:o,init:function(){ev.utils.addEventHandlerFromData("click","data-vpv-src",(function(e,t){const a=e.getAttribute(t);a&&("delete"!==a?ev.gtm.source.save(a):ev.gtm.source.delete())})),ev.utils.addEventHandlerFromData("click","data-referrer-strategy",(function(e,t){const a=e.getAttribute(t);a&&("supplier"!==a?ev.accounts.isApp()&&("referrer"!==a||!o.get()||o.get().includes("suscripciones")&&ev.commons.getURL().includes("pago-exitoso"))&&!0===ev.app.fwdToNativeSection()||o.load():o.save())})),ev.utils.addEventHandlerFromData("click","data-popup",(function(e,t){v(e.getAttribute(t))})),ev.utils.addEventHandlerFromData("click","data-accounts=logout",(function(e,t){ev.accounts.isApp()?ev.app.fwdToSignOut():ev.accounts.logout()})),ev.utils.addEventHandlerFromData("click","data-accounts=blurred",(function(e,t){ev.utils.find(document,"body").toggleClass("blurred")})),ev.utils.addEventHandlerFromData("click","data-accounts=deleteAccount",(function(e,t){ev.gtm.push("myaccount","darse-baja","baja"),ev.service.deleteAccount().then((function(){ev.accounts.clearUserCookies(),ev.accounts.isApp()&&ev.app.fwdToInvalidSession()||ev.utils.redirect(ev.accounts.getMultitenantScriptConfig().base.url)})).catch((function(e){e.hasOwnProperty("errorMessage")&&ev.forms.utils.error(e.errorMessage)}))})),ev.utils.addEventHandlerFromData("click","data-accounts=emailRequired",(function(e,t){EV.Event.publish("gg.collect_user_info",{screen:"email",onSuccess:function(){window.location.reload()}})})),ev.utils.addEventHandlerFromData("click","data-app=subscriptions",(function(e,t){ev.app.fwdToManagePurchases()})),ev.utils.addEventHandlerFromData("click","data-app=purchase",(function(e,t){ev.app.fwdToPaywall()})),ev.utils.addEventHandlerFromData("click","data-app=inbox",(function(e,t){ev.app.fwdToInbox()})),function(){var t=ev.cookie.get(n);if(t){try{var a=(t=JSON.parse(t))&&t.args?t.args:[],i=c(),r=t&&t.code?i[t.code.toLowerCase()]:"";if(r){var o=r.match(/{[0-9]*}/g);o&&o.length&&o.forEach((function(e,t){r=r.replaceAll(e,a[t])})),ev.forms.utils.error(r)}}catch(e){}ev.cookie.remove(n,e)}}(),ev.utils.find(document,".table-responsive").asArray().forEach((function(e){new SimpleBar(e,{autoHide:!1,forceVisible:"y"}).getScrollElement().addEventListener("scroll",(function(){const t=ev.utils.find(e,".dropdown-menu");t.removeClass("show"),t.hide()}))})),ev.utils.addEventHandlerFromData("click","data-app-href",(function(e){var t=e.getAttribute("data-app-href"),a=e.getAttribute("provider");if(a){var n=e.getAttribute("data-app-network");ev.gtm.push("onboarding","download-app-"+a,n),ev.utils.open(t)}else ev.utils.open(t)})),ev.utils.addEventHandlerFromData("click","data-benefits-href",(function(e){if(!ev.accounts.isApp()||"true"!==ev.utils.getParam("isGiftPurchase")||!0!==ev.app.fwdToNativeSection()){var t=e.getAttribute("data-benefits-href");ev.gtm.push("checkout","gracias","beneficios"),ev.utils.redirect(t)}})),ev.utils.addEventHandlerFromData("change","data-profile=binary",(function(e,t){var a=e.files;if(a.length){ev.utils.spinner.show();var n=parseInt(e.getAttribute("size"));a[0].size<n?(r=a[0],i.readAsDataURL(a[0])):(e.value=null,ev.utils.spinner.hide(),ev.forms.utils.error(c().avatar_max_size+Math.floor(n/1048576).toString()+"MB"))}})),ev.utils.addEventHandlerFromData("click","data-profile=uploadImage",(function(e,t){i.onload=function(){ev.service.updateAvatar(r).then((function(e){return ev.forms.utils.success(),ev.utils.spinner.hide(),ev.utils.find(document,"img[data-profile=image]").attr("src",e.url),ev.utils.find(document,"div[data-profile=uploadImage]").addClass("avatar__has-image"),ev.utils.find(document,"a[data-profile=deleteImage]").removeClass("d-none"),ev.utils.find(document,"[data-profile=span]").removeClass("d-none"),ev.service.refreshAliasCookies()})).catch((function(e){e=e||{},ev.utils.spinner.hide();var t=ev.utils.find(document,"input[data-profile=binary]").getFirst();t&&(t.value=null),"format"===e.type?ev.forms.utils.error(c().avatar_wrong_format):"size"===e.type?ev.forms.utils.error(c().avatar_max_size+Math.floor(e.value/1048576).toString()+"MB"):ev.forms.utils.error(c().generic)}))};var a=ev.utils.find(document,"input[data-profile=binary]").getFirst();if(a){var n=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});a.dispatchEvent(n)}})),ev.utils.addEventHandlerFromData("click","data-profile=deleteAvatar",(function(e,t){ev.utils.spinner.show(),v("deleteAvatar"),ev.service.deleteAvatar().then((function(){return ev.utils.spinner.hide(),ev.forms.utils.success(),ev.utils.find(document,"img[data-profile=image]").attr("src",""),ev.utils.find(document,"input[data-profile=binary]").val(""),ev.utils.find(document,"div[data-profile=uploadImage]").removeClass("avatar__has-image"),ev.utils.find(document,"a[data-profile=deleteImage]").addClass("d-none"),ev.utils.find(document,"[data-profile=span]").addClass("d-none"),ev.service.refreshAliasCookies()})).catch((function(){ev.utils.spinner.hide(),ev.forms.utils.error(c().generic)}))})),ev.forms.onSubmit(ev.utils.getFormFromId("simplUserInfoCardForm"),(function(e,t){return t=t||{},ev.forms.validate(e)?ev.forms.sendDataToEvolok(t):Promise.reject({ignoreOnFailure:!0})}),(function(){window.location.reload()}),null,{ignoreSuccessMessage:!0})},getURL:d,registerAppleHandler:function(t,n){const i=ev.utils.find(document,t);if(i.getFirst()){if(ev.cookie.get(a)&&!ev.commons.getURL().includes("apple")&&ev.cookie.remove(a,e),n){var r=ev.utils.find(document,n);if(!r.getFirst())return;var o=document.createEvent("Event");o.initEvent("submit",!0,!0)}i.on(["click"],(function(e){r&&e.preventDefault(),u.save(),r&&r.getFirst().dispatchEvent(o)}))}},getParams:s,queryParams:u,storeCustomError:function(t){ev.cookie.set(n,t,null,e)},getErrorMessages:c,getMessageTable:l,sendReferrerToAnalytics:function(e){var t=o.get()?o.get().split("?")[0]:"none";ev.gtm.push("conversion",e,t)},autoPopulate:f,togglePopup:v,disableFormAutocomplete:function(){var e=navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&navigator.userAgent.toLowerCase().indexOf("edge")<0?"new-password":"off";ev.utils.find(document,"input, select").attr("autocomplete",e)}}}();
ev.config=function(){const a=ev.accounts.getMultitenantScriptConfig().evolok.api.url,e=a+"/ic/api",i=a+"/pm/api/v2";var n=function(a){return{es:{ev:{widgets:{orseparator:"O CON TU E-MAIL",userProfileUpdateSuccess:"Tu cuenta ha sido actualizada correctamente.",social:{buttons:{login:{label:"Continuar con",description:"CON TU RED SOCIAL"},register:{label:"Continuar con"}}},popup:{blocked:{title:"Hemos conectado tus cuentas",text:"A partir de ahora podrás acceder con cualquiera de ellas.",button:"Continuar"}},registration:{buttons:{submit:"Continuar",cancel:""}},login:{forgotPassword:"¿Olvidaste tu contraseña?",buttons:{submit:"Continuar",cancel:""}},userIdentifier:{buttons:{submit:"Continuar",cancel:""}},forgotPassword:{buttons:{submit:"Continuar"}},changePassword:{title:"Cambiar contraseña",buttons:{submit:"Guardar Cambios",cancel:""}},changepassword:{success:"La contraseña ha sido modificada."},resetPassword:{buttons:{cancel:"",submit:"Aceptar"}},resetpassword:{success:"La contraseña ha sido modificada."},editProfile:{buttons:{submit:"Guardar Cambios",cancel:""}},ev_date:{january:"Enero",february:"Febrero",march:"Marzo",april:"Abril",may:"Mayo",june:"Junio",july:"Julio",august:"Agosto",september:"Septiembre",october:"Octubre",november:"Noviembre",december:"Diciembre",undef_day:"",undef_month:"",undef_year:""},registration_attr:{password:{label:"Añadir una contraseña",placeholder:"Añadir una contraseña"}},productSummary:{productName:"Suscripción",productDescription:"Descripción",productFrequency:"Periodicidad",deliveryCost:"Delivery Cost",productPrice:"Importe",totalProductPrice:"Importe total",totalAmount:"Total",checkout:"Checkout",noProductsSelected:"No products selected!",ariaLabels:{removeItemFromBasket:"Remove Item From Basket",checkoutPurchaseBasket:"Checkout Purchase Basket"}},attr:{password:{label:"Escribe tu contraseña",placeholder:"Escribe tu contraseña",new:{label:"Escribe tu nueva contraseña",placeholder:"Escribe tu nueva contraseña"},confirm:{label:"Confirma tu nueva contraseña",placeholder:"Confirma tu nueva contraseña"}},"contraseña":{label:"Añadir una contraseña",placeholder:"Añadir una contraseña"},email_address:{label:"E-mail",placeholder:"E-mail"},gender:{label:"Género"}},errors:{no_social_network_linked:"No existe ninguna red social vinculada.",all_social_networks_linked:"¡Todas las redes sociales están vinculadas!",checkout:"Ha habido un problema durante el proceso, por favor inténtalo de nuevo",payment:"Ha habido un problema con el pago, por favor inténtalo de nuevo",order:"Ha habido un problema durante el proceso, por favor inténtalo de nuevo",direct_debit:"Los datos de la tarjeta no son correctos",identifiers_not_found:"No hemos encontrado la cuenta, por favor registra una nueva cuenta.",duplicate_user_profile:"¡Correo en uso! Por favor, utiliza un email distinto o introduce tu contraseña actual y vincula la cuenta.",user_linked_with_different_account:"Tu cuenta de {0} está ya vinculada con otra.",identifiers_invalid:"Contraseña incorrecta.",account_locked:"Tu cuenta está bloqueada porque se ha alcanzado el límite intentos establecido, por favor inténtalo más tarde.",account_suspended:"Tu cuenta ha sido suspendida, contacte con Atención al Cliente.",user_already_linked_with_same_social_network:"Tu cuenta ya está vinculada a la cuenta {1} con el correo {0}. Desvincula {1} antes de vincularla con otro {1} usuario.",user_profile_inactive:"Tu cuenta no ha sido aún activada. <a class=\resend-activation ng-click=\resendActivation()>Re-enviar correo</a>",unlink_user_social_network:"No es posible desvincular tu cuenta social",user_profile_identifiers_not_found:"No existe una cuenta con este email. Prueba con otro email o crea una cuenta.",nothing_selected:"Por favor, selecciona una opción para continuar",technical_difficulties:"Lo sentimos, estamos experimentando problemas técnicos, por favor reinténtalo en unos momentos.",change_card_failed:"No ha sido posible actualizar los detalles de la tarjeta, por favor reinténtalo en unos momentos.",retrieve_card_fail:"Ha sido imposible recuperar las tarjetas existentes.",change_product_plan_failed:"La modificación de producto/plan no ha sido realizada satisfactoriamente.",reset_validation_failed:"La validación del valor {1} para el campo {0} no es correcta.",reset_key_used:"Lo sentimos, este enlace ya ha caducado.",attribute_validation_failed_change_password:"Se ha producido un error de validación de uno o más campos.",general_attributes:"Los campos [{0}] siguientes son incorrectos o no están informados. Estos campos son obligatorios para uno o más servicios asociados a tu cuenta.",general_attribute:"El campo [{0}] siguiente es incorrecto o no está informado. Este campo es obligatorio para uno o más servicios asociados a tu cuenta.",product_not_found:"Producto no encontrado.",duplicated_purchase:"No es posible completar esta suscripción debido a que ya existe",not_logged_in:"Este widget precisa que inicies sesión",undefined_order_id:"La orden de compra no ha sido creada.",create_payment_failed:"Se ha producido un error con el pago, por favor reinténtalo de nuevo.",invalid_request:"Petición invalida",field_required:"Campo requerido",field_invalid:"Campo inválido",field_length6:"Longitud incorrecta, se precisan 6 caracteres.",field_length8:"Longitud incorrecta, se precisan 8 caracteres.",invalid_bank_details:"Los datos de la cuenta bancaria no son correctos",password_length:"La contraseña ha de tener una longitud mínima de 6 carácteres.",identifier_mismatch:"El correo electrónico no coincide.",delivery_address_required:"Dirección de entrega no informada",billing_address_required:"Dirección de facturación no informada",authentication_values_required:"Uno o más campos de autenticación requieren ser informados: {0}",personal_details_required:"Las caracteristicas personales siguientes deben ser informadas: {0}",attributes_required:"Introduce los siguientes datos para continuar: {0}",attribute_validation_failed:"Uno o más atributos con formato incorrecto: {0}.",not_robot:"Por favor, demuestra que no eres un robot",invalid_form:"Algunos datos no son válidos o están incompletos, por favor comprueba tu información",invalid_profile:"Perfil no válido: Revisa los campos de tu perfil",invalid_delivery_country:"Has introducido un país de envío no válido",no_products_selected:"Debes seleccionar un producto",incomplete_name:"El campo Nombre está incompleto",social_email_address_in_use:"Correo en uso. Por favor, utiliza un email distinto",require_uniquie_profile_and_realm:"¡El {0} está ya en uso! Por favor, utiliza uno distinto.",duplicate_identifiers_found:"¡El {0} está ya en uso! Por favor, utiliza uno distinto.",duplicated_beneficiary:"Este beneficiario ya ha sido añadido.",beneficiary_limit_reached:"El número máximo de beneficiarios ha sido alcanzado.",grant_limit_reached:"El número máximo de beneficiarios ha sido alcanzado.",add_beneficiary_fail:"Se ha producido un error al añadir un beneficiario, por favor reinténtalo en unos momentos.",avatar_wrong_format:"El formato de la imagen no es válido (png, gif, jpg, jpeg)",avatar_max_size:"Tienes que subir una imagen de un tamaño menor que ",generic:"La solicitud no se ha podido procesar, por favor inténtalo más tarde",invalid_format:"Formato inválido"},productSelection:{headerNote:"Select plan translated",cancel:"",text:{normal:"",boosted:"LA PREFERIDA DE LOS LECTORES"},select:"SUSCRÍBETE",paymentPlansHeader:""},plan:{frequency:{NONE:"Pago único",DAY1:"Diario",WEEK1:"Semanal",MONTH1:"Mes",MONTH3:"Trimestral",MONTH6:"Semestral",MONTH12:"Año",MONTH18:"Sesquiennial"}},stripe:{cardNumber:"Número de tarjeta",cardExpiry:"Caducidad",cardExpiryDate:"Caducidad",cardCVC:"CVC",submitPayment:"Pagar",paymentSuccessful:"Pago exitoso",transactionSecurity:"Esta transacción está protegida con encriptación SSL",securityMessage:"Protegida con encriptación SSL",ideal:{name:"Name","name.placeholder":"Jenny Rosen",bank:"iDEAL Bank"},sepa:{authorization:"By providing your IBAN and confirming this payment, you are authorizing [company name] and Stripe, our payment service provider, to send instructions to your bank to debit your account and your bank to debit your account in accordance with those instructions. You are entitled to a refund from your bank under the terms and conditions of your agreement with your bank. A refund must be claimed within 8 weeks starting from the date on which your account was debited."},ariaLabels:{submitPayment:"Submit Payment",paymentForm:"Payment Form"}},grant:{productName:"Producto",actions:"Estado",noRecordsInvitationKeySpecified:"Sin ninguna invitación",accept:"Aceptar",decline:"Rechazar",ACCEPTED:"Aceptada",DECLINED:"Rechazada",PENDING:"Pendiente"},purchase:{status:{ACTIVE:"Activa",ACTIVE_PENDING:"Activa",CANCEL_PENDING:"Renovación Cancelada",PENDING:"Pendiente"},existingCard:{loadingCards:"Searching for existing cards...",selectCardText:"Utilizar los datos de mi tarjeta guardada",selectCard:{ariaLabel:"Selected card"},info:{cardNumber:"Card Number",cardExpiryDate:"Expiry Date"}},newCard:{selectFromExistingBtn:{label:"Select Existing Card",ariaLabel:"Choose from Existing Card"},newCardButton:{label:"Cambiar",ariaLabel:"Cambiar"}}},purchases:{productName:"Producto",startDate:"Fecha de inicio",endDate:"Fecha de renovación",frequency:"Frecuencia",status:"Estado",nextPaymentDate:"Fecha de renovación",trialPrice:"Trial Price",finalPrice:"Precio final",noPurchases:"Sin ninguna suscripción",actions:"Acciones",actionsButton:{label:"Gestionar",action:{displayBeneficiaries:"Beneficiarios",addBeneficiary:"Añadir beneficiario",changeCard:"Cambiar tarjeta",cancelPurchase:"Cancelar suscripción",applyOffer:"Acepto la oferta",changeProductPlan:"Cambiar producto/plan"}},numberBeneficiaries:"Beneficiarios",notification:{title:"Añadir beneficiario",email:"E-mail",emailPlaceholder:"Introducir e-mail",emailHelp:"Introduce el e-mail del beneficiario a ser invitado.",emailRequired:"El e-mail es requerido.",emailInvalid:"El e-mail es inválido.",message:"Mensaje para el beneficiario",add:"Añadir",cancel:"Cancelar",close:"Cerrar",success:"El beneficiario recibirá tu invitación por correo electrónico.",beneficiaryMessageHelp:"Introduce el mensaje para el beneficiario a ser invitado.",beneficiaryMessageRequired:"El mensaje para el beneficiario es requerido."},beneficiaries:{title:"Beneficiarios",email:"E-mail",status:"Estado",action:"Acción",remove:"Eliminar",cancel:"Cerrar",noBeneficiaries:"Ningún beneficiario"},confirmDialog:{message:"¿Estás seguro que quieres eliminar este beneficiario?",confirm:"Confirmar",cancel:"Cancelar"},changeCard:{action:"Cambiar tarjeta",title:"Modificar tarjeta",securityMessage:"Protegido con encriptación SSL",availableCard:{label:"Tarjeta actual",cardNumber:"Número de tarjeta",cardExpiryDate:"Caducidad"},newCard:{label:"Nueva tarjeta",buttonLabel:"Nueva tarjeta",save:"Guardar"},confirm:"Guardar",close:"Cerrar",success:"Tarjeta actualizada correctamente"},cancel:{action:"Cancelar suscripción",success:"La suscripción ha sido cancelada. Podrás disfrutar de ella hasta el final del periodo actual.",title:"Cancelar suscripción",cancelling:"Cancelando la suscripción...",message:"",confirm:"Cancelar suscripción",close:"Cerrar",select_a_reason:"Selecciona una razón",reason_for_cancellation:"Razón para cancelar la suscripción",select_an_offer:"¿Estás seguro que quieres cancelar esta suscripción? Porque nos importas, acepta nuestra oferta <b>No te vayas todavía</b>.",applying_offer:"Aplicando oferta...",offer_success:"Oferta aplicada correctamente"},changeProductPlan:{title:"Cambiar producto/plan",message:"Seleccionar un nuevo producto/plan",upgrading:"Modificando la suscripción...",select_new_product:"Seleccione producto",select_new_plan:"Seleccione plan",confirm:"Confirme el cambio de producto/plan",success:"El nuevo producto/plan entrará en vigor al final del periodo actual."}},placeholder:{cardNumber:"4509 9535 6623 3704",securityCode:"123",cardExpirationMonth:"12",cardExpirationYear:"2022",cardholderName:"APRO",docNumber:"12345678"},error:{205:"Enter your card number",208:"Select a month",209:"Select a year",212:"Enter your identification type",213:"Enter your identification subtype",214:"Enter your identification number",220:"Enter your issuing bank",221:"Enter your full name",224:"Enter the security code",E301:"There's something wrong with that number. Please reenter",E302:"Check the security code",316:"Enter a valid name",322:"Check your identification type",323:"Check your identification type",324:"Check your identification number",325:"Check the date",326:"Check the date",securityCode:"Enter a valid security code",cardNumber:"Enter a valid card number",default:"Invalid parameters"}}},registration_attr:{"correo_electrónico":{confirm:{label:"Repetir e-mail",placeholder:"Repetir e-mail"}}},gender:{male:"Masculino",female:"Femenino",unknown:"Prefiero no informar"},custom:{cancel_subscription:"Cancela cuando quieras",language:{catalan:"Catalán",spanish:"Castellano"}}},ca:{ev:{widgets:{orseparator:"O AMB EL TEU CORREU ELECTRÒNIC",userProfileUpdateSuccess:"El teu compte ha estat actualitzat correctament.",social:{buttons:{login:{label:"Continuar amb",description:"O AMB LA TEVA XARXA SOCIAL"},register:{label:"Continuar amb"}}},popup:{blocked:{title:"Hem conectat els teus comptes",text:"A partir d'ara podràs accedir amb qualsevol dels teus comptes.",button:"Continuar"}},registration:{buttons:{submit:"Continuar",cancel:""}},login:{forgotPassword:"Has oblidat la teva contrasenya?",buttons:{ok:"Continuar",cancel:""}},userIdentifier:{buttons:{submit:"Continuar",cancel:""}},forgotPassword:{buttons:{submit:"Continuar"}},changePassword:{title:"Canviar contrasenya",buttons:{submit:"Desar Canvis",cancel:""}},changepassword:{success:"La contrasenya ha estat modificada."},resetPassword:{buttons:{cancel:""}},resetpassword:{success:"La contrasenya ha estat modificada."},editProfile:{buttons:{submit:"Desar Canvis",cancel:""}},ev_date:{january:"Gener",february:"Febrer",march:"Març",april:"Abril",may:"Maig",june:"Juny",july:"Juliol",august:"Agost",september:"Setembre",october:"Octubre",november:"Novembre",december:"Desembre",undef_day:"",undef_month:"",undef_year:""},registration_attr:{password:{label:"Afegir una contrasenya",placeholder:"Afegir una contrasenya"}},productSummary:{productName:"Subscripció",productDescription:"Descripció",productFrequency:"Periodicitat",deliveryCost:"Cost d'entrega",productPrice:"Import",totalProductPrice:"Import total",totalAmount:"Total",checkout:"Pagament",noProductsSelected:"No s'ha seleccionat cap producte!",ariaLabels:{removeItemFromBasket:"Elimina l'element de la cistella",checkoutPurchaseBasket:"Cistella de compra"}},attr:{password:{label:"Escriu la contrasenya",placeholder:"Escriu la contrasenya",new:{label:"Escriu la contrasenya nova",placeholder:"Escriu la contrasenya nova"},confirm:{label:"Confirma la contrasenya nova",placeholder:"Confirma la contrasenya nova"}},"contraseña":{label:"Afegir una contrasenya",placeholder:"Afegir una contrasenya"},email_address:{label:"Correu electrònic",placeholder:"Correu electrònic"},display_name:{label:"Nom d'usuari",placeholder:"Nom d'usuari"},first_name:{label:"Nom",placeholder:"Nom"},last_name_first:{label:"Primer cognom",placeholder:"Primer cognom"},last_name_second:{label:"Segon cognom",placeholder:"Segon cognom"},gender:{label:"Gènere",placeholder:"Gènere"},birth_date:{label:"Data de naixement",placeholder:"Data de naixement"},phone_number:{label:"Telèfon",placeholder:"Telèfon"},language:{label:"Idioma de comunicació",placeholder:"Idioma de comunicació"},address2_postcode:{label:"Codi postal",placeholder:"Codi postal"}},errors:{no_social_network_linked:"No existeix cap xarxa social vinculada.",all_social_networks_linked:"Totes les xarxes socials estan vinculades!",checkout:"Hi ha hagut algun problema durant del procés, si us plau intenta-ho de nou",payment:"Hi ha hagut algun problema amb el pagament, si us plau intenta-ho de nou",order:"Hi ha hagut algun problema durant del procés, si us plau intenta-ho de nou",direct_debit:"Les dades de la targeta són incorrectes",identifiers_not_found:"No hem trobat el compte, si us plau crea un nou compte.",duplicate_user_profile:"Correu en ús! Si us plau, utilitza un email diferent o introdueix la teva contrasenya actual i vincula el compte.",user_linked_with_different_account:"El teu compte de {0} està ja vinculat amb un altre.",identifiers_invalid:"Contrasenya incorrecta.",account_locked:"El teu compte està bloquejat perquè has esgotat el límit d'intents establert, si us plau intenta-ho de nou més tard.",account_suspended:"El teu compte ha estat suspès, si us plau posa't en contacte amb Atenció al Client.",user_already_linked_with_same_social_network:"El teu compte ja està vinculat al compte {1} amb el correu {0}. Si us plau desvincula {1} abans de vincular-lo amb una altre {1} usuari.",user_profile_inactive:"El teu compte encara no ha estat activat. <a class=\resend-activation ng-click=\resendActivation()>Re-enviar correu</a>",unlink_user_social_network:"No és possible desvincular la teva xarxa social",user_profile_identifiers_not_found:"No existeix un compte amb aquest email. Prova amb un altre email o crea un compte.",nothing_selected:"Si us plau, selecciona una opció per a continuar",technical_difficulties:"Ho sentim, estem experimentant problemes tècnics, si us plau torna-ho a intentar en uns moments.",change_card_failed:"No ha estat possible actualitzar els detalls de la targeta, si us plau torna-ho a intentar en uns moments.",retrieve_card_fail:"Ha estat impossible recuperar les targetes existents.",change_product_plan_failed:"No ha estat possible realitzar la modificació del producte/pla ",reset_validation_failed:"La validació del valor {1} per al camp {0} no és correcte.",reset_key_used:"Ho sentim. El valor {0} no ha estat trobat o ja està en ús.",attribute_validation_failed_change_password:"S'ha produït un error de validació d'un o més camps.",general_attributes:"Els camps [{0}] següents són incorrectes o no estan informats. Aquests camps són obligatoris per a un o més serveis associats al teu compte.",general_attribute:"El camp [{0}] següent és incorrecte o no està informat. Aquest camp és obligatori per a un o més serveis associats al teu compte.",product_not_found:"No ha estat possible trobar el producte",duplicated_purchase:"No ha estat possible finalitzar la compra perquè ja existeix",not_logged_in:"Aquest widget precisa que iniciïs sessió",undefined_order_id:"L'ordre de compra no ha estat creada.",create_payment_failed:"S'ha produït un error amb el pagament, si us plau torna-ho a intentar.",invalid_request:"Petició invàlida",field_required:"Camp obligatori",field_invalid:"Camp invàlid",field_length6:"Longitud incorrecta, es precisen 6 caràcters.",field_length8:"Longitud incorrecta, es precisen 8 caràcters.",invalid_bank_details:"Les dades bancàries facilitades són incorrectes",password_length:"La contrasenya ha de tenir una longitud mínima de 6 caràcters.",identifier_mismatch:"El correu electrònic no coincideix.",delivery_address_required:"Adreça de lliurament no informada",billing_address_required:"Adreça de facturació no informada",authentication_values_required:"Un o més camps d'autenticació requereixen ser informats: {0}",personal_details_required:"Les característiques personals següents han de ser informades: {0}",attributes_required:"Introdueix les següents dades per a continuar: {0}",attribute_validation_failed:"Un o més atributs amb format incorrecte: {0}.",not_robot:"Si us plau, demostra que no ets un robot",invalid_form:"Algunes dades són invàlides o estan incompletes, si us plau comprova les dades informades",invalid_profile:"Perfil invàlid: Revisa els camps del teu perfil",invalid_delivery_country:"Has introduït un país de lliurament invàlid",no_products_selected:"Has de seleccionar un producte",incomplete_name:"El camp 'Nom' està incomplet",social_email_address_in_use:"Correu en ús. Si us plau, utilitza un correu electrònic diferent",require_uniquie_profile_and_realm:"El {0} està ja en ús! Si us plau, utilitza un diferent.",duplicate_identifiers_found:"El {0} està ja en ús! Si us plau, utilitza un diferent.",duplicated_beneficiary:"Aquest beneficiari ja ha estat afegit.",beneficiary_limit_reached:"El nombre màxim de beneficiaris ha arribat al seu límit.",grant_limit_reached:"El nombre màxim de beneficiaris ha arribat al seu límit.",add_beneficiary_fail:"S'ha produït un error en afegir un beneficiari, si us plau torna-ho a intentar en uns moments.",avatar_wrong_format:"El format de la imatge no és correcte (png, gif, jpg, jpeg)",avatar_max_size:"Has de pujar una imatge d'una mida menor que ",generic:"La sol·licitud no s'ha pogut processar, si us plau intenta-ho més tard",invalid_format:"Format invàlid"},productSelection:{headerNote:"Selecciona el pla traduït",cancel:"",text:{normal:"",boosted:"LA PREFERIDA DELS LECTORS"},select:"SUBSCRIU-TE",paymentPlansHeader:""},plan:{frequency:{NONE:"Pagament únic",DAY1:"Diari",WEEK1:"Setmanal",MONTH1:"Mensual",MONTH3:"Trimestral",MONTH6:"Semestral",MONTH12:"Anual",MONTH18:"Sesquienal"}},stripe:{cardNumber:"Número de targeta",cardExpiry:"Caducitat",cardExpiryDate:"Caducitat",cardCVC:"CVC",submitPayment:"Pagar",paymentSuccessful:"Pagament exitós",transactionSecurity:"Aquesta transacció està protegida amb xifratge SSL",securityMessage:"Protegida amb xifratge SSL",ideal:{name:"Nom","name.placeholder":"Jenny Rosen",bank:"iDEAL Bank"},sepa:{authorization:"Proporcionant el vostre IBAN i confirmant aquest pagament, està autoritzant a [company name] i a Stripe, el nostre proveïdor de serveis de pagament, enviar instruccions al vostre banc per emetre el pagament. Té dret a un reemborsament del seu banc en virtut dels termes i condicions del seu acord amb el seu banc. Per reclamar un reemborsament, és imprescindible fer-ho en un termini màxim de 8 setmanes a partir de la data en què es va fer el pagament."},ariaLabels:{submitPayment:"Enviar pagament",paymentForm:"Formulari de pagament"}},grant:{productName:"Producte",actions:"Estat",noRecordsInvitationKeySpecified:"No tens cap invitació",accept:"Acceptar",decline:"Rebutjar",ACCEPTED:"Acceptada",DECLINED:"Rebutjada",PENDING:"Pendent"},purchase:{status:{ACTIVE:"Activa",ACTIVE_PENDING:"Activa",CANCEL_PENDING:"Renovació Cancel·lada",PENDING:"Pendent"}},purchases:{productName:"Producte",startDate:"Data d'inici",endDate:"Data de renovació",frequency:"Freqüència",status:"Estat",nextPaymentDate:"Data de renovació",trialPrice:"Preu de la subscripció de prova",finalPrice:"Preu final",noPurchases:"No tens cap subscripció",actions:"Accions",actionsButton:{label:"Gestionar",action:{displayBeneficiaries:"Beneficiaris",addBeneficiary:"Afegir beneficiari",changeCard:"Canviar targeta",cancelPurchase:"Cancel·lar subscripció",applyOffer:"Accepto l'oferta",changeProductPlan:"Canviar producte/pla"}},numberBeneficiaries:"Beneficiaris",notification:{title:"Afegir beneficiari",email:"E-mail",emailPlaceholder:"Introduir e-mail",emailHelp:"Introdueix l'e-mail del beneficiari convidat.",emailRequired:"L'e-mail és obligatori.",emailInvalid:"L'e-mail és invàlid.",message:"Missatge pel beneficiari",add:"Afegir",cancel:"Cancel·lar",close:"Tancar",success:"El beneficiari rebrà la teva invitació per correu electrònic.",beneficiaryMessageHelp:"Introdueix el missatge per convidar al beneficiari",beneficiaryMessageRequired:"El missatge pel beneficiari és obligatori"},beneficiaries:{title:"Beneficiaris",email:"E-mail",status:"Estat",action:"Acció",remove:"Eliminar",cancel:"Tancar",noBeneficiaries:"Cap beneficiari"},confirmDialog:{message:"Estàs segur que vols eliminar aquest beneficiari?",confirm:"Confirmar",cancel:"Cancel·lar"},changeCard:{action:"Canviar targeta",title:"Modificar targeta",securityMessage:"Protegit amb xifratge SSL",availableCard:{label:"targeta actual",cardNumber:"Número de targeta",cardExpiryDate:"Caducitat"},newCard:{label:"Nova targeta",buttonLabel:"Nova targeta",save:"Desar"},confirm:"Desar",close:"Tancar",success:"Targeta actualitzada correctament"},cancel:{action:"Cancel·lar la subscripció",success:"La subscripció ha estat cancel·lada. Podràs gaudir d'ella fins al final del període actual.",title:"Cancel·lar la subscripció",cancelling:"Cancel·lant la subscripció...",message:"Estàs segur que vols cancel·lar aquesta subscripció?",confirm:"Cancel·lar subscripció",close:"Tancar",select_a_reason:"Selecciona un motiu",reason_for_cancellation:"Motiu per a cancel·lar la subscripció",select_an_offer:"Estàs segur que vols cancel·lar aquesta subscripció? Perquè ens importes, accepta la nostra oferta. <b>No et vagis encara</b>.",applying_offer:"Aplicant oferta...",offer_success:"Oferta aplicada correctament"},changeProductPlan:{title:"Canviar producte/pla",message:"Seleccionar un nou producte/pla",upgrading:"Modificant la subscripció...",select_new_product:"Selecciona un nou producte",select_new_plan:"Selecciona un nou pla",confirm:"Confirma el canvi de producte/pla",success:"El nou producte/pla entrarà en vigor al final del període actual."}},placeholder:{cardNumber:"4509 9535 6623 3704",securityCode:"123",cardExpirationMonth:"12",cardExpirationYear:"2022",cardholderName:"APRO",docNumber:"12345678"},error:{205:"Introduïu el número de la vostra targeta",208:"Selecciona el mes",209:"Selecciona l'any",212:"Introduïu el vostre tipus d’identificació",213:"Introduïu el vostre subtipus d’identificació",214:"Introduïu el vostre número d’identificació",220:"Introduïu el vostre banc emissor",221:"Introdueix el teu nom complet",224:"Introdueix el codi de seguretat",E301:"Hi ha quelcom erroni amb aquest número. Si us plau, torna a entrar",E302:"Comprova el codi de seguretat",316:"Introdueix un nom vàlid",322:"Comprova el tipus d'identificació",323:"Comprova el tipus d'identificació",324:"Comproveu el número d'identificació",325:"Comprova la data",326:"Comprova la data",securityCode:"Introdueix un codi de seguretat vàlid",cardNumber:"Introdueix un número de targeta vàlid",default:"Paràmetres invàlids"}}},registration_attr:{password:{label:"Contrasenya",placeholder:"Contrasenya"},email_address:{label:"Correu electrònic",placeholder:"Correu electrònic"},"correu_electrònic":{confirm:{label:"Repetir el correu electrònic",placeholder:"Repetir el correu electrònic"}}},gender:{male:"Home",female:"Dona",unknown:"Prefereixo no informar-ne"},custom:{cancel_subscription:"Cancel·la quan vulguis",language:{catalan:"Català",spanish:"Castellà"}}}}[a]};return{init:function(){var a=ev.accounts.getMultitenantScriptConfig()||{};a.defaultLanguage=a.defaultLanguage||"es";var t={serviceName:"my_account",realmName:"default_realm",icDomain:e,secureMode:!1,ssoCookieDomain:a.cookie.domain};EV.WM.init({brand:"empty"}),EV.Core.init(t),EV.PM.init({pmDomain:i,version:2,stripeKey:a.stripe.key}),EV.Social.init({icDomain:e,serviceName:"social",realmName:"default_realm",redirectUri:a.api.url+"ev/oauth/redirect",socialAttributeMapping:{email_address:"email",first_name:"firstName",last_name_first:"lastName"},socialKeys:{google:a.social.google.key,facebook:a.social.facebook.key,apple:a.social.apple.key}}),ev.events(),EV.Translate.addTranslationTable("es",n("es")),EV.Translate.addTranslationTable("ca",n("ca")),EV.Translate.setActiveLanguage(a.defaultLanguage);var o=n(a.defaultLanguage);EV.Widgets=EV.Widgets||{},EV.Widgets.Display={gender:{type:"radiobutton",values:[{caption:o.gender.male,value:"MALE"},{caption:o.gender.female,value:"FEMALE"},{caption:o.gender.unknown,value:"UNKNOWN"}]},language:{type:"dropdown",values:[{caption:"Selecciona un idioma",value:""},{caption:"Castellano",value:"ES"},{caption:"Català",value:"CA"}]},address2_country:{type:"dropdown",values:[{caption:"Selecciona un país",value:""},{caption:"España",value:"ES"},{caption:"Afganistán",value:"AF"},{caption:"Albania",value:"AL"},{caption:"Alemania",value:"DE"},{caption:"Andorra",value:"AD"},{caption:"Angola",value:"AO"},{caption:"Antigua y Barbuda",value:"AG"},{caption:"Arabia Saudita",value:"SA"},{caption:"Argelia",value:"DZ"},{caption:"Argentina",value:"AR"},{caption:"Armenia",value:"AM"},{caption:"Australia",value:"AU"},{caption:"Austria",value:"AT"},{caption:"Azerbaiyán",value:"AZ"},{caption:"Bahamas",value:"BS"},{caption:"Bangladés",value:"BD"},{caption:"Barbados",value:"BB"},{caption:"Baréin",value:"BH"},{caption:"Bélgica",value:"BE"},{caption:"Belice",value:"BZ"},{caption:"Benín",value:"BJ"},{caption:"Bielorrusia",value:"BY"},{caption:"Birmania",value:"MM"},{caption:"Bolivia",value:"BO"},{caption:"Bosnia-Herzegovina",value:"BA"},{caption:"Botsuana",value:"BW"},{caption:"Brasil",value:"BR"},{caption:"Brunéi",value:"BN"},{caption:"Bulgaria",value:"BG"},{caption:"BurkinaFaso",value:"BF"},{caption:"Burundi",value:"BI"},{caption:"Bután",value:"BT"},{caption:"CaboVerde",value:"CV"},{caption:"Camboya",value:"KH"},{caption:"Camerún",value:"CM"},{caption:"Canadá",value:"CA"},{caption:"Catar",value:"QA"},{caption:"Chad",value:"TD"},{caption:"Chile",value:"CL"},{caption:"China",value:"CN"},{caption:"Chipre",value:"CY"},{caption:"Colombia",value:"CO"},{caption:"Comoras",value:"KM"},{caption:"Congo",value:"CG"},{caption:"Corea del Norte",value:"KP"},{caption:"Corea del Sur",value:"KR"},{caption:"Costa de Marfil",value:"CI"},{caption:"Costa Rica",value:"CR"},{caption:"Croacia",value:"HR"},{caption:"Cuba",value:"CU"},{caption:"Dinamarca",value:"DK"},{caption:"Dominica",value:"DM"},{caption:"Ecuador",value:"EC"},{caption:"Egipto",value:"EG"},{caption:"ElSalvador",value:"SV"},{caption:"Emiratos Árabes Unidos",value:"AE"},{caption:"Eritrea",value:"ER"},{caption:"Eslovaquia",value:"SK"},{caption:"Eslovenia",value:"SI"},{caption:"Estados Unidos",value:"US"},{caption:"Estonia",value:"EE"},{caption:"Etiopía",value:"ET"},{caption:"Filipinas",value:"PH"},{caption:"Finlandia",value:"FI"},{caption:"Fiyi",value:"FJ"},{caption:"Francia",value:"FR"},{caption:"Gabón",value:"GA"},{caption:"Gambia",value:"GM"},{caption:"Georgia",value:"GE"},{caption:"Ghana",value:"GH"},{caption:"Granada",value:"GD"},{caption:"Grecia",value:"GR"},{caption:"Guatemala",value:"GT"},{caption:"Guinea",value:"GN"},{caption:"Guinea Ecuatorial",value:"GQ"},{caption:"Guinea-Bisáu",value:"GW"},{caption:"Guyana",value:"GY"},{caption:"Haití",value:"HT"},{caption:"Honduras",value:"HN"},{caption:"Hungría",value:"HU"},{caption:"India",value:"IN"},{caption:"Indonesia",value:"ID"},{caption:"Irak",value:"IQ"},{caption:"Irán",value:"IR"},{caption:"Irlanda",value:"IE"},{caption:"Islandia",value:"IS"},{caption:"Islas Marshall",value:"MH"},{caption:"Islas Salomón",value:"SB"},{caption:"Israel",value:"IL"},{caption:"Italia",value:"IT"},{caption:"Jamaica",value:"JM"},{caption:"Japón",value:"JP"},{caption:"Jordania",value:"JO"},{caption:"Kazajistán",value:"KZ"},{caption:"Kenia",value:"KE"},{caption:"Kirguistán",value:"KG"},{caption:"Kiribati",value:"KI"},{caption:"Kosovo",value:"-"},{caption:"Kuwait",value:"KW"},{caption:"Laos",value:"LA"},{caption:"Lesoto",value:"LS"},{caption:"Letonia",value:"LV"},{caption:"Líbano",value:"LB"},{caption:"Liberia",value:"LR"},{caption:"Libia",value:"LY"},{caption:"Liechtenstein",value:"LI"},{caption:"Lituania",value:"LT"},{caption:"Luxemburgo",value:"LU"},{caption:"Macedonia",value:"MK"},{caption:"Madagascar",value:"MG"},{caption:"Malasia",value:"MY"},{caption:"Malaui",value:"MW"},{caption:"Maldivas",value:"MV"},{caption:"Malí",value:"ML"},{caption:"Malta",value:"MT"},{caption:"Marruecos",value:"MA"},{caption:"Mauricio",value:"MU"},{caption:"Mauritania",value:"MR"},{caption:"México",value:"MX"},{caption:"Micronesia",value:"FM"},{caption:"Moldavia",value:"MD"},{caption:"Mónaco",value:"MC"},{caption:"Mongolia",value:"MN"},{caption:"Montenegro",value:"ME"},{caption:"Mozambique",value:"MZ"},{caption:"Namibia",value:"NA"},{caption:"Nauru",value:"NR"},{caption:"Nepal",value:"NP"},{caption:"Nicaragua",value:"NI"},{caption:"Níger",value:"NE"},{caption:"Nigeria",value:"NG"},{caption:"Noruega",value:"NO"},{caption:"Nueva Zelanda",value:"NZ"},{caption:"Omán",value:"OM"},{caption:"PaísesBajos",value:"NL"},{caption:"Pakistán",value:"PK"},{caption:"Palaos",value:"PW"},{caption:"Palestina",value:"PS"},{caption:"Panamá",value:"PA"},{caption:"Papúa Nueva Guinea",value:"PG"},{caption:"Paraguay",value:"PY"},{caption:"Perú",value:"PE"},{caption:"Polonia",value:"PL"},{caption:"Portugal",value:"PT"},{caption:"ReinoUnido",value:"GB"},{caption:"República Centroafricana",value:"CF"},{caption:"República Checa",value:"CZ"},{caption:"República Democrática del Congo",value:"CD"},{caption:"República ominicana",value:"DO"},{caption:"Ruanda",value:"RW"},{caption:"Rumania",value:"RO"},{caption:"Rusia",value:"RU"},{caption:"Samoa",value:"WS"},{caption:"San Cristóbal y Nieves",value:"KN"},{caption:"San Marino",value:"SM"},{caption:"San Vicente y las Granadinas",value:"VC"},{caption:"Santa Lucía",value:"LC"},{caption:"Santo Tomé y Príncipe",value:"ST"},{caption:"Senegal",value:"SN"},{caption:"Serbia",value:"RS"},{caption:"Seychelles",value:"SC"},{caption:"Sierra Leona",value:"SL"},{caption:"Singapur",value:"SG"},{caption:"Siria",value:"SY"},{caption:"Somalia",value:"SO"},{caption:"SriLanka",value:"LK"},{caption:"Suazilandia",value:"SZ"},{caption:"Sudáfrica",value:"ZA"},{caption:"Sudán",value:"SD"},{caption:"Sudán del Sur",value:"SS"},{caption:"Suecia",value:"SE"},{caption:"Suiza",value:"CH"},{caption:"Surinam",value:"SR"},{caption:"Tailandia",value:"TH"},{caption:"Taiwán",value:"TW"},{caption:"Tanzania",value:"TZ"},{caption:"Tayikistán",value:"TJ"},{caption:"Timor Oriental",value:"TL"},{caption:"Togo",value:"TG"},{caption:"Tonga",value:"TO"},{caption:"Trinidad y Tobago",value:"TT"},{caption:"Túnez",value:"TN"},{caption:"Turkmenistán",value:"TM"},{caption:"Turquía",value:"TR"},{caption:"Tuvalu",value:"TV"},{caption:"Ucrania",value:"UA"},{caption:"Uganda",value:"UG"},{caption:"Uruguay",value:"UY"},{caption:"Uzbekistán",value:"UZ"},{caption:"Vanuatu",value:"VU"},{caption:"Vaticano",value:"VA"},{caption:"Venezuela",value:"VE"},{caption:"Vietnam",value:"VN"},{caption:"Yemen",value:"YE"},{caption:"Yibuti",value:"DJ"},{caption:"Zambia",value:"ZM"},{caption:"Zimbabue",value:"ZW"}]}},function(){if(ev.accounts.isUserAuthenticated()){const a=EV.util.getEVSession(),e=ev.accounts.getUser().guid;if(!e||a&&a.guid===e)return;ev.storage.remove("local","evolok:ev_session",!0);try{EV.Core.refreshSSOSession()}catch(a){}}}()},cleanupEvWidgetStorage:function(){ev.storage.remove("local","evolok:ev_session",!0),ev.storage.remove("session","evolok:ev_profile",!0),ev.storage.remove("session","evolok:ev_identifier",!0)}}}();
ev.cookie=function(){var e=function(e,n,t,o,i){var r=t?"; expires="+new Date((new Date).getTime()+1e3*t).toGMTString():"";document.cookie=e+"="+encodeURIComponent(n)+r+(void 0===i||i?";path="+(i||"/"):"")+(o?";domain="+o:"")},n=function(){for(var e={},n=document.cookie.split("; "),t=0;t<n.length;t++){var o=n[t].split("=");try{e[o[0]]=decodeURIComponent(o[1])}catch(e){}}return e};return{set:e,get:function(e){return n()[e]},remove:function(n,t,o){e(n,"",-1,t,o)},map:n}}();
ev.customerHelp=function(){var e=null;const t={id:"URL"},i={id:"FORM"},n=function(e){if(!ev.customerHelp.items)return null;const t=ev.customerHelp.items.find((function(t){return t.id===e}));return t||null},r=function(e,t,i){ev.utils.find(document,"[data-paywall-screen-id='"+e+"'] [data-paywall-screen='confirm'] .btn.btn-primary").once(["click"],(function(e){try{const e=s(t)[i];if(!e.value)throw new Error;window.location=e.external?e.value:ev.accounts.getMultitenantScriptConfig().base.url+e.value}catch(e){ev.forms.utils.error(ev.commons.getErrorMessages().generic)}})),ev.screens.registry[e].transition("confirm")},s=function(e){var t=null;try{const i=ev.accounts.getGGSite().toUpperCase();(t=e.url[i])||(t=e.url.LV)}catch(e){}return t},a=function(e){try{const t=window.location.href+ev.utils.formatParams({action:e});ev.commons.referrer.save(t),ev.accounts.reloadToLogin({ignoreSource:!0})}catch(e){ev.forms.utils.error(ev.commons.getErrorMessages().generic)}},o=function(e,c,l,d){try{const p=e.getAttribute(c);if(!p)throw new Error;const m=n(p);if(!m)throw new Error;const f=ev.utils.find(document,"[data-paywall-screen-id='"+d.id+"'] [data-paywall-screen]:not([data-paywall-screen='items'])"+(l&&l.description?":not([data-paywall-screen='childs'])":"")+" .evl-profile-title");if(f.empty(),f.append(l&&l.description?l.description+" "+m.description.toLowerCase():m.description),m.childs&&m.childs.length>0){const e=[];if(m.childs.forEach((function(t){const i=n(t);i&&e.push(i)})),0===e.length)throw new Error;const t=ev.utils.find(document,"[data-paywall-screen-id='"+d.id+"'] [data-paywall-screen='childs'] ."+d.id+"__items");var u="";return e.forEach((function(e){u+=`\n                        <div class="${d.id}__item" data-selection-id="${e.id}">\n                            ${e.description}\n                        </div>\n                    `})),t.empty(),t.append(u),ev.utils.find(t.getFirst(),"[data-selection-id]").on(["click"],(function(e,t){o(t,"data-selection-id",m,d)})),void ev.screens.registry[d.id].transition("childs")}if((m.requireLogin||m.requireSubscription)&&!ev.accounts.isUserAuthenticated())return ev.utils.find(document,"[data-paywall-screen-id='"+d.id+"'] [data-paywall-screen='unlogged'] .btn.btn-primary").once(["click"],(function(e){a(l?l.id:p)})),void ev.screens.registry[d.id].transition("unlogged");if(m.requireSubscription&&!ev.accounts.getUser().hasActiveSubscription())return ev.utils.find(document,"[data-paywall-screen-id='"+d.id+"'] [data-paywall-screen='subscription-type'] input[name='item'],[data-paywall-screen-id='"+d.id+"'] [data-paywall-screen='link-P'] input[name='item'],[data-paywall-screen-id='"+d.id+"'] [data-paywall-screen='link-E'] input[name='item']").val(m.id),ev.utils.find(document,"[data-paywall-screen-id='"+d.id+"'] [data-paywall-screen='subscription-type'] input[name='link']").val("true"),void ev.screens.registry[d.id].transition("non-subscriber");switch(m.action){case t.id:const e=s(m)?Object.keys(s(m)):[];if(0===e.length)throw new Error;if(1===e.length)return void r(d.id,m,e[0]);if(!e.includes("E")||!e.includes("P"))throw new Error;ev.utils.find(document,"[data-paywall-screen-id='"+d.id+"'] [data-paywall-screen='subscription-type'] input[name='item']").val(m.id),ev.utils.find(document,"[data-paywall-screen-id='"+d.id+"'] [data-paywall-screen='subscription-type'] input[name='link']").val("false"),ev.screens.registry[d.id].transition("subscription-type");break;case i.id:const n=m.form;if(!n)throw Error();if(!ev.utils.find(document,"[data-paywall-screen-id='"+d.id+"'] [data-paywall-screen='"+n+"'").getFirst())throw Error();ev.screens.registry[d.id].transition(n);break;default:throw new Error}}catch(e){ev.forms.utils.error(ev.commons.getErrorMessages().generic)}};return{init:function(e){if(!(e=e||{}).id)return;ev.utils.addEventHandlerFromData("click","data-selection-id",(function(t,i){o(t,i,null,e)})),ev.forms.onSubmit(ev.utils.getFormFromId(e.id+"-subscription-selection-form"),(function(e,t){return Promise.resolve(t)}),(function(t){try{const i=n(t.item);if(!i||!t.subscriptionType)throw new Error;if("true"!==t.link||!i.requireSubscription)return void r(e.id,i,t.subscriptionType);if(ev.accounts.getUser().hasActiveSubscription())return void o(ev.utils.find(document,"[data-paywall-screen-id='"+e.id+"'] [data-paywall-screen='items'] [data-selection-id='"+i.id+"']").getFirst(),"data-selection-id",null,e);if("E"!==t.subscriptionType&&"P"!==t.subscriptionType)throw new Error;ev.screens.registry[e.id].transition("link-"+t.subscriptionType)}catch(e){ev.forms.utils.error(ev.commons.getErrorMessages().generic)}}),(function(){ev.forms.utils.error(ev.commons.getErrorMessages().generic)}),{ignoreSuccessMessage:!0}),e.requestAction&&Object.keys(e.requestAction).forEach((function(t){!function(e,t){ev.forms.onSubmit(ev.utils.getFormFromId(e+"-"+t.id+"-form"),(function(i,n){return ev.forms.validate(i)?(ev.screens.registry[e].transition("loading"),ev.service.customerHelp.request(t.id,n)):Promise.reject({ignoreOnFailure:!0})}),(function(t){ev.screens.registry[e].transition("success")}),(function(){ev.forms.utils.error(ev.commons.getErrorMessages().generic),ev.screens.registry[e].transition(t.id)}),{ignoreSuccessMessage:!0}),t.recaptcha&&ev.recaptcha.register({selector:"#recaptcha-"+t.id,callback:function(i){ev.utils.find(document,"[data-paywall-screen-id='"+e+"'] [data-paywall-screen='"+t.id+"'] input[name='recaptcha']").val(i),ev.utils.find(document,"[data-paywall-screen-id='"+e+"'] [data-paywall-screen='"+t.id+"'] [data-form-submit]").prop("disabled",!1)},expiredCallback:function(i){ev.utils.find(document,"[data-paywall-screen-id='"+e+"'] [data-paywall-screen='"+t.id+"'] input[name='recaptcha']").val(""),ev.utils.find(document,"[data-paywall-screen-id='"+e+"'] [data-paywall-screen='"+t.id+"'] [data-form-submit]").prop("disabled",!0)}})}(e.id,e.requestAction[t])})),ev.utils.find(document,"[data-paywall-screen-id='"+e.id+"'] [data-paywall-screen='subscription-type'] button[data-form-submit]").on(["click"],(function(t,i){ev.utils.find(document,"[data-paywall-screen-id='"+e.id+"'] [data-paywall-screen='subscription-type'] input[name='subscriptionType']").val(i.getAttribute("data-subscription-type"))})),ev.utils.find(document,"textarea").each((function(e){e.value="",e.blur()})),ev.recaptcha.init(),ev.forms.onSubmit(ev.utils.getFormFromId(e.id+"-link-E-subscription-form"),(function(e,t){return Promise.resolve(t)}),(function(e){ev.accounts.isApp()?ev.app.fwdToSignOut():(document.body.style.cursor="wait",ev.accounts.logout((function(){a(e.item)})))}),(function(){document.body.style.cursor="default",ev.forms.utils.error(ev.commons.getErrorMessages().generic)}),{ignoreSuccessMessage:!0}),ev.forms.onSubmit(ev.utils.getFormFromId(e.id+"-link-P-subscription-form"),(function(e,t){return t.form=e,Promise.resolve(t)}),(function(t){try{const i=t.item,n=t.form;if(!i||!n)throw new Error;delete t.item,delete t.form,ev.forms.utils.loading(n),ev.service.sap.link(t).then((function(){if(!ev.accounts.getUser().hasActiveSubscription())throw new Error;ev.gtm.pageview.trigger("nif-ok"),o(ev.utils.find(document,"[data-paywall-screen-id='"+e.id+"'] [data-paywall-screen='items'] [data-selection-id='"+i+"']").getFirst(),"data-selection-id",null,e)})).catch((function(){ev.accounts.getUser().hasActiveSubscription()?o(ev.utils.find(document,"[data-paywall-screen-id='"+e.id+"'] [data-paywall-screen='items'] [data-selection-id='"+i+"']").getFirst(),"data-selection-id",null,e):(ev.screens.registry[e.id].transition("link-P-failure"),ev.gtm.pageview.trigger("nif-ko"))})).finally((function(){ev.forms.utils.completed(n)}))}catch(t){ev.screens.registry[e.id].transition("link-P-failure"),ev.gtm.pageview.trigger("nif-ko")}}),(function(){ev.screens.registry[e.id].transition("link-P-failure"),ev.gtm.pageview.trigger("nif-ko")}),{ignoreSuccessMessage:!0});const t=ev.utils.getQueryParams();if(Object.keys(t).length>0){if(!t.action)return;try{const n=ev.utils.find(document,"[data-paywall-screen-id='"+e.id+"'] [data-paywall-screen='items'] [data-selection-id='"+t.action+"']").getFirst();if(!n)throw new Error;var i=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});n.dispatchEvent(i)}catch(e){}delete t.action,window.history.replaceState({},document.title,window.location.pathname+ev.utils.formatParams(t))}},get items(){return e},set items(t){e=t}}}();
ev.events=function(){EV.GGEvent=EV.GGEvent||{},EV.GGEvent.PM_PURCHASE_CHANGED="gg.pm.purchaseChanged",EV.GGEvent.PM_PURCHASE_REACTIVATED="gg.pm.purchaseReactivated",EV.GGEvent.PM_PURCHASE_REACTIVATED_PROMO="gg.pm.purchaseReactivatedWithPromo";var e=!1,n=!1,t=!1,i=!1,o=null,r=function(e,r){var c=ev.commons.getParams(),a={isSocial:t,isRegister:n,isShowcase:i};ev.service.loginCompleted(a,c,e,r).then((function(e){o=e;var n=ev.commons.referrer.origin()||"",t={},r=function(){ev.marfeel.registerUserType(),ev.gtm.pageview.proccessQueue(),s(o,c)};try{const e=ev.accounts.getMultitenantScriptConfig().brand;if(!a.isRegister&&o.brand&&e&&o.brand!==e){const n=new Date(o[e+"Consent"]),t=new Date;n.toDateString()===t.toDateString()&&ev.gtm.pageview.trigger("login-ok-registered")}}catch(e){}!a.isRegister&&o.hasOwnProperty("gender")&&o.gender&&o.hasOwnProperty("birth_date")&&o.birth_date||n.includes("checkout")||i?o.hasOwnProperty("email_address")&&o.email_address||i?"complete"===document.readyState?r():document.onreadystatechange=function(){"complete"===document.readyState&&r()}:(t={screen:"email",onSuccess:r,onClose:r},EV.Event.publish("gg.collect_user_info",t)):(t={screen:"sociodemographic",onSuccess:function(){ev.service.refreshAliasCookies().then((function(){r()})).catch((function(){r()}))},onClose:r},EV.Event.publish("gg.collect_user_info",t))})).catch((function(e){c&&v(c)}))},s=function(e,n){var t=ev.commons.referrer.origin();e=ev.accounts.getUser();n&&n._ref&&(t=n._ref),e.hasActiveSubscription()&&t&&t.includes("link")?ev.commons.referrer.load({ignore:!0}):c(n)},c=function(e){var n=ev.accounts.isApp();e&&e.facet&&(n="app"===e.facet),n?e?v(e):window.location.reload():u(e)?ev.utils.redirect((e&&e.base?e.base:"")+"/perfil/ev/registro-exitoso"):ev.commons.referrer.load({origin:e?e._ref:null,base:e?e.base:null,queryParams:e||null})},a=function(e){var n=ev.commons.referrer.get();return!!n&&n.includes(e)},v=function(e){ev.utils.redirectWithParams("/perfil/ev/login",e)},l=function(e){ev.utils.redirectWithParams("/perfil/ev",e)},u=function(e){return n&&!ev.commons.referrer.origin()&&!a("shopping")&&!a("alta")&&(!e||e&&!e._ref)},d=function(e){var n=ev.commons.getParams();const t=(e=e||{}).ev_session;t&&t.hasOwnProperty("network")&&"apple"===t.network&&l(n)},E=function(n,i){e?EV.Event.on(EV.Event.AUTO_SOCIAL_LINK_SUCCESS,(function(e){t=!0,r(n,i)})):r(n,i)},g=function(e){ev.utils.find(document,"#evIdentifier").show(),ev.utils.find(document,"#evIdentifierInfo").hide(),ev.utils.find(document,"#widget_social_icon_btns_desc").hide(),ev.utils.find(document,"#evSocialInfo").show(),ev.utils.find(document,"#evSocialInfo .evl-profile-text__"+e).show(),ev.gtm.pageview.trigger("link-accounts",e)},f=function(e,n){e&&ev.utils.isArray(e.args)&&e.args.includes("apple")&&("user_cancelled_authorize"===e.code&&n(ev.commons.getParams()))},m=function(e){var n=e.ev_session&&e.ev_session.network?e.ev_session.network:"";return!n&&ev.commons.getURL().includes("apple")&&(n="apple"),n};EV.Event.on(EV.Event.AUTO_LINK_SOCIAL_ACCOUNT,(function(){e=!0})),EV.Event.on(EV.Event.FACEBOOK_LINK_AUTHENTICATION,(function(){g("facebook")})),EV.Event.on(EV.Event.GOOGLE_LINK_AUTHENTICATION,(function(){g("google")})),EV.Event.on(EV.Event.APPLE_LINK_AUTHENTICATION,(function(){g("apple")})),EV.Event.on(EV.Event.SOCIALS_LINK_AUTHENTICATION,(function(e){g("multiple")})),EV.Event.on(EV.Event.IDENTITY_LINK_AUTHENTICATION,(function(){ev.utils.find(document,"#evLoginInfo").hide(),ev.utils.find(document,"#evSocialCredentialsInfo").show(),ev.gtm.pageview.trigger("link-accounts","site")})),EV.Event.on(EV.Event.LOGIN_SUCCESS,(function(e){e=e||{},t=!1,ev.gtm.pageview.trigger("login-ok","site"),E(!1,e.response),ev.gtm.pushGA4("login",{method:"site",page:ev.commons.referrer.get()||void 0})})),EV.Event.on(EV.Event.REGISTRATION_SUCCESS,(function(){t=!1,n=!0,ev.gtm.pageview.trigger("thanks","site"),ev.gtm.pushGA4("signup",{method:"site",page:ev.commons.referrer.get()||void 0})})),EV.Event.on(EV.Event.SOCIAL_LOGIN_SUCCESS,(function(e){var n=e.ev_session&&e.ev_session.network?e.ev_session.network:"",i=!1;t=!0,ev.gtm.pageview.trigger("login-ok",m(e)),n||(i=!0),ev.gtm.pushGA4("login",{method:m(e)||void 0,page:ev.commons.referrer.get()||void 0}),E(i,e.ev_session.response)})),EV.Event.on(EV.Event.SOCIAL_REGISTER_SUCCESS,(function(e){t=!0,n=!0,ev.gtm.pageview.trigger("thanks",m(e)),ev.gtm.pushGA4("signup",{method:m(e)||void 0,page:ev.commons.referrer.get()||void 0})})),EV.Event.on(EV.Event.AUTO_SOCIAL_LINK_FAILED,(function(e){f(e,(function(e){l(e)}))})),EV.Event.on(EV.Event.SOCIAL_LOGIN_FAILED,(function(e){console.log(e)})),EV.Event.on(EV.Event.SOCIAL_LINKED_ACCOUNT_FAILED,(function(e){if(e&&e.error&&"apple"===e.network){var n=ev.commons.getParams();ev.commons.storeCustomError(JSON.stringify(e.error)),l(n)}})),EV.Event.on(EV.Event.SOCIAL_REGISTER_FAILED,(function(e){f(e.error,(function(e){v(e)}))})),EV.Event.on(EV.Event.EDIT_PROFILE_COMPLETE_SUCCESS,(function(e){var n=e.widget_guid;n&&-1!==n.indexOf("3")&&ev.gtm.push("onboarding","guardar","info");var t=!ev.utils.find(document,"#change-password").getFirst();ev.service.refreshAliasCookies().then((function(){t&&n&&-1!==n.indexOf("1")&&window.location.reload()}))})),EV.Event.on(EV.Event.SESSION_REFRESH,(function(){})),EV.Event.on(EV.Event.SESSION_EXPIRED,(function(){ev.accounts.logout()})),EV.Event.on(EV.Event.SECURE_SESSION_EXPIRED,(function(){ev.accounts.logout()})),EV.Event.on(EV.Event.LOGIN_FAILED,(function(){})),EV.Event.on(EV.Event.USER_IDENTIFIED,(function(){document.getElementById("evIdentifier").style.display="none",document.getElementById("evLogin").style.display="block",ev.gtm.pageview.trigger("login")})),EV.Event.on(EV.Event.USER_NOT_FOUND,(function(){document.getElementById("evIdentifier").style.display="none",document.getElementById("evRegistration").style.display="block",ev.gtm.pageview.trigger("create-account")})),EV.Event.on(EV.Event.LOGIN_CANCELLED,(function(){document.getElementById("evIdentifier").style.display="block",document.getElementById("evLogin").style.display="none"})),EV.Event.on(EV.Event.REGISTRATION_CANCELLED,(function(){document.getElementById("evIdentifier").style.display="block",document.getElementById("evRegistration").style.display="none"})),EV.Event.on(EV.Event.FORGOT_PASSWORD_SUCCESS,(function(){document.getElementById("evForgotPassword").style.display="none",document.getElementById("evForgotPasswordSuccess").style.display="block",ev.gtm.pageview.trigger("password-remember-ok")})),EV.Event.on(EV.Event.RESET_PASSWORD_SUCCESS,(function(){document.getElementById("evResetPassword").style.display="none",document.getElementById("evResetPasswordSuccess").style.display="block",ev.gtm.pageview.trigger("password-new-ok")})),EV.Event.on(EV.Event.SOCIAL_LINKED_ACCOUNT_SUCCESS,(function(e){ev.service.socialLinkCompleted().then((function(){d(e)})).catch((function(){ev.forms.utils.error("Atención: tu cuenta ha sido vinculada, pero no hemos podido informarla como verificada."),d(e)}))})),EV.Event.on(EV.Event.EDIT_PROFILE_FORM_LOADED,(function(e){const n=document.getElementById(e);if(!n)return;var t=function(){ev.commons.disableFormAutocomplete(),ev.commons.registerAppleHandler("#social-panel-apple form[name='evSocialLinkAccountForm'] button","#social-panel-apple form[name='evSocialLinkAccountForm']")};if(ev.utils.find(n,"input, select").asArray().length>0)return void t();new MutationObserver((function(e,n){for(var i=0;i<e.length;i++)if("childList"===e[i].type){t();break}n.disconnect()})).observe(n,{attributes:!1,childList:!0,subtree:!0})})),EV.Event.on(EV.Event.PM_PRODUCTS_LOADED,(function(e){var n=ev.utils.find(document,"body").getFirst().classList.value.match("landing-group-v[0-9]+");if(n&&(n=parseInt(n[0].replace(/landing-group-v/g,""),10)),"number"==typeof n&&n>1){ev.subscriptions.landing.products=e,ev.subscriptions.landing.version=n;const t=ev.utils.find(document,".recommended-product");ev.subscriptions.landing.recommended=t.getFirst()?t.getFirst().id.replace("product-",""):null,ev.subscriptions.landing.refresh()}var t=function(e){e.length>0&&e.forEach((function(n){var t=ev.utils.find(n,".product-header").getFirst(),i=ev.utils.find(n,"div[id^='payment-plan-']").getFirst(),o=ev.utils.find(i,".payment-price").getFirst(),r=o.innerHTML.replace(/\€/g,"").split(".");if(r[1]="<span class='payment-price__decimal'>"+r[1]+"</span>",o.innerHTML=r.join(","),t.appendChild(i),ev.commons.getURL().includes("checkout")&&e.length<2){var s=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});i.dispatchEvent(s)}}))},i=ev.utils.find(document,"div[id^='product-']").asArray();if(i.length>0)return void t(i);const o=ev.utils.find(document,".product-list").getFirst();if(!o)return;var r=new MutationObserver((function(e,n){for(var i=0;i<e.length;i++)if("childList"===e[i].type){var o=ev.utils.find(document,"div[id^='product-']").asArray();t(o);break}n.disconnect()}));r.observe(o,{attributes:!1,childList:!0,subtree:!0})})),EV.Event.on(EV.Event.PM_PRODUCTS_SELECTED,(function(e){if(Array.isArray(e)&&!(e.length<1)){var n={},t={},i=e[0]||{},o=i.paymentPlan||{};t.description=i.description,t.finalPrice=(null!==o.trialPrice?o.trialPrice:o.finalPrice).replace(".",","),t.productName=n.productName,ev.storage.save("local","paywall:product",t),ev.commons.getURL().includes("suscripciones")&&ev.gtm.source.save("lv-landing"),"BUNDLE"===i.type&&(n.isBundlePurchase=!0),i.giftEnabled&&(n.isGiftPurchase=!0),n.productName=i.name,ev.gtm.push("paywall","subscribe",i.name),ev.utils.redirectWithParams("/perfil/ev/paywall/checkout",n)}}));var p=function(e){ev.utils.find(document,"#"+e+"Beneficiary").toggleClass("active"),ev.utils.find(document,"body").toggleClass("modal-open")};EV.Event.on(EV.Event.PM_INVITATION_KEY_ACCEPTED,(function(){const e="accepted",n=ev.utils.getParam("invitationKey");n&&ev.service.getBeneficiary(n).then((function(n){return ev.service.onBeneficiaryAction(e,n)})).then((function(){p(e)})).catch((function(){p(e)}))})),EV.Event.on(EV.Event.PM_INVITATION_KEY_DECLINED,(function(){p("declined")})),EV.Event.on(EV.Event.PM_BENEFICIARY_DELETED,(function(e){e&&"ACCEPTED"===e.status&&ev.service.onBeneficiaryAction("deleted",e).catch((function(){}))})),EV.Event.on(EV.Event.PM_CHANGE_CARD_OPEN,(function(e){var n=function(e,n){var t=ev.utils.find(n,".add-new-card");t.getFirst()&&t.on(["click"],(function(){ev.gtm.push("myaccount","modificar-tarjeta","nueva-tarjeta");const e=ev.utils.find(n,".change-card-footer").getFirst();if(!e)return;new MutationObserver((function(e,t){for(var i=0;i<e.length;i++)if("childList"===e[i].type){var o=ev.utils.find(n,".change-card-footer .btn-primary");o.getFirst()&&o.on(["click"],(function(){ev.gtm.push("myaccount","modificar-tarjeta","guardar")}));break}t.disconnect()})).observe(e,{attributes:!1,childList:!0,subtree:!0})}))},t=(ev.subscriptions.digital.subscriptions.filter((n=>n.id===e))[0],ev.utils.find(document,".pm2 .stripe-payment").getFirst());if(t)return void n(0,t);const i=ev.utils.find(document,"body").getFirst();if(!i)return;var o=new MutationObserver((function(e,t){for(var i=0;i<e.length;i++)if("childList"===e[i].type){var o=ev.utils.find(document,".pm2 .stripe-payment").getFirst();if(o){n(0,o);break}}t.disconnect()}));o.observe(i,{attributes:!1,childList:!0,subtree:!0})})),EV.Event.on(EV.Event.PM_CANCEL_PURCHASE_OPEN,(function(e){var n=function(e,n){ev.utils.find(n,"#cancelReason").on(["change"],(function(){if(e&&"PAYPAL"===e.paymentType)!function(e){ev.utils.find(e,"#modal-display-offers").hide(),ev.utils.find(e,".model-cancel-confirm .modal-footer .btn-success").hide()}(n);else{ev.utils.transformInnerTextToHtml(n,"#modal-display-offers > p",ev.commons.getMessageTable().ev.widgets.purchases.cancel.select_an_offer);var t=ev.utils.find(n,"#modal-display-offers .offer");if(t.getFirst()){var i=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});t.getFirst().dispatchEvent(i)}}}));var t=ev.utils.find(n,".model-cancel-confirm .modal-footer .btn-success");t.getFirst()&&t.on(["click"],(function(){ev.gtm.push("layout","boton-myaccount","acepto-la-oferta")}))},t=function(e,t){n(e,t);var i=ev.utils.find(t,".model-cancel-confirm .modal-footer .btn-primary");i.getFirst()&&i.on(["click"],(function(){ev.gtm.push("myaccount","cancelar-suscripcion","confirmar")}))},i=ev.subscriptions.digital.subscriptions.filter((n=>n.id===e))[0],o=ev.utils.find(document,".pm2 .modal-cancel-purchase").getFirst();if(o)return void t(i,o);const r=ev.utils.find(document,"body").getFirst();if(!r)return;var s=new MutationObserver((function(e,n){for(var o=0;o<e.length;o++)if("childList"===e[o].type){var r=ev.utils.find(document,".pm2 .modal-cancel-purchase").getFirst();if(r){t(i,r);break}}n.disconnect()}));s.observe(r,{attributes:!1,childList:!0,subtree:!0})})),EV.Event.on(EV.Event.PM_OFFER_APPLY_SUCCESS,(function(){})),EV.Event.on("gg.get_social_google_session",(function(e){detail=e.detail,n=detail.isRegister,i=!0,t=!0,n&&ev.gtm.pageview.trigger("thanks","google");ev.gtm.pageview.trigger("login-ok","google"),E(!1,detail.session)})),EV.Event.on("gg.collect_user_info",(function(e){const n="#"+(e=e||{}).screen+"CollectUserInfo";var t=ev.utils.find(document,n);if(t.getFirst())return t.toggleClass("active"),void ev.utils.find(document,"body").toggleClass("modal-open");var i=function(){e.onClose&&e.onClose(),t.getFirst()&&(t.toggleClass("active"),ev.utils.find(document,"body").toggleClass("modal-open"))};ev.service.loadUserInfoCollection(e.screen,ev.utils.find(document,".main-content")).then((function(){(t=ev.utils.find(document,n)).getFirst()||i(),e.ignoreOnUpdateHandler=!0,ev.forms.registerDefaultOnSubmit(n+"Form",e),t.toggleClass("active"),ev.utils.find(document,"body").toggleClass("modal-open"),ev.utils.addEventHandlerFromData("click","data-popup-close="+n.replace("#",""),(function(e,n){i()}))})).catch((function(){i()}))})),ev.paywall.handleWidgetPreloadEvents()};
ev.fidelityCard=function(){const e="clubCardForm";var t=function(){"beneficiary"==ev.utils.getParam("cardType")&&(ev.utils.find(document,"input[name=cardType][value=beneficiary]").prop("checked",!0),n()),ev.forms.onSubmit(ev.utils.getFormFromId(e),(function(e,t){return ev.service.requestNewFidelityCard(t)}),(function(t){ev.subscriptions.requestSuccess(e,t.ticketId),ev.commons.togglePopup("cardFormPopup")}),void 0,{ignoreSuccessMessage:!0}),ev.utils.addEventHandlerFromData("change","data-card-change",(function(e,t){n()})),ev.utils.addEventHandlerFromData("click","data-autopopulate-popup",(function(t,n){i(e),ev.commons.togglePopup("cardFormPopup")}))},i=function(e){const t=ev.utils.getFormFromId(e).getFirst();ev.utils.find(t,"input:not([name=cardType])").val(""),ev.utils.find(t,"[data-form-submit]").show(),ev.utils.find(t,"[name=conditions]").prop("checked",!1)},n=function(){const e=ev.utils.getFormFromId("beneficiary"),t=ev.utils.find(document,"#cardNumberDiv");e.getFirst()&&t.getFirst()&&(e.toggle(),t.toggle(),ev.utils.find(e.getFirst(),"input").prop("required",ev.utils.isVisible(e.getFirst())),ev.utils.find(t.getFirst(),"input").prop("required",ev.utils.isVisible(t.getFirst())))};return{init:t,initform:function(){ev.utils.getFormFromId(e).show(),ev.utils.find(document,"[data-subscription-back] i").hide(),t()}}}();
ev.forms=function(){var e=function(e){const i=ev.accounts.getUserSessionId(),a=ev.accounts.getUser().guid;"string"==typeof i&&"string"==typeof a||console.log("Guid no disponible");try{Object.keys(e).forEach((function(t){var r=e[t];if(r.dateValues){if(""===r.dateValues.day&&""===r.dateValues.month&&""===r.dateValues.year)return void(e[t]="");if(!ev.utils.validateDateString(r.dateValues.day,r.dateValues.month,r.dateValues.year))throw{code:"ATTRIBUTE_VALIDATION_FAILED",args:[t,r]};const i=r.dateValues.year+"/"+ev.utils.minTwoDigits(r.dateValues.month)+"/"+ev.utils.minTwoDigits(r.dateValues.day);e[t]=i+" 00:00:00"}}))}catch(e){return Promise.reject(e)}return ev.service.getUser(a,i).then((function(n){n=n||{};var o=Object.assign({},n.userProfile),s=[];Object.keys(e).forEach((function(i){var a=t(o.attributes);s.push(r(i,e[i],a))}));const u={attributes:s};return ev.service.updateUser(a,i,u)}))},t=function(e){return(e=e||[]).reduce((function(e,t){return e[t.name]=decodeURIComponent(t.value),e}),{})},r=function(e,t,r){if(ev.utils.isArray(t)){r.hasOwnProperty(e)||(r[e]="");var i=r[e].includes("|")?r[e].split("|"):""!==r[e]?[r[e]]:[],a=[];t.forEach((function(e){"object"==typeof e?(Object.keys(e).forEach((function(t){!i.includes(t)&&e[t]?i.push(t):e[t]||(i=i.filter((function(e){return!(e===t)})))})),t=i.slice()):(a.push(e),t=a.slice())})),t=(t=a.length?a:i).join("|")}return{name:e,value:t}},i=function(e,t,r,i,a){e&&e.getFirst()&&e.on(["submit"],(function(e,o){e.preventDefault(),n.loading(o),n.cleanErrors(o),t(o,ev.serialize.form(o)).then((function(e){a&&a.ignoreSuccessMessage||n.success(),n.completed(o),r&&r(e)})).catch((function(e){const t=e.validationErrors||[];!e.ignoreOnFailure&&i&&i(e),a&&a.ignoreFailureMessage||!e.errorMessage||n.error(e.errorMessage),a&&a.ignoreValidationErrors||t.forEach((function(e){n.inputError(o,e)})),n.completed(o)}))}))},a=function(e){const t=[];if(null===e)return!1;n.cleanErrors(e);return ev.utils.find(e,"[required]:not([data-form-disabled=true]), [data-form-required]:not([data-form-disabled=true])").each((function(r){var i=!0,a=null===r.getAttribute("data-form-required")||"true"===r.getAttribute("data-form-required");if(r.getAttribute("data-form-group")){const e=r.getAttribute("data-form-group"),s=r.getAttribute("data-form-group-type"),u=ev.utils.find(r,"input:not([data-form-disabled=true]), select:not([data-form-disabled=true])").asArray();var o=u.some((function(e){return!e.value||/^\s*$/.test(e.value)}));o||"checkbox"!==s&&"radio"!==s||(o=!n.isAnyCheckboxChecked(u)),o&&a&&(i=!1,t.push({field:e,message:"Requerido"}))}else a&&(r.value&&!/^\s*$/.test(r.value)||(i=!1,t.push({field:r.name,message:"Requerido"})));if(i&&r.hasAttribute("data-form-length")){const e=parseInt(r.getAttribute("data-form-length"));"string"==typeof r.value&&r.value.length<e&&(i=!1,t.push({field:r.name,message:"Min. "+e+" carácteres"}))}if(i&&r.hasAttribute("data-form-max-length")){const e=parseInt(r.getAttribute("data-form-max-length"));"string"==typeof r.value&&r.value.length>e&&(i=!1,t.push({field:r.name,message:"Max. "+e+" carácteres"}))}if(i&&r.hasAttribute("data-form-validator")){const a=r.getAttribute("data-form-validator");if("nif"===a){const a=ev.utils.find(e,"[name=document_type]").asArray().filter((function(e){return e.checked}))[0];"CIF"===(a?a.value:"NIF")?ev.nifValidator.isCifValid(r.value)||(i=!1,t.push({field:r.name,message:"CIF inválido"})):ev.nifValidator.isNifValid(r.value)||ev.nifValidator.isNieValid(r.value)||(i=!1,t.push({field:r.name,message:"NIF inválido"}))}if("email"===a){new RegExp("^[_a-zA-Z0-9-']+([+.][_a-zA-Z0-9-']+)*@[a-zA-Z0-9-]+(.[a-zA-Z0-9-]+)*.(([0-9]{1,3})|([a-zA-Z]{2,20}))$").test(r.value)||(i=!1,t.push({field:r.name,message:"Formato inválido"}))}if("cellphone"===a){/^([6-7]{1})(\d{8})/.test(r.value)||(i=!1,t.push({field:r.name,message:"Formato inválido"}))}}})),!(t.length>0)||(t.forEach((function(t){n.inputError(e,t)})),!1)},n={error:function(e){var t=ev.utils.find(document,"[data-profile-alerts]");t.append('<p class="error">'+e+"</p>"),setTimeout((function(){t.empty()}),5e3)},success:function(){var e=ev.utils.find(document,"[data-profile-success]");e.show(),setTimeout((function(){e.hide()}),5e3)},loading:function(e){ev.utils.find(e,"[data-form-submit]").prop("disabled",!0),ev.utils.find(e,"[data-form-submit]").addClass("disabled"),document.body.style.cursor="wait"},completed:function(e){ev.utils.find(e,"[data-form-submit]").prop("disabled",!1),ev.utils.find(e,"[data-form-submit]").removeClass("disabled"),document.body.style.cursor="default"},cleanErrors:function(e,t){const r=ev.utils.find(e,t||"input, select, textarea");r.removeClass("form__input--error"),r.asArray().forEach((function(t){ev.utils.find(e,"[data-error-for='"+t.name+"']").hide(),ev.utils.find(e,"[data-error-for='"+t.name+"']").empty()}))},inputError:function(e,t){const r=ev.utils.find(e,"textarea[name='"+t.field+"'], input[name='"+t.field+"'], select[name='"+t.field+"'], [data-form-group='"+t.field+"'] input, [data-form-group='"+t.field+"'] select"),i=ev.utils.find(e,"[data-error-for='"+t.field+"']");ev.utils.findfromDataAndReturnArray("data-form-error").length>0&&i.empty(),r.once(["focus","change"],(function(e){r.removeClass("form__input--error"),i.hide(),i.empty()})),r.addClass("form__input--error"),i.show(),i.append("<p data-form-error=''>"+t.message+"</p>")},isAnyCheckboxChecked:function(e){for(var t=0;t<e.length;t++)if(e[t].checked)return!0;return!1},attr:{map:{Alias:"display_name","Correo electrónico":"email_address"},get:function(e){return this.map[e]?this.map[e]:e}}};return{init:function(t){t=t||{};var r="data-form-submit",a=ev.utils.findfromDataAndReturnArray(r);if(a.length){var n=[];a.forEach((function(e){const t=e.getAttribute(r);t&&n.push(t)})),ev.utils.unique(n).forEach((function(r){const a=ev.utils.getFormFromId(r);i(a,(function(r,i){return ev.forms.validate(r)?e(i):Promise.reject({ignoreOnFailure:t.ignoreOnFailure})}),(function(e){EV.Event.publish("gg.user_updated",{data:ev.serialize.form(a.getFirst()),response:e})}),null,t)}))}var o=document.createEvent("Event");o.initEvent("submit",!0,!0),a.forEach((function(e){const t=e.getAttribute(r);t&&e.addEventListener("click",(function(){ev.utils.getFormFromId(t).getFirst().dispatchEvent(o)}))}))},onSubmit:i,utils:n,validate:a,sendDataToEvolok:e,registerDefaultOnSubmit:function(t,r){r=r||{};const o=ev.utils.find(document,t);r.onSuccess||(r.onSuccess=function(e){EV.Event.publish("gg.user_updated",{data:ev.serialize.form(o.getFirst()),response:e})}),i(o,(function(t,r){return a(t)?e(r):Promise.reject({ignoreOnFailure:!0})}),r.onSuccess,(function(e){if("REQUIRE_UNIQUIE_PROFILE_AND_REALM"!==e.code&&"ATTRIBUTE_VALIDATION_FAILED"!==e.code||!e.args||!e.args[0])n.error(ev.commons.getErrorMessages().generic);else{const t="REQUIRE_UNIQUIE_PROFILE_AND_REALM"===e.code?e.args[0]+" existente":"Formato inválido";n.inputError(o.getFirst(),{field:n.attr.get(e.args[0]),message:t})}})),r.ignoreOnUpdateHandler||EV.Event.on("gg.user_updated",(function(e){ev.service.refreshAliasCookies()}))}}}();
ev.gtm=function(){const e="ev_gg_vpv",t=ev.accounts.getMultitenantScriptConfig().cookie.domain;var n,o,i,a,s,r=function(){return ev.utils.getParam("facet")||"web"},u={save:function(n,o){n=n||"others",(o=o||{}).cookieEnabled?ev.cookie.set(e,n,null,t):ev.storage.save("session",e,n)},get:function(){var n=null;return ev.utils.isCookiePresent(e)?(n=ev.cookie.get(e),ev.cookie.remove(e,t),this.save(n)):n=ev.storage.load("session",e),n},delete:function(){ev.storage.remove("session",e)}},c=(n=null,o=null,i=[],a=function(){i.length&&(i.forEach((function(e){s(e)})),i=[])},s=function(e){gg.gtm.virtualPageView(e)},{conf:function(e,t){n=e||n,o=t||o,document.onreadystatechange=function(){"complete"===document.readyState&&a()}},trigger:function(e,t){u.get()||u.save();const a="/vpv/"+n+"/"+o+"/"+r()+"/"+u.get()+"/"+e+(t?"/"+t:"");return window.dataLayer&&n&&o&&("complete"!==document.readyState?i.push(a):s(a)),a},proccessQueue:a}),v={},l=function(e,t,n){var o={};if("myaccount"===e)o={myaccount_action:t,myaccount_detail:n};else if("usuarios"!==e&&"onboarding"!==e||"newsletter"!==t)"evolok"===e&&"segments"===t?o={segments_name:n}:"layout"===e?o={layout_action:t,layout_detail:n}:"conversion"===e&&(o={method:t,page:n});else{var i=n.split("-");o={newsletter_action:i[0],newsletter_detail:i.length>1?i[1]:void 0}}return o},g=function(e,t){d("event_generico",e,t)},d=function(e,t,n){var o=n||{},i={event:"event-generico",eventName:t=t||"event-generico"},a=Object.assign(i,o)||i;dataLayer.push(a)};return{pageview:c,getUserInfo:function(){const e=ev.accounts.getUser();return{userId:e&&e.uid?e.uid:"",facet:r(),userType:e&&e.uid?e.getType():"anonimo",monthsFromUserRegistration:e&&e.uid&&void 0!==e.getRegisteredMonthsValue?e.getRegisteredMonthsValue():void 0,evolokId:e&&e.uid&&void 0!==e.getEvolokId&&e.getEvolokId()||void 0,roles:e&&e.uid&&void 0!==e.getRoleName&&e.getRoleName()||void 0,registerDate:e&&e.uid&&void 0!==e.getRegisterDate&&e.getRegisterDate()||void 0,newsletters:e&&e.uid&&void 0!==e.getNewsletterList&&e.getNewsletterList()||void 0,communications:e&&e.uid&&void 0!==e.getCommunicationList&&e.getCommunicationList()||void 0}},getFinalPrice:function(){var e=ev.paywall.utils.basket.get(),t=parseFloat(e.products[0].paymentPlan.trialPrice),n=parseFloat(e.products[0].paymentPlan.finalPrice);return{precioSuscripcion:(e=isNaN(t)?n:t).toFixed(2).replace(/\.?0+$/,"")}},source:u,push:function(e,t,n,o){if(o){var i=[e,t,n].join("|");if(v[i])return;v[i]=!0}dataLayer.push({event:e,eventAction:t,eventLabel:n,eventValue:null});var a=l(e,t,n);void 0!==a&&("usuarios"!==e&&"onboarding"!==e||"newsletter"!==t||(e="newsletter_subscription"),g(e,a))},pushGA4:g}}();
ev.invoices=function(){var e,t,n,a,r,d=function(t,n){var a=document.createElement("a");a.href=e.getPdf+"?transactionId="+t,a.download=n+".pdf",a.click()},o=function(){(function(t){return $.ajax({url:e.getInvoices,type:"GET",data:$.param({guid:t}),contentType:"application/json"})})(n).then(i)},i=function(e){r=e;for(var n=a.tBodies,d=0;d<n.length;d++)a.removeChild(n[0]);if(r){r.sort((function(e,t){return new Date(e.invoiceDate)-new Date(t.invoiceDate)}));var o=a.createTBody();r.forEach((function(e,n,a){var r=o.insertRow();if(r.insertCell(-1).appendChild(document.createTextNode(e.subscriptionId)),r.insertCell(-1).appendChild(document.createTextNode(e.invoiceId)),r.insertCell(-1).appendChild(document.createTextNode(e.productName)),r.insertCell(-1).appendChild(document.createTextNode(new Date(e.date).toLocaleDateString())),r.insertCell(-1).appendChild(document.createTextNode(e.grossAmount.toLocaleString(navigator.language,{style:"currency",currency:"EUR"}))),r.insertCell(-1).appendChild(document.createTextNode(c(e))),!t){var d=document.createElement("DIV");d.classList.add("dropdown");var i=document.createElement("BUTTON");i.setAttribute("data-toggle","dropdown"),i.appendChild(document.createTextNode("Gestionar")),d.appendChild(i);var u=document.createElement("UL");u.classList.add("dropdown-menu"),"PAID"!=e.state||e.corporate||l(u),e.corporate&&"PENDING"==e.state&&l(u),d.appendChild(u);var s=r.insertCell(-1);u.children.length>0&&s.appendChild(d)}}))}},c=function(e){switch(e.state){case"PAID":return"Pagada";case"PENDING":return"Corporativa";case"SUBSTITUTED":return"Sustituida";case"RECTIFIED":return"Rectificada";case"REFUNDED":return"Abonada";default:return state}},l=function(e){var t=document.createElement("LI"),n=document.createElement("A");n.setAttribute("value","download"),n.appendChild(document.createTextNode("Descargar")),n.addEventListener("click",(function(e){var t=e.target.closest("tr"),n=Array.from(t.parentElement.children).indexOf(t),a=r[n];d(a.transactionId,a.invoiceId)})),t.appendChild(n),e.appendChild(t)};return{init:function(n){e=n,t=ev.accounts.isApp()},initPage:function(e){if(n=e,a=document.getElementById("invoicesTable"),t){var r=a.tHead.firstChild.lastElementChild;"Acciones"==r.textContent&&r.remove()}o()}}}();
ev.marfeel=function(){var e=function(e){try{window.marfeel.cmd.push(e)}catch(e){}};return{registerUserType:function(){var n=function(){const e=ev.accounts.getUser();return{userId:e&&e.uid?e.uid:"",userType:e&&e.uid?e.hasActiveSubscription()?"paid":"logged":"anonymous"}}();"anonymous"!=n.userType&&e(["compass",function(e){e.setUserType(n.userType)}])},registerTrackConversion:function(n){e(["compass",function(e){e.trackConversion(n)}])}}}();
ev.newsletter=function(){var e={};return{init:function(){var t=ev.utils.find(document,"form#newsletters__form").getFirst();ev.utils.find(t,"input[type=checkbox]").each((function(t){e[t.name.split(".")[1]]=t.checked}));var n=ev.utils.find(document,"#autopopulatePopup").getFirst();EV.Event.on("gg.user_updated",(function(t){if(t.response.changedAttributes.some((function(e){return"UPDATED"==e.value&&"newsletters"==e.name}))){var r=n?"usuarios":"onboarding";t.data.newsletters.forEach((function(t){for(var n in t)if(t[n]!=e[n]){var i=t[n]?"on":"off";ev.gtm.push(r,"newsletter",i+"-"+n),e[n]=t[n]}}))}}))}}}();
ev.nifValidator=function(){const r="TRWAGMYFPDXBNJZSQVHLCKE",t=["X","Y","Z"],n=new RegExp("[[A-H][J-N][P-S]UVW][0-9]{7}[0-9A-J]");return{isNifValid:function(t){if(!t)return!1;const n=(t=t.toUpperCase()).substring(0,8);return n+r.charAt(parseInt(n)%23)===t},isNieValid:function(n){if(!n)return!1;const i=(n=n.toUpperCase()).substring(0,1),e=t.indexOf(i.toUpperCase());if(e<0)return!1;const a=n.substring(1,8);return i+a+r.charAt(parseInt(e+a)%23)===n},isCifValid:function(r){if(!r)return;if(r=r.toUpperCase(),n.test(r))return!1;var t=0,e=0;for(i=2;i<8;i+=2){if((a=parseInt(r.charAt(i)))<0)return!1;t+=a}for(i=1;i<9;i+=2){var a;if((a=parseInt(r.charAt(i)))<0)return!1;var s=2*a;s>9&&(s=s-10+1),e+=s}const f=(t+e)%10,u=f>0?10-f:0,c=r.charAt(0),o=r.charAt(8);return""!==c&&("ABEH".indexOf(c)<0&&"JABCDEFGHI".charAt(u)===o||"KPQS".indexOf(c)<0&&u===parseInt(o))}}}();
ev.paywall=function(){const e=".stripe-submit-btn",n=".paypal-submit-btn",a=".evl-payw-btn-back";var t,i,r={id:null,paymentMethod:null,beneficiary:null},o=null,s=null,c=document.createEvent("Event"),u=null,d={enabled:!1,screen:"existing-card"},l=function(e){if(ev.utils.find(document,".cvc-help-container").toggle(),ev.utils.find(document,".evl-payw-creditcard-img").toggle(),ev.utils.find(document,".evl-pay-paypal, .evl-payw-paypal__xtratitle").toggle(),d.screen=e,"existing-card"===e){var n=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});ev.utils.find(document,"#existing-card-container .card-thumbnail").getFirst().dispatchEvent(n)}},v=function(){const n="data-paywall",a=ev.storage.load("local","paywall:product"),t=ev.utils.findfromDataAndReturnArray(n);if(t.length<1||null===a)return;if(t[0].closest(".checkout--v2")){var i=ev.utils.find(document,e);i.prop("textContent",""),i.append('<span class="span-text-pay">Pagar hoy:</span><span class="span-text-price"><strong>'+a.finalPrice+" €</strong></span>")}t.forEach((function(e){const t=e.getAttribute(n);Object.keys(a).forEach((function(n){t===n&&e.append(a[n])}))}))},p=function(e){e=e||{},ev.subscriptions.products.referrer.delete(),(ev.accounts.isApp()||"app"===e.facet)&&ev.app.fwdToPurchaseCompleted(),ev.utils.redirectWithParams("/perfil/ev/paywall/pago-exitoso",e)},m=function(e,n){n=n||{},ev.service.purchaseCompleted(e).then((function(){ev.marfeel.registerTrackConversion("subscribe"),p(n.params)})).catch((function(){p(n.params)}))},f=function(e){return ev.utils.find(e,"[name='fiscalEnabled']")},E=function(){const e=ev.utils.getFormFromId("fiscalAddressForm"),n=ev.utils.getFormFromId("simplUserInfoForm").getFirst(),a="input[data-form-required=true]:not([data-form-shared=true]), select[data-form-required=true]:not([data-form-shared=true])",t=ev.utils.find(n,a);e.toggle(!0);var i=ev.utils.isVisible(e.getFirst());t.prop("required",!i),f(n).attr("data-form-disabled",i),i&&ev.forms.utils.cleanErrors(n,a)},g=function(e){e.code&&"string"==typeof e.code?"no_products_selected"===e.code?ev.commons.referrer.load():"create_payment_failed"!==e.code&&_(e.code.toLowerCase()):e.message&&"string"==typeof e.message?ev.forms.utils.error(e.message):_("")},_=function(e){try{ev.forms.utils.error(b({lang:"es",code:e}))}catch(n){ev.gtm.pageview.trigger("error"),ev.utils.find(document,".card--red__error-message").append(e),u.addClass("evl-payw-box--error-show")}},b=function(e){const n={es:{authentication_required:"Es necesario que intentes nuevamente el pago y autenticar tu tarjeta cuando se te solicite durante la transacción.",approve_with_id:"El pago debería ser reintentado una vez más. Si el problema persiste, es necesario que contactes con tu entidad bancaria.",call_issuer:"Es necesario que contactes con tu entidad bancaria para más información.",card_not_supported:"Es necesario que contactes con tu entidad bancaria para verificar que tu tarjeta puede ser utilizada para realizar este tipo de transacción.",card_velocity_exceeded:"Es necesario que contactes con tu entidad bancaria para más información.",currency_not_supported:"Es necesario que contactes con tu entidad bancaria para verificar que tu tarjeta puede ser utilizada para este tipo de moneda.",do_not_honor:"Es necesario que contactes con tu entidad bancaria para más información.",do_not_try_again:"Es necesario que contactes con tu entidad bancaria para más información.",duplicate_transaction:"Es necesario que verifiques si existe un pago reciente para esta misma transacción.",expired_card:"Es necesario que utilices otra tarjeta.",fraudulent:"Es necesario que contactes con tu entidad bancaria para más información.",generic_decline:"Es necesario que contactes con tu entidad bancaria para más información.",incorrect_number:"Número de tarjeta inválido.",incorrect_cvc:"CVC inválido.",incorrect_pin:"PIN inválido.",insufficient_funds:"Es necesario que utilices otra tarjeta.",invalid_account:"Es necesario que contactes con tu entidad bancaria para más información.",invalid_amount:"Es necesario que contactes con tu entidad bancaria para más información.",invalid_cvc:"CVC inválido.",invalid_expiry_year:"Fecha de expiración inválida.",invalid_number:"Número de tarjeta inválido.",invalid_pin:"PIN inválido.",issuer_not_available:"El pago debería ser reintentado una vez más. Si el problema persiste, es necesario que contactes con tu entidad bancaria.",lost_card:"Es necesario que contactes con tu entidad bancaria para más información.",merchant_blacklist:"Es necesario que contactes con tu entidad bancaria para más información.",new_account_information_available:"Es necesario que contactes con tu entidad bancaria para más información.",no_action_taken:"Es necesario que contactes con tu entidad bancaria para más información.",not_permitted:"Es necesario que contactes con tu entidad bancaria para más información.",pickup_card:"Es necesario que contactes con tu entidad bancaria para más información.",processing_error:"El pago debería ser reintentado una vez más. Si el problema persiste, intentar más tarde.",reenter_transaction:"Es necesario que intentes nuevamente el pago y autenticar tu tarjeta cuando se te solicite durante la transacción.",restricted_card:"Es necesario que contactes con tu entidad bancaria para más información.",revocation_of_all_authorizations:"Es necesario que contactes con tu entidad bancaria para más información.",revocation_of_authorization:"Es necesario que contactes con tu entidad bancaria para más información.",security_violation:"Es necesario que contactes con tu entidad bancaria para más información.",service_not_allowed:"Es necesario que contactes con tu entidad bancaria para más información.",stolen_card:"Es necesario que contactes con tu entidad bancaria para más información.",stop_payment_order:"Es necesario que contactes con tu entidad bancaria para más información.",transaction_not_allowed:"Es necesario que contactes con tu entidad bancaria para más información.",try_again_later:"El pago debería ser reintentado una vez más. Si el problema persiste, es necesario que contactes con tu entidad bancaria.",withdrawal_count_limit_exceeded:"Es necesario que utilices otra tarjeta.",error_processing_order:"No es posible continuar debido a que ya posees una suscripción del mismo tipo en vigor.",payment_intent_authentication_failure:"No podemos autenticar tu método de pago. Elige otro método y vuelve a intentarlo.",setup_intent_authentication_failure:"No podemos autenticar tu método de pago. Elige otro método y vuelve a intentarlo.",incomplete_number:"El número de tu tarjeta está incompleto.",incomplete_expiry:"La fecha de caducidad de tu tarjeta está incompleta.",incomplete_cvc:"El código de seguridad de tu tarjeta está incompleto.",card_declined:"Es necesario que contactes con tu entidad bancaria para más información."}}[e.lang][e.code];if(!n)throw new Error(e.code);return n},y=(t="evolok:basket",i="evolok:properties",{basket:{get:function(){return ev.storage.load("session",t)},save:function(e){ev.storage.save("session",t,e,!0)},remove:function(e){ev.storage.remove("session",t),EV.Event.publish(EV.Event.PM_CLEARED_BASKET,e)}},extraProperties:{get:function(){return ev.storage.load("session",i)||ev.storage.save("session",i,{},!0),ev.storage.load("session",i)},save:function(e){ev.storage.save("session",i,e,!0)},remove:function(){ev.storage.remove("session",i)}}});return{init:function(t){t=t||{};const i=ev.accounts.getUser(),p=ev.utils.getParam("isGiftPurchase"),b=ev.utils.getFormFromId("simplUserInfoForm"),h=f(b.getFirst()).getFirst(),P=ev.utils.find(document,"#beneficiaryMessage");P&&P.val(""),u=ev.utils.find(document,".evl-payw-box--error"),c.initEvent("submit",!0,!0),ev.utils.find(document,e).on(["click"],(function(e){e.preventDefault(),ev.utils.spinner.show([],!0),w(o="card")})),ev.utils.find(document,n).on(["click"],(function(e){e.preventDefault(),ev.commons.queryParams.save(),ev.utils.spinner.show([".evl-pay-paypal"],!1,".evl-payw-box>"),w(o="paypal")}));var w=function(t){[e,n,a].forEach((function(e){ev.utils.find(document,e).prop("disabled",!0)})),EV.Event.publish(EV.Event.PM_PAYMENT_TYPE_ENFORCE,{paymentTypeName:t.toUpperCase(),showOtherPaymentMethods:!0})};EV.Event.on(EV.Event.PM_PAYMENT_TYPE_CHANGED,(function(){q()}));var q=function(){b.getFirst().dispatchEvent(c)};t={onSuccess:function(){S()},onFailure:function(){C()},ignoreSuccessMessage:!0,ignoreOnFailure:!1};ev.subscriptions.fiscal.init(t),ev.forms.onSubmit(b,(function(e,n){if(!ev.forms.validate(e))return Promise.reject({});if(n.beneficiary){if(n.beneficiary!==s){s=n.beneficiary;var a=y.basket.get();a.orderType="GIFT",y.basket.save(a);var t=y.extraProperties.get();t.beneficiary=s,n.beneficiaryMessage&&""!=n.beneficiaryMessage.trim()&&(t.beneficiaryMessage=n.beneficiaryMessage),y.extraProperties.save(t)}delete n.beneficiary}return ev.forms.sendDataToEvolok(n)}),(function(){h&&h.checked?ev.subscriptions.fiscal.dispatch():t.onSuccess()}),(function(e){"REQUIRE_UNIQUIE_PROFILE_AND_REALM"===e.code?ev.forms.utils.inputError(b.getFirst(),{field:"email_address",message:"Email existente"}):"ATTRIBUTE_VALIDATION_FAILED"===e.code&&ev.forms.utils.inputError(b.getFirst(),{field:"email_address",message:"Formato inválido"}),C()}),{ignoreSuccessMessage:!0});var S=function(){r.paymentMethod===o&&r.beneficiary===s?k():EV.Event.publish(EV.Event.PM_PROCESS_ORDER)};EV.Event.on(EV.Event.PM_CREATE_ORDER_SUCCESS,(function(e){r.paymentMethod=o,r.id=e.id,r.beneficiary=e.beneficiary||null,k()}));var k=function(){ev.service.requestFullInvoice(r.id).then((function(){A()})).catch((function(e){e.hasOwnProperty("errorMessage")&&ev.forms.utils.error(e.errorMessage)}))},A=function(){if("paypal"===o)return void EV.Event.publish(EV.Event.PM_DO_PAYPAL_CHECKOUT,{});if(function(){const e=["card-number","card-expiry","card-cvc"];for(var n=0;n<e.length;n++)if(ev.utils.find(document,"#"+e[n]).hasClass("invalid"))return!0;return!1}()&&(!d.enabled||"new-card"===d.screen))return void C();const e=ev.utils.find(document,"[attrib-data-hide=true]").asArray();e&&e.forEach((function(e){e&&(e.style="display:none")})),ev.utils.find(document,".stripe-payment-form").getFirst().dispatchEvent(c)};EV.Event.on(EV.Event.PM_PAYMENT_SUCCESS,(function(e){ev.commons.queryParams.save();var n={params:ev.commons.queryParams.get()};m(e,n)})),EV.Event.on(EV.Event.PM_ERROR,(function(e){if(402===(e=e||{}).status&&e.data&&"STREX0012"===e.data.appErrorCode){var n=null;const a=e.data.args.filter((function(e){return null!=e&&""!==e}));n=a.includes("card_declined")?a.filter((function(e){return"card_declined"!==e}))[0]:a[0],_(n)}else e.error?g(e.error):g(e);C()}));var C=function(){ev.utils.spinner.hide(),ev.commons.queryParams.delete(),[e,n,a].forEach((function(e){ev.utils.find(document,e).prop("disabled",!1)}))};h&&h.checked&&E(),ev.utils.addEventHandlerFromData("change","data-fiscal-change",(function(e,n){E()})),ev.utils.addEventHandlerFromData("keyup","bind-input",(function(e,n){R(e,n)}));var R=function(e,n){ev.utils.find(document,"["+n+"="+e.getAttribute(n)+"]").asArray().forEach((function(n){e.id!=n.id&&(n.value=e.value)}))};ev.utils.find(document,".card--red__btn").on(["click"],(function(){ev.gtm.pageview.trigger("payment"),u.removeClass("evl-payw-box--error-show"),ev.utils.find(document,".card--red__error-message").empty()})),ev.utils.find(document,a).on(["click"],(function(){if(d.enabled&&"new-card"===d.screen){var e=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});ev.utils.find(document,"#select-existing-card-panel-btn").dispatchEvent(e)}else ev.subscriptions.products.referrer.load()})),EV.Event.on(EV.Event.PM_STRIPE_PURCHASE_PANEL_NEW_CARD,(function(){l("new-card")})),EV.Event.on(EV.Event.PM_STRIPE_PURCHASE_PANEL_EXISTING_CARD,(function(){l("existing-card")})),v(),!i.hasActiveSubscription()||p&&"false"!==p||ev.commons.togglePopup("has-digital-access")},utils:y,renderSubscriptionInfo:v,handleWidgetPreloadEvents:function(){var e;e={},ev.commons.getURL().includes("paypal")&&(e=ev.utils.getQueryParams()),EV.Event.on(EV.Event.PM_SUBSCRIPTION_APPROVED,(function(){var n={params:ev.commons.queryParams.get()},a={approved:{processPaymentResults:[{purchaseId:e.subscription_id||null}]}};m(a,n)})),EV.Event.on(EV.Event.PM_SUBSCRIPTION_REJECTED,(function(){var e=ev.commons.queryParams.get();ev.utils.redirectWithParams("/perfil/ev/paywall/checkout",e)})),EV.Event.on(EV.Event.PM_SUBSCRIPTION_UPGRADED,(function(e){var n=function(){var e=ev.commons.queryParams.get();ev.utils.redirectWithParams("/perfil/ev/paywall/paypal/oferta-aplicada",e)};try{var a=e.approved.processPaymentResults[0];ev.service.changeSubscriptionCompleted(a.purchaseId,ev.subscriptions.digital.changeSubscriptionActionType.ALTA,a.roleAssignmentType).finally((function(){n()}))}catch(e){n()}})),EV.Event.on("pm.subscriptionUpgradeRejected",(function(){var e=ev.commons.queryParams.get();ev.utils.redirectWithParams("/perfil/ev/suscripciones",e)})),EV.Event.on(EV.Event.PM_STRIPE_PURCHASE_CARD_EXISTS,(function(e){if((e=e||{}).cardExists){d.enabled=!0;const e=ev.utils.find(document,"#existing-card-container").getFirst();if(!e)return;const n={attributes:!1,childList:!0,subtree:!0};new MutationObserver((function(e,n){for(var a=0;a<e.length;a++)if("childList"===e[a].type){var t=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});ev.utils.find(document,"#existing-card-container .card-thumbnail").getFirst().dispatchEvent(t),ev.utils.find(document,".evl-pay-paypal, .evl-payw-paypal__xtratitle").toggle();break}n.disconnect()})).observe(e,n)}else ev.utils.find(document,".cvc-help-container").toggle(),ev.utils.find(document,".evl-payw-creditcard-img").toggle();ev.utils.find(document,"#evPayment .evl-spinner").toggle()}))},link:function(){ev.forms.onSubmit(ev.utils.getFormFromId("linkSubscription"),(function(e,n){return ev.service.sap.link(n)}),(function(){ev.utils.find(document,"#linkSubscription").toggle(),ev.utils.find(document,"#linkSubscriptionSuccess").toggle(),ev.gtm.pageview.trigger("nif-ok")}),(function(e){e=e||{},ev.utils.find(document,"#linkSubscription").toggle();var n=ev.utils.find(document,"#linkSubscriptionFailure"),a=ev.utils.find(n.getFirst(),".evl-paywall-link__generic-error");e.errorCode&&"client.alreadyLinked"===e.errorCode&&(a=ev.utils.find(n.getFirst(),".evl-paywall-link__already-linked-error")),a.toggle(),n.toggle(),ev.gtm.pageview.trigger("nif-ko")}))}}}();
ev.print={init:function(){ev.forms.onSubmit(ev.utils.getFormFromId("vouchersForm"),(function(e,t){return ev.service.requestEVouchers(t)}),(function(e){ev.subscriptions.requestSuccess("vouchersForm",e.ticketId)})),ev.forms.onSubmit(ev.utils.getFormFromId("addressForm"),(function(e,t){const r=ev.utils.find(document,"[name=town]").getFirst(),i=ev.utils.find(document,"[name=streetName]").getFirst();return t.townCode=r.getAttribute("code"),t.streetCode=i.getAttribute("code"),ev.service.changeDelivery(t)}),(function(e){ev.subscriptions.requestSuccess("addressForm",e.ticketId)})),ev.forms.onSubmit(ev.utils.getFormFromId("editionForm"),(function(e,t){return ev.service.changeEdition(t)}),(function(e){ev.subscriptions.requestSuccess("editionForm",e.ticketId)})),ev.utils.addEventHandlerFromData("change","name=country",(function(e,t){const r=ev.utils.find(document,"[name=province]"),i=ev.utils.find(document,"[name=town]"),o=ev.utils.find(document,"[name=streetName]");"AND"===e.value?(lv.profile.streets.disable(),r.prop("required",!1),r.prop("disabled",!0),r.val(""),i.prop("disabled",!1),o.prop("disabled",!1)):(lv.profile.streets.enable(),r.prop("required",!0),r.prop("disabled",!1))}))}};
ev.recaptcha=function(){var e=[],c=!1,a=!1,r=function(e,c,a){var r=!1;this.render=function(){r||($(a.selector).append("<form id='"+e+"'><div id='"+c+"' class='livefyre-captcha-box' ></div></form>"),grecaptcha.render(c,{callback:a.callback,"expired-callback":a.expiredCallback,sitekey:ev.accounts.getMultitenantScriptConfig().recaptcha.key,size:"compact"}),r=!0)}};return{init:function(){c||a||(a=!0,gg.util.getScript("https://www.google.com/recaptcha/api.js?onload=grecaptchaOnLoad&render=explicit"),window.grecaptchaOnLoad=function(){c=!0,e.forEach((function(e){e.render()}))})},register:function(a){var t="gg-recaptcha-form-"+e.length,n="gg-recaptcha-renderel-"+e.length,i=new r(t,n,a);e.push(i),c&&i.render()}}}();
ev.screens=function(){var e,i={},t={click:function(i,t,n){var r="data-paywall-screen-"+t;e(i,"["+r+"]").each((function(e){e.addEventListener("click",(function(){n(this.getAttribute(r))}))}))},findInScreen:e=function(e,i){return ev.utils.find(document,'[data-paywall-screen-id="'+e+'"] '+i)}};return{factory:function(e,n,r,s,c){c=c||{},i[e]={flow:e,screen:n,layout:s,trail:[],load:function(){ev.screens.utils.findInScreen(this.flow,"[data-paywall-screen="+this.screen+"]").show(),c.triggerPageView&&ev.gtm.pageview.trigger(this.screen)},hide:function(){ev.screens.utils.findInScreen(this.flow,"[data-paywall-screen="+this.screen+"]").hide()},transition:function(e){this.trail.push(this.screen),this.hide(),this.screen=e,this.load()},back:function(){var e=this.trail.length;e>0&&(this.hide(),this.screen=this.trail[e-1],this.load(),this.trail.splice(e-1,1))},hasPrevious:function(){return this.trail.length>0}},function(e){var n=i[e];t.click(e,"transition",(function(e){n.transition(e)})),t.click(e,"back",(function(){n.back()}))}(e),c.triggerPageView&&(ev.gtm.source.save(r),ev.gtm.pageview.conf(s,e),ev.gtm.pageview.trigger(n))},registry:i,utils:t}}();
ev.serialize=function(){var e=function(e){for(var a={},n=0;n<e.length;n++)t(e[n],a);return a},t=function(e,t){t=t||{};var n=e.value,r=e.getAttribute("name");if(r){if("checkbox"===e.type||"radio"===e.type)if(null===e.getAttribute("value")||""===e.getAttribute("value"))n=!0===e.checked;else if(!e.checked&&"radio"===e.type)return;a({name:r,value:n},t)}return t},a=function(e,t){var n,r=e.name.match(/(.*?)\.(.*)/);if(r)if((n=r[1].split("[]")).length>1){t[n[0]]=t[n[0]]||[];var u={};t[n[0]].push(u),e.name=r[2],a(e,u)}else t[r[1]]=t[r[1]]||{},e.name=r[2],a(e,t[r[1]]);else(n=e.name.split("[]")).length>1?(t[n[0]]=t[n[0]]||[],e.value&&t[n[0]].push(e.value)):t[e.name]=e.value};return{form:function(t){return e(t.querySelectorAll("input:not([data-form-disabled=true]), select:not([data-form-disabled=true]), textarea:not([data-form-disabled=true])"))},elements:e,element:t}}();
ev.service=function(){const e=ev.accounts.getMultitenantScriptConfig().evolok.api.url,n=ev.accounts.getMultitenantScriptConfig().api.url,a=e+"/ic/api",t=e+"/acd/api/3.0",o=e+"/pm/api/v2",s=n+"user/ev",i="client_profile",r="social";var c=function(e,n){if(n=n||{},ev.accounts.isApp()){const e=ev.accounts.getAuthTokenFromUrl();n.facet="app",e&&(n["auth-token"]=e)}return Object.keys(n).length>0&&(e+=ev.utils.formatParams(n)),e};return{getUser:function(e,n){var t={type:"json",headers:{Accept:"application/json",Authorization:"Evolok evolok.api.service="+i+" evolok.api.sessionId="+n}};return ev.ajax.get(a+"/userProfile/"+e,t)},updateUser:function(e,n,t){var o={type:"json",headers:{Accept:"application/json",Authorization:"Evolok evolok.api.service="+i+" evolok.api.sessionId="+n}};return ev.ajax.put(a+"/userProfile/"+e,t,o)},getSocialGoogleSession:function(e){e.realmName="default_realm",e.serviceName=r,e.attributesMapping=[{name:"email_address",value:"email"}];var n={type:"json",headers:{Accept:"application/json",Authorization:"Evolok evolok.api.service=social"}};return ev.ajax.post(a+"/social/google/session?autoRegister=true&autoPopulate=true",e,n)},deleteAccount:function(){return ev.ajax.delete(c(s+"/delete"))},changeEdition:function(e){return ev.ajax.post(c(s+"/subscriptions/request/edition-change"),e,{type:"json"})},changeDelivery:function(e){return ev.ajax.post(c(s+"/subscriptions/request/delivery-change"),e,{type:"json"})},requestEVouchers:function(e){return ev.ajax.post(c(s+"/subscriptions/request/e-vouchers"),e,{type:"json"})},requestNewFidelityCard:function(e){return ev.ajax.post(c(s+"/subscriptions/request/new-club-card/"+e.cardType),e,{type:"json"})},setAttributesWhenRegistering:function(){return ev.ajax.post(c(s+"/register/default-attributes"))},updateUserFiscalAddress:function(e,n){n=n||{};return ev.ajax.post(c(s+"/subscriptions/paywall/update-fiscal-address",n),e,{type:"json"})},purchaseCompleted:function(e){return ev.ajax.post(c(s+"/subscriptions/paywall/purchase-completed"),e,{type:"json"})},requestFullInvoice:function(e){var n={};return n.orderId=e,ev.ajax.get(c(s+"/subscriptions/paywall/request-invoice",n))},loginCompleted:function(e,n,a,t){var o=e||{};n=n||{};ev.accounts.isApp();var i=ev.accounts.getUserSessionId(),r=s+"/logreg-done";a&&(r+="-apple"),"app"===n.facet&&(o.facet=n.facet);try{null==i&&t&&"object"==typeof t&&(i=t.mainSession.sessionId)}catch(e){}return i&&(o["auth-token"]="evolok--"+i),ev.ajax.get(c(r,o))},logout:function(e){var n={};return null!=e&&(n.evSessionId=e),ev.ajax.get(c(s+"/logout",n))},invalidateADCache:function(e){return ev.ajax.post(t+"/invalidate/user/"+e,{})},refreshAliasCookies:function(){return ev.ajax.get(c(s+"/refreshAliasCookies"))},socialLinkCompleted:function(){return ev.ajax.post(s+"/social-link-done",{})},onBeneficiaryAction:function(e,n){return ev.ajax.post(s+"/subscriptions/paywall/beneficiary-"+e,n,{type:"json"})},getBeneficiary:function(e){var n={type:"json",headers:{Accept:"application/json",Authorization:"Evolok evolok.api.sessionId="+ev.accounts.getUserSessionId()}};return ev.ajax.get(a+"/userProfile/"+ev.accounts.getUser().guid+"/grant/"+e,n)},getDigitalSubscriptions:function(){return ev.ajax.get(c(o+"/widget/account/purchases",{ev_ss:ev.accounts.getUserSessionId()}))},reactivateDigitalSubscription:function(e){return ev.ajax.post(c(o+"/widget/account/"+e.subscriptionId+"/cancel/revert",{ev_ss:ev.accounts.getUserSessionId()}))},loadDigitalSubscriptions:function(e){return ev.ajax.load(c(n+"ev/suscripciones/module/digital"),e)},loadUserInfoCollection:function(e,a){return ev.ajax.load(c(n+"ev/collect-user-info/"+e),a)},updateAvatar:function(e){var n=new FormData;return n.append("image",e),ev.ajax.post(c(s+"/update-avatar"),n,{processData:!1})},deleteAvatar:function(){return ev.ajax.delete(c(s+"/delete-avatar"))},validateHorecaPin:function(e){return ev.ajax.post(s+"/horeca/validate/pin",e,{type:"json"})},validateHorecaGeocoding:function(e){return ev.ajax.post(s+"/horeca/validate/geocoding",e,{type:"json"})},validateHorecaEpaper:function(e,n){return ev.ajax.post(s+"/horeca/validate/epaper"+(n?"/"+n:""),e,{type:"json"})},loadEpaperIssues:function(e,a,t){var o={purchaseId:a};return t&&(o.publication=t),ev.ajax.load(c(n+"ev/suscripciones/module/horeca/epaper/issues",o),e)},loadGeocodingConfirmation:function(e){return ev.ajax.load(c(n+"ev/horeca/address-geocoding"),e)},loadHorecaConfig:function(e){return ev.ajax.load(c(n+"ev/suscripciones/module/horeca/config"),e)},updateGeocoding:function(e,n){return ev.ajax.post(s+"/horeca/address-geocoding/"+e,n,{type:"json"})},deleteGeocoding:function(e){return ev.ajax.delete(s+"/horeca/address-geocoding/"+e)},loadChangeProducts:function(e,a){return ev.ajax.load(c(n+"ev/suscripciones/module/cambio-suscripcion/productos/"+a),e)},changeSubscription:function(e,n){return ev.ajax.post(o+"/widget/payment/"+e+"/changeProductPlan"+ev.utils.formatParams({ev_ss:ev.accounts.getUserSessionId()}),n,{type:"json",headers:{Accept:"application/json"}})},changeSubscriptionCompleted:function(e,n,a){return ev.ajax.post(s+"/subscriptions/paywall/change-subscription-done/"+e+"/"+n,a,{type:"json"})},cancelSubscription:function(e){return ev.ajax.get(o+"/widget/account/"+e.subscriptionId+"/cancel"+ev.utils.formatParams({cancelReasonId:e.cancelReason,ev_ss:ev.accounts.getUserSessionId(),immediately:e.cancelImmediately}),{headers:{Accept:"application/json"}})},loadSubscriptionSingleAction:function(e,a,t,o){return ev.ajax.load(c(n+"ev/suscripciones/module/acciones/"+a+"/"+e,o?{purchaseId:o}:null),t)},applyRetentionDiscount:function(e){return ev.ajax.post(c(s+"/subscriptions/paywall/apply-retention-discount"),e,{type:"json"})},sap:{load:{subscriptions:function(e){return ev.ajax.load(c(n+"ev/suscripciones/module/sap"),e)},invoices:function(e){return ev.ajax.load(c(n+"ev/suscripciones/module/sap/invoices"),e)},changePaymentCard:function(e,a,t){return ev.ajax.load(c(n+"ev/suscripciones/module/sap/change-payment-card",{issuingCompanyId:a,subscriptionId:t}),e)},cardManagement:function(e){return ev.ajax.load(c(n+"ev/suscripciones/module/sap/club-card-management"),e)},singleAction:function(e,a,t,o,s){var i="ev/suscripciones/module/sap/";return s&&(i+="e-paper/"),i+="acciones/",ev.ajax.load(c(n+i+a+"/"+e,o?"/"+{purchaseId:o}:null),t)},changeDelivery:function(e,a){return ev.ajax.load(c(n+"ev/suscripciones/module/sap/change-delivery",{subscriptionId:a}),e)},newspaperReplacement:function(e,a){return ev.ajax.load(c(n+"ev/suscripciones/module/sap/newspaper-replacement",{subscriptionId:a}),e)}},link:function(e){return ev.ajax.post(c(s+"/link"),e)},unlink:function(){return ev.ajax.delete(c(s+"/unlink"))},downloadInvoice:function(e,n){return ev.ajax.get(c(s+"/subscriptions/sap/invoices/get-pdf",{id:e,type:n}),{ignoreParsing:!0,responseType:"blob"})},handleFidelityCard:function(e){return ev.ajax.post(c(s+"/subscriptions/sap/handle-fidelity-card/"+e.action),e.data,{type:"json"})},changePaymentCard:function(e){return ev.ajax.post(c(s+"/subscriptions/sap/change-payment-card"),e,{type:"json"})},cancelSubscription:function(e){return ev.ajax.get(c(s+"/subscriptions/sap/cancel-subscription",e))},changeDelivery:function(e){return ev.ajax.post(c(s+"/subscriptions/sap/change-delivery"),e,{type:"json"})},changeEdition:function(e){return ev.ajax.post(c(s+"/subscriptions/sap/change-edition",e))},requestNewspaperReplacement:function(e){return ev.ajax.post(c(s+"/subscriptions/sap/newspaper-replacement"),e,{type:"json"})}},renfe:{cardSubscription:function(e){var n={};return n.renfeCardId=e,ev.ajax.post(c(s+"/subscriptions/renfe"),n)}},digital:{dowloadInvoice:function(e){return ev.ajax.get(c(n+"/ev/my-invoices/get-pdf",{transactionId:e}),{ignoreParsing:!0,responseType:"blob"})},actions:{reactivate:{load:{retentionDiscounts:function(e,a){return ev.ajax.load(c(n+"ev/suscripciones/module/reactivar-suscripcion/retention-discounts/"+a),e)}},applyRetentionDiscount:function(e){return ev.ajax.post(c(s+"/subscriptions/paywall/reactivate-subscription/apply-retention-discount"),e)}}}},landing:function(){const e=ev.accounts.getMultitenantScriptConfig().base.url+"/suscripciones/";var n={products:function(n,a){return ev.ajax.loadWithPayload(c(e+"landing/module/products"),n,a)},offers:function(n,a){return ev.ajax.loadWithPayload(c(e+"landing/module/offers"),n,a)},externalOffers:function(e,n,a){return ev.ajax.jsonp(e,{callback:n,version:a})}};return{load:n}}(),customerHelp:{request:function(e,n){return ev.ajax.post(c(s+"/customer-help/send-request/"+e),n,{type:"json"})}}}}();
ev.storage={save:function(t,e,o,r){try{window[t+"Storage"].setItem(e,JSON.stringify(o))}catch(t){if(!r)throw t}},load:function(t,e,o){try{return JSON.parse(window[t+"Storage"].getItem(e))}catch(t){if(!o)throw t}},remove:function(t,e,o){try{window[t+"Storage"].removeItem(e)}catch(t){if(!o)throw t}}};
ev.subscriptions=function(){const e=ev.accounts.getMultitenantScriptConfig().cookie.domain;var t,i,n,r,o,s,a,c,d,u,l,f,v=function(){const t="_ref-0";return{referrer:{save:function(){ev.cookie.set(t,window.location.href,null,e)},load:function(){const e=this.get();e?(this.delete(),ev.utils.redirect(e.replace("%2F","/"))):ev.commons.referrer.load({ignore:!0})},get:function(){return ev.cookie.get(t)},delete:function(){ev.cookie.remove(t,e)}}}}(),m=function(){const e=document.createEvent("Event");var t=null,i=null,n=function(){const e=ev.utils.find(document,"#removalFiscalAddressLink");ev.utils.isVisible(e.getFirst())||e.toggle()},r=function(){ev.forms.utils.error("Lo sentimos, estamos experimentando problemas técnicos, por favor reinténtalo en unos momentos.")},o=function(){"CIF"===ev.utils.find(t.getFirst(),"[name=document_type]").asArray().filter((function(e){return e.checked}))[0].value?(s("legal"),a("natural")):(s("natural"),a("legal")),ev.forms.utils.cleanErrors(t.getFirst())},s=function(e){var i=ev.utils.find(t.getFirst(),"#"+e+"Person");i.show(),ev.utils.find(i.getFirst(),"input[data-form-required=true]").prop("required",!0),ev.utils.find(i.getFirst(),"input").attr("data-form-disabled",!1)},a=function(e){var i=ev.utils.find(t.getFirst(),"#"+e+"Person");i.hide(),ev.utils.find(i.getFirst(),"input[data-form-required=true]").prop("required",!1),ev.utils.find(i.getFirst(),"input").attr("data-form-disabled",!0)};return{init:function(s){if(i=(s=s||{}).id||"fiscalAddressForm",s.customValidation=null===s.customValidation||void 0===s.customValidation||s.customValidation,s.onSuccess=s.onSuccess||n,s.onFailure=s.onFailure||r,s.ignoreOnFailure=void 0===s.ignoreOnFailure||s.ignoreOnFailure,t=ev.utils.getFormFromId(i),e.initEvent("submit",!0,!0),t){if(ev.forms.onSubmit(t,(function(e,t){return s.customValidation&&!ev.forms.validate(e)?Promise.reject({ignoreOnFailure:s.ignoreOnFailure}):(s.onValidated&&s.onValidated(),ev.service.updateUserFiscalAddress(t))}),s.onSuccess,s.onFailure,s),s.customValidation)t.attr("novalidate",!0);else{ev.utils.find(t.getFirst(),"input[data-form-required=true], select[data-form-required=true]").prop("required",!0)}ev.utils.find(t.getFirst(),"[data-form-change]").each((function(e){var t=null;"document_type"===e.getAttribute("data-form-change")&&(o(),t=function(){o()}),e.addEventListener("change",t)})),ev.utils.addEventHandlerFromData("click","data-fiscal-address=delete",(function(e,i){ev.service.updateUserFiscalAddress({}).then((function(){ev.utils.find(t.getFirst(),"input:not([type=radio]), select").val(""),ev.utils.find(t.getFirst(),"input[name=document_type][value=CIF]").prop("checked",!0),o(),ev.utils.find(document,"#removalFiscalAddressLink").toggle(),ev.utils.find(document,"#removalFiscalAddress").toggleClass("active")})).catch((function(e){ev.forms.utils.error(e.errorMessage)}))}))}},dispatch:function(){t.getFirst().dispatchEvent(e)},displayDependingDoc:o}}(),p=function(){var e=null;const t={BENEFICIARY_LIST:{id:"beneficiary-list"},ADD_BENEFICIARY:{id:"add-beneficiary"},REACTIVATE_SUBSCRIPTION:{id:"reactivate-subscription",url:"reactivar-suscripcion"},REACTIVATE_SUBSCRIPTION_PROMO:{id:"reactivate-subscription-promo",url:"reactivar-suscripcion-promo"},CHANGE_PAYMENT_METHOD:{id:"change-payment-method",url:"cambio-tarjeta"},CANCEL_SUBSCRIPTION:{id:"cancel-subscription",url:"cancelar-suscripcion"},CANCEL_SUBSCRIPTION_NOT_ALLOWED:{id:"cancel-subscription-not-allowed",url:"#"},CHANGE_SUBSCRIPTION:{id:"change-subscription",url:"cambio-suscripcion"}};var i,n,r,o,s={ALTA:"alta",BAJA:"baja"},a="PAYPAL",c=function(e){return p.subscriptions.filter((function(t){return t.id===e})).shift()},d=function(e){e=e||{};const t=".digital-subscriptions",i=ev.utils.find(document,t+"__container"),n=ev.utils.find(document,t+" .evl-spinner");i.getFirst()&&(n.show(),i.empty(),ev.service.loadDigitalSubscriptions(i).then((function(){n.hide(),b(e)})).catch((function(e){n.hide(),ev.utils.find(document,t+"__error").show()})))},u=function(e){e=e||{};const t=".subscription-single-action",i=ev.utils.find(document,t+"__container"),n=ev.utils.find(document,t+" .evl-spinner");i.getFirst()&&(n.show(),i.empty(),ev.service.loadSubscriptionSingleAction(e.action,e.layout,i,e.purchaseId).then((function(){n.hide(),b(e)})).catch((function(e){n.hide(),ev.utils.find(document,t+"__error").show()})))},l=(i=null,n=null,{init:function(e){e=e||{};const i="."+t.CHANGE_SUBSCRIPTION.id;var n=ev.utils.find(document,i+" .evl-spinner");n.show(),ev.utils.find(document,i+"__container").empty(),ev.utils.find(document,i+"__error").hide(),ev.service.loadChangeProducts(ev.utils.find(document,i+"__container"),e.id).then((function(){n.hide(),ev.utils.addEventHandlerFromData("click","data-product-id",(function(e,t){ev.utils.find(document,"[data-product-id]").removeClass("selected"),e.classList.add("selected"),ev.utils.find(document,"[data-paywall-screen='products'] .btn-primary").getFirst().removeAttribute("disabled"),ev.utils.find(document,"[data-paywall-screen='confirm'] [name='productId']").val(e.getAttribute(t))})),ev.utils.addEventHandlerFromData("click","data-paywall-screen-transition=confirm",(function(e,t){ev.gtm.push("myaccount","cambiar-suscripcion","continuar")}));const e=ev.utils.find(document,i+" [data-product-id]");if(e.getFirst()){var c=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});e.getFirst().dispatchEvent(c)}const d=ev.utils.getFormFromId(t.CHANGE_SUBSCRIPTION.id+"-form");ev.forms.onSubmit(d,(function(e,i){try{return ev.gtm.push("myaccount","cambiar-suscripcion","confirmar"),ev.screens.registry[t.CHANGE_SUBSCRIPTION.id].hide(),n.show(),l.purchase.paymentType!==a?ev.service.changeSubscription(l.purchase.id,r(i.productId)):(EV.Event.publish(EV.Event.PM_OPEN_CHANGE_PRODUCT_PLAN+"new",l.purchase),Promise.resolve(i))}catch(e){return Promise.reject(e||{})}}),(function(e){if(l.purchase.paymentType!==a){var r=e.processPaymentResults[0];ev.service.changeSubscriptionCompleted(r.purchaseId,s.ALTA,r.roleAssignmentType).finally((function(){n.hide(),ev.screens.registry[t.CHANGE_SUBSCRIPTION.id].transition("success"),ev.utils.find(document,i+" [data-paywall-screen='success'] .btn-default").once(["click"],(function(){EV.Event.publish(EV.GGEvent.PM_PURCHASE_CHANGED)})),ev.utils.find(document,i+" [data-paywall-screen='success'] .btn-primary").once(["click"],(function(){ev.commons.referrer.save()}))}))}else o.handleRedirect(t.CHANGE_SUBSCRIPTION.id,"products",e,n)}),(function(e){n.hide(),ev.screens.registry[t.CHANGE_SUBSCRIPTION.id].transition("products");try{if(e&&ev.utils.isArray(e)&&409===e[0].httpErrorCode&&e[0].message.includes("already exists"))return void ev.forms.utils.error(ev.commons.getErrorMessages().duplicated_purchase)}catch(e){}ev.forms.utils.error(ev.commons.getErrorMessages().generic)}),{ignoreSuccessMessage:!0}),ev.utils.find(document,i+"__container [data-subscription-popup]").on(["click"],(function(e,t){ev.utils.find(document,"#"+t.getAttribute("data-subscription-popup")).toggleClass("active"),ev.utils.find(document,"body").toggleClass("modal-open")}))})).catch((function(e){n.hide(),ev.utils.find(document,i+"__error").show()}))},get purchase(){return i},set purchase(e){i=e},get products(){return n},set products(e){n=e},buildOrder:r=function(e){const t=p.changeSubscription.products.filter((function(t){return t.id===e})).shift();if(!t)throw new Error;var i={id:null,orderItems:[],paymentType:l.purchase.paymentType,deliveryAddressGroup:l.purchase.deliveryAddressGroup||null,billingAddressGroup:l.purchase.billingAddressGroup||null,createdDate:null,lastModifiedDate:null,version:null,orderType:l.purchase.orderType};return i.orderItems.push({product:t,paymentPlan:t.paymentPlans[0],quantity:l.purchase.orderItem.quantity,startDate:null,endDate:null,startDeliveryDate:null}),i},paypal:o={handleRedirect:function(e,t,i,n){EV.Event.on(EV.Event.PM_PURCHASES_LIST_CHANGE_PRODUCTS_AVAILABLE,(function(){try{const r=l.products.filter((function(e){return e.id===i.productId})).shift();if(!r)throw new Error;if(!ev.utils.isArray(r.paymentPlans)||1!==r.paymentPlans.length)throw new Error;EV.Event.publish(EV.Event.PM_PURCHASES_LIST_CHANGE_PRODUCT,r.id),EV.Event.publish(EV.Event.PM_PURCHASES_LIST_CHANGE_PLAN,r.paymentPlans[0].id),ev.commons.queryParams.save(),EV.Event.publish(EV.Event.PM_PURCHASES_LIST_CHANGE_PURCHASE_CONFIRM),EV.Event.on(EV.Event.PM_ERROR,(function(i){i=i||{},ev.screens.registry[e].screen!==t&&(n&&n.hide(),ev.screens.registry[e].transition(t),409===i.statusCode&&i.error&&"duplicated_purchase"===i.error.code?ev.forms.utils.error(ev.commons.getErrorMessages().duplicated_purchase):ev.forms.utils.error(ev.commons.getErrorMessages().generic))}))}catch(i){n&&n.hide(),ev.screens.registry[e].transition(t),ev.forms.utils.error(ev.commons.getErrorMessages().generic)}}))}}}),f=function(){var e=null,i=[],n={CONFIRMATION:{id:"confirmation",analytics:{onLeave:function(){hj("event","continuar-video"),ev.gtm.push("myaccount","cancelar-suscripcion","continuar-video")}}},REASONS:{id:"reasons",analytics:{onLeave:function(){hj("event","continuar-motivos"),ev.gtm.push("myaccount","cancelar-suscripcion","continuar-motivos")}}},REASONS_NOT_TO_CANCEL:{id:"reasons-not-to-cancel",analytics:{onLeave:function(){hj("event","continuar-ventajas"),ev.gtm.push("myaccount","cancelar-suscripcion","continuar-ventajas")}}},OFFERS:{id:"offers",analytics:{onLeave:function(){hj("event","continuar-oferta"),ev.gtm.push("myaccount","cancelar-suscripcion","continuar-oferta")}}},CANCELLED:{id:"cancelled",analytics:{onLeave:null}},LOADING:{id:"loading",analytics:{onLeave:null}},OFFER_APPLIED:{id:"offer-applied",analytics:{onLeave:null}}};return{init:function(){const i="."+t.CANCEL_SUBSCRIPTION.id,r=ev.utils.getFormFromId(t.CANCEL_SUBSCRIPTION.id+"-form"),o=ev.utils.find(document,i+"__cancel-reasons select"),c=ev.utils.find(document,"[data-submit-form="+t.CANCEL_SUBSCRIPTION.id+"-form]"),d=ev.utils.find(document,i+"__container video");if(d.getFirst()){var u=d.getFirst();ev.utils.find(document,"[data-paywall-screen="+n.CONFIRMATION.id+"] [data-paywall-screen-transition="+n.REASONS.id+"]").on(["click"],(function(){try{u.currentTime>0&&!u.paused&&!u.ended&&u.readyState>2&&u.pause()}catch(e){}}))}ev.forms.onSubmit(r,(function(e,i){var r=ev.utils.find(document,"[data-paywall-screen="+ev.screens.registry[t.CANCEL_SUBSCRIPTION.id].screen+"] [data-submit-form="+t.CANCEL_SUBSCRIPTION.id+"-form]").getFirst().getAttribute("data-submit-screen");return r!==n.CANCELLED.id?Promise.resolve({screenTo:r}):(ev.screens.registry[t.CANCEL_SUBSCRIPTION.id].transition(n.LOADING.id),ev.service.cancelSubscription(i))}),(function(i){i=i||{};var r=Promise.resolve();e&&"PENDING"===e.status&&i.roleAssignmentType&&(r=ev.service.changeSubscriptionCompleted(e.id,s.BAJA,i.roleAssignmentType)),r.finally((function(){i.screenTo=i.screenTo?i.screenTo:n.CANCELLED.id,ev.screens.registry[t.CANCEL_SUBSCRIPTION.id].transition(i.screenTo)}))}),(function(e){ev.screens.registry[t.CANCEL_SUBSCRIPTION.id].transition(n.REASONS.id),ev.forms.utils.error(ev.commons.getErrorMessages().generic)}),{ignoreSuccessMessage:!0}),o.on(["change"],(function(){var e=o.getFirst();if(!e.value)return c.attr("data-submit-screen",""),void c.attr("disabled","");c.attr("data-submit-screen",n.CANCELLED.id),ev.utils.isArray(f.cancelReasonsToSkipOffers)&&f.cancelReasonsToSkipOffers.includes(e.value)||ev.utils.find(document,"[data-paywall-screen="+n.REASONS.id+"] [data-submit-form="+t.CANCEL_SUBSCRIPTION.id+"-form]").attr("data-submit-screen",n.REASONS_NOT_TO_CANCEL.id),c.removeAttr("disabled")})),c.on(["click"],(function(){var e=new Event("submit",{bubbles:!0,cancelable:!0});r.getFirst().dispatchEvent(e)})),ev.utils.addEventHandlerFromData("click","data-product-id",(function(e,i){ev.utils.find(document,'[data-paywall-screen] ~ [data-paywall-screen="offers"][data-screen-version="2"]').getFirst()||(ev.utils.find(document,"[data-paywall-screen-id=retention-discounts] [data-offer-id]").removeClass("selected"),ev.utils.find(document,"[data-paywall-screen-id="+t.CHANGE_SUBSCRIPTION.id+"] [data-product-id]").removeClass("selected"),e.classList.add("selected"),ev.utils.find(document,"[data-paywall-screen-id="+t.CHANGE_SUBSCRIPTION.id+"] [data-paywall-screen='confirm'] [name='productId']").val(e.getAttribute(i)),ev.utils.find(document,"[data-paywall-screen="+n.OFFERS.id+"] [data-submit-screen="+n.OFFER_APPLIED.id+"]").attr("data-submit-form",t.CHANGE_SUBSCRIPTION.id+"-form"),ev.utils.find(document,"[data-paywall-screen="+n.OFFERS.id+"] [data-submit-screen="+n.OFFER_APPLIED.id+"]").removeAttr("disabled"))}));const v=ev.utils.find(document,"[data-paywall-screen-id="+t.CHANGE_SUBSCRIPTION.id+"] [data-product-id]");if(v.getFirst()){var m=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});v.getFirst().dispatchEvent(m)}ev.forms.onSubmit(ev.utils.getFormFromId(t.CHANGE_SUBSCRIPTION.id+"-form"),(function(e,i){try{return ev.screens.registry[t.CANCEL_SUBSCRIPTION.id].transition(n.LOADING.id),f.purchase.paymentType!==a?ev.service.changeSubscription(f.purchase.id,l.buildOrder(i.productId)):(EV.Event.publish(EV.Event.PM_OPEN_CHANGE_PRODUCT_PLAN+"new",l.purchase),Promise.resolve(i))}catch(e){return Promise.reject(e||{})}}),(function(e){if(l.purchase.paymentType!==a){var i=e.processPaymentResults[0];ev.service.changeSubscriptionCompleted(i.purchaseId,s.ALTA,i.roleAssignmentType).finally((function(){ev.screens.registry[t.CANCEL_SUBSCRIPTION.id].transition(n.OFFER_APPLIED.id)}))}else l.paypal.handleRedirect(t.CANCEL_SUBSCRIPTION.id,n.OFFERS.id,e)}),(function(e){ev.screens.registry[t.CANCEL_SUBSCRIPTION.id].transition(n.OFFERS.id);try{if(e&&ev.utils.isArray(e)&&409===e[0].httpErrorCode&&e[0].message.includes("already exists"))return void ev.forms.utils.error(ev.commons.getErrorMessages().duplicated_purchase)}catch(e){}ev.forms.utils.error(ev.commons.getErrorMessages().generic)}),{ignoreSuccessMessage:!0}),ev.utils.addEventHandlerFromData("click","data-offer-id",(function(e,i){ev.utils.find(document,'[data-paywall-screen] ~ [data-paywall-screen="offers"][data-screen-version="2"]').getFirst()||(ev.utils.find(document,"[data-paywall-screen-id="+t.CHANGE_SUBSCRIPTION.id+"] [data-product-id]").removeClass("selected"),ev.utils.find(document,"[data-paywall-screen-id=retention-discounts] [data-offer-id]").removeClass("selected"),e.classList.add("selected"),ev.utils.find(document,"[data-paywall-screen-id=retention-discounts] [data-paywall-screen='confirm'] [name='offerId']").val(e.getAttribute(i)),ev.utils.find(document,"[data-paywall-screen="+n.OFFERS.id+"] [data-submit-screen="+n.OFFER_APPLIED.id+"]").attr("data-submit-form","retention-discounts-form"),ev.utils.find(document,"[data-paywall-screen="+n.OFFERS.id+"] [data-submit-screen="+n.OFFER_APPLIED.id+"]").removeAttr("disabled"))}));const p=ev.utils.find(document,"[data-paywall-screen-id=retention-discounts] [data-offer-id]");if(p.getFirst()&&!v.getFirst()){m=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});p.getFirst().dispatchEvent(m)}if(ev.forms.onSubmit(ev.utils.getFormFromId("retention-discounts-form"),(function(e,i){try{return ev.gtm.push("myaccount","cancelar-suscripcion","acepto-oferta"),ev.screens.registry[t.CANCEL_SUBSCRIPTION.id].transition(n.LOADING.id),ev.service.applyRetentionDiscount({purchaseId:f.purchase.id,offerId:i.offerId})}catch(e){return Promise.reject(e||{})}}),(function(e){ev.screens.registry[t.CANCEL_SUBSCRIPTION.id].transition(n.OFFER_APPLIED.id)}),(function(e){ev.screens.registry[t.CANCEL_SUBSCRIPTION.id].transition(n.OFFERS.id),ev.forms.utils.error(ev.commons.getErrorMessages().generic)}),{ignoreSuccessMessage:!0}),ev.utils.find(document,"[data-paywall-screen="+n.OFFERS.id+"] [data-submit-screen="+n.OFFER_APPLIED.id+"]").on(["click"],(function(e,t){var i=new Event("submit",{bubbles:!0,cancelable:!0});t.getAttribute("data-submit-form")&&ev.utils.getFormFromId(t.getAttribute("data-submit-form")).getFirst().dispatchEvent(i)})),Object.keys(n).forEach((function(e){const t=n[e];"function"==typeof t.analytics.onLeave&&ev.utils.find(document,"[data-paywall-screen="+t.id+"] .continue__button").on(["click"],(function(){t.analytics.onLeave()}))})),ev.utils.find(document,'[data-paywall-screen] ~ [data-paywall-screen="offers"][data-screen-version="2"]').getFirst()){const e='[data-paywall-screen] ~ [data-paywall-screen="offers"][data-screen-version="2"]',i=ev.utils.find(document,e+" .split-screen"),r=ev.utils.find(document,e+" .offers__content"),o=ev.utils.find(document,e+" .current_offer"),s=ev.utils.find(document,e+" .toggle-button"),a=ev.utils.find(document,e+" .view_new_offer"),c=(ev.utils.find(document,e+" .tap_new_offer"),ev.utils.find(document,e+" .offers__text"),function(e){const t=e.orderItem.finalPrice;return 2===t.split(".").length&&"00"===t.split(".")[1]?t.split(".")[0]:t}),d=function(e){const t=e.orderItem;return"BUNDLE"===t.product.type?t.bundlePlan.frequency.displayName:t.paymentPlan.frequency.displayName}(f.purchase),u=c(f.purchase);var g=!0;o.append("<span>"+u.replace(".",",")+" €/"+("Mensual"===d?"mes":"Anual"===d?"Año":d)+"</span>"),ev.utils.find(document,"[data-paywall-screen="+n.OFFERS.id+"] [data-submit-screen="+n.OFFER_APPLIED.id+"]").removeAttr("disabled"),s.on(["click"],(function(){g?(i.style("transform","translateX(90%)"),s.style("right","calc(100% - 25px)"),o.removeClass("fade-in"),o.addClass("fade-out"),a.removeClass("fade-in"),a.addClass("fade-out"),setTimeout((function(){o.hide(),o.removeClass("fade-out"),o.addClass("fade-in"),a.hide(),r.style("visibility","unset")}),200),s.style("transform","rotate(180deg)"),g=!1):(i.style("transform","translateX(0)"),s.style("right","calc(100% - 25px)"),o.removeClass("fade-in"),o.addClass("fade-out"),a.removeClass("fade-in"),a.addClass("fade-out"),setTimeout((function(){o.show(),o.removeClass("fade-out"),o.addClass("fade-in"),a.show(),a.removeClass("fade-out"),a.addClass("fade-in"),r.style("visibility","hidden")}),200),s.style("transform","rotate(0deg)"),g=!0)}));const l=function(e,t,i,r){ev.utils.find(document,"[data-paywall-screen="+n.OFFERS.id+"] [data-offer-id]").removeClass("selected"),ev.utils.find(document,"[data-paywall-screen="+n.OFFERS.id+"] [data-product-id]").removeClass("selected"),e.classList.add("selected"),ev.utils.find(document,"#"+i+"-form [name='"+r+"']").val(e.getAttribute(t));var o=new Event("submit",{bubbles:!0,cancelable:!0});ev.utils.getFormFromId(i+"-form").getFirst().dispatchEvent(o)};ev.utils.addEventHandlerFromData("click","data-product-id",(function(e,i){l(e,i,t.CHANGE_SUBSCRIPTION.id,"productId")})),ev.utils.addEventHandlerFromData("click","data-offer-id",(function(e,t){l(e,t,"retention-discounts","offerId")}))}ev.utils.find(document,"footer").hide();ev.utils.find(document,"body").style("background-color","#fff")},get purchase(){return e},set purchase(t){e=t},get cancelReasonsToSkipOffers(){return i},set cancelReasonsToSkipOffers(e){i=e}}}(),v=function(e){if(e){var i=ev.utils.getFormFromId(e.action.id+"-form");switch(e.action.id){case t.CANCEL_SUBSCRIPTION.id:const n="."+e.action.id;ev.forms.onSubmit(i,(function(t,i){return ev.gtm.push("myaccount","cancelar-suscripcion","confirmar"),ev.screens.registry[e.action.id].transition("submitting"),e.onSubmit(i)}),(function(t){var i=Promise.resolve(),r=c(t.purchase.id);r&&"PENDING"===r.status&&(i=ev.service.changeSubscriptionCompleted(r.id,s.BAJA,t.roleAssignmentType)),i.finally((function(){ev.screens.registry[e.action.id].transition("success"),ev.utils.find(document,n+" [data-paywall-screen='success'] .btn-default").once(["click"],(function(){EV.Event.publish(EV.Event.PM_PURCHASE_CANCELLED,r)}))}))}),(function(){ev.screens.registry[e.action.id].transition("confirm"),ev.forms.utils.error(ev.commons.getErrorMessages().generic)}),{ignoreSuccessMessage:!0}),ev.utils.find(document,n+" [data-paywall-screen='confirm'] select").on(["change"],(function(e,t){const i=ev.utils.find(document,n+" [data-paywall-screen='confirm'] .btn-primary");0!==t.selectedIndex?i.show():i.hide()}));break;case t.REACTIVATE_SUBSCRIPTION.id:ev.forms.onSubmit(i,(function(t,i){return ev.gtm.push("myaccount","reactivar-suscripcion","confirmar"),e.onSubmit(i)}),(function(){ev.utils.find(document,"body").toggleClass("modal-open"),ev.utils.find(document,"#"+e.action.id).toggleClass("active"),EV.Event.publish(EV.GGEvent.PM_PURCHASE_REACTIVATED)}),(function(){ev.forms.utils.error(ev.commons.getErrorMessages().generic)}))}ev.utils.addEventHandlerFromData("click","data-subscription-action="+e.action.id,(function(i,n){const r=c(i.getAttribute("data-subscription-id"));if(!r&&"SAP"!=i.getAttribute("data-subscription-type"))return;if("embedded"===i.getAttribute("data-layout")&&("md"===gg.breakpoint.getCurrent()||"false"===i.getAttribute("data-lock-xs")))return void m(e.action,r.id);var o=ev.utils.getFormFromId(e.action.id+"-form");const s="."+e.action.id;switch(e.action.id){case t.CHANGE_SUBSCRIPTION.id:ev.commons.togglePopup(e.action.id),l.init({id:r.id}),ev.gtm.push("myaccount","cambiar-suscripcion","cambiar-suscripcion");break;case t.CANCEL_SUBSCRIPTION.id:"SAP"!=i.getAttribute("data-subscription-type")&&(ev.screens.registry[e.action.id].transition("xs"===gg.breakpoint.getCurrent()&&"true"===i.getAttribute("data-lock-xs")?"lock-xs":"confirm"),ev.utils.find(document,s+" [data-paywall-screen='confirm'] .btn-primary").hide(),ev.utils.find(document,s+" [data-paywall-screen='confirm'] select").getFirst().selectedIndex=0,ev.utils.find(o.getFirst(),"[name='cancelImmediately']").val(i.getAttribute("data-cancel-immediately")),ev.utils.find(o.getFirst(),"[name='subscriptionId']").val(r.id),ev.gtm.push("myaccount","cancelar-suscripcion","cancelar-suscripcion"));break;case t.REACTIVATE_SUBSCRIPTION.id:ev.utils.find(o.getFirst(),"[name='subscriptionId']").val(r.id),ev.gtm.push("myaccount","reactivar-suscripcion","reactivar-suscripcion");break;case t.REACTIVATE_SUBSCRIPTION_PROMO.id:ev.commons.togglePopup(e.action.id);var a=ev.utils.find(document,s+" .evl-spinner");a.show(),ev.utils.find(document,s+"__container").empty(),ev.utils.find(document,s+"__error").hide(),ev.service.digital.actions.reactivate.load.retentionDiscounts(ev.utils.find(document,s+"__container"),r.id).then((function(){a.hide();var i=ev.utils.getFormFromId(t.REACTIVATE_SUBSCRIPTION_PROMO.id+"-form");i.getFirst()&&ev.utils.find(i.getFirst(),"[name='purchaseId']").val(r.id),ev.forms.onSubmit(i,(function(i,n){return ev.screens.registry[t.REACTIVATE_SUBSCRIPTION_PROMO.id].transition("loading"),ev.gtm.push("myaccount","reactivar-suscripcion-promo","confirmar"),e.onSubmit(n)}),(function(){ev.screens.registry[t.REACTIVATE_SUBSCRIPTION_PROMO.id].transition("success"),ev.utils.find(document,"[data-paywall-screen-id="+t.REACTIVATE_SUBSCRIPTION_PROMO.id+"] [data-paywall-screen='success'] .btn-default").once(["click"],(function(){EV.Event.publish(EV.GGEvent.PM_PURCHASE_REACTIVATED_PROMO)}))}),(function(e){e=e||{},ev.screens.registry[t.REACTIVATE_SUBSCRIPTION_PROMO.id].transition("confirm"),e.errorMessage||ev.forms.utils.error(ev.commons.getErrorMessages().generic)}),{ignoreSuccessMessage:!0}),ev.utils.addEventHandlerFromData("click","data-offer-id",(function(e,i){ev.utils.find(document,"[data-paywall-screen-id="+t.REACTIVATE_SUBSCRIPTION_PROMO.id+"] [data-offer-id]").removeClass("selected"),e.classList.add("selected"),ev.utils.find(document,"[data-paywall-screen-id="+t.REACTIVATE_SUBSCRIPTION_PROMO.id+"] [name='offerId']").val(e.getAttribute(i))})),ev.utils.find(document,s+"__container [data-subscription-popup]").on(["click"],(function(e,t){ev.utils.find(document,"#"+t.getAttribute("data-subscription-popup")).toggleClass("active"),ev.utils.find(document,"body").toggleClass("modal-open")}));const n=ev.utils.find(document,"[data-paywall-screen-id="+t.REACTIVATE_SUBSCRIPTION_PROMO.id+"] [data-offer-id]");if(n.getFirst()){var o=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});n.getFirst().dispatchEvent(o)}})).catch((function(e){a.hide(),ev.utils.find(document,s+"__error").show()})),ev.gtm.push("myaccount","reactivar-suscripcion-promo","reactivar-suscripcion-promo")}ev.utils.find(document,s+"-sap [data-paywall-screen='confirm'] select").on(["change"],(function(e,t){const i=ev.utils.find(document,s+"-sap [data-paywall-screen='confirm'] .btn-primary");0!==t.selectedIndex?i.show():i.hide()}));const u=ev.utils.getFormFromId(t.CANCEL_SUBSCRIPTION.id+"-sap-form");ev.forms.onSubmit(u,(function(t,i){return ev.screens.registry[e.action.id].transition("submitting"),ev.service.sap.cancelSubscription(i)}),(function(t){ev.screens.registry[e.action.id].transition("success")}),(function(t){if(t&&"object"==typeof t){const i=t.validationErrors||[];return o.each((function(e){i.forEach((function(t){ev.forms.utils.inputError(e,{field:t.field,message:ev.commons.getErrorMessages().invalid_format})}))})),void ev.screens.registry[e.action.id].back()}ev.screens.registry[e.action.id].transition("confirm"),ev.forms.utils.error(ev.commons.getErrorMessages().generic)}),{ignoreSuccessMessage:!0,ignoreFailureMessage:!0,ignoreValidationErrors:!0}),ev.utils.addEventHandlerFromData("click","data-subscription-refresh",(function(e,t){"true"!==e.getAttribute(t)||d()})),e.action&&e.action.id!==t.CHANGE_SUBSCRIPTION.id&&e.action.id!==t.REACTIVATE_SUBSCRIPTION_PROMO.id&&("true"===i.getAttribute("data-custom-action")||e.action.id===t.CANCEL_SUBSCRIPTION.id&&"xs"===gg.breakpoint.getCurrent()&&"true"===i.getAttribute("data-lock-xs"))&&(ev.utils.find(document,"body").toggleClass("modal-open"),ev.utils.find(document,"#"+i.getAttribute("data-subscription-action")).toggleClass("active"))}))}},m=function(e,t){ev.commons.referrer.save(),ev.utils.redirect("/perfil/ev/suscripciones/"+e.url+"/"+t)},g=function(e,t,i){if(!t)return;const n=c(e.getAttribute("data-subscription-id"));n&&"embedded"!==e.getAttribute("data-layout")&&EV.Event.publish(EV.Event[t],i?n.id:n)},E=function(e,i){if(i=i||[],(e=e||{}).registerHandlers&&(ev.utils.addEventHandlerFromData("click","data-subscription-action="+t.CHANGE_PAYMENT_METHOD.id,(function(e,t){"SAP"===e.getAttribute("data-subscription-type")?(ev.subscriptions.sap.changePaymentCard.refresh({issuingCompany:e.getAttribute("data-issuing-company"),subscriptionId:e.getAttribute("data-subscription-id")}),ev.gtm.push("myaccount","cambiar-tarjeta","confirmar"),ev.utils.find(document,"body").toggleClass("modal-open"),ev.utils.find(document,"#"+e.getAttribute("data-subscription-action")).toggleClass("active")):(ev.gtm.push("myaccount","modificar-tarjeta","cambiar"),g(e,"PM_OPEN_CHANGE_CARD"))})),ev.utils.addEventHandlerFromData("click","data-subscription-action="+t.BENEFICIARY_LIST.id,(function(e,t){g(e,"PM_OPEN_BENEFICIARY_LIST")})),ev.utils.addEventHandlerFromData("click","data-subscription-action="+t.ADD_BENEFICIARY.id,(function(e,t){g(e,"PM_OPEN_ADD_BENEFICIARY",!0)})),ev.utils.addEventHandlerFromData("click","data-subscription-action="+t.CANCEL_SUBSCRIPTION.id,(function(e,i){if("SAP"==e.getAttribute("data-subscription-type")){const i="."+t.CANCEL_SUBSCRIPTION.id+"-sap";var n=ev.utils.getFormFromId(t.CANCEL_SUBSCRIPTION.id+"-sap-form");ev.screens.registry[t.CANCEL_SUBSCRIPTION.id].transition("confirm"),ev.utils.find(document,i+" [data-paywall-screen='confirm'] .btn-primary").hide(),ev.utils.find(document,i+" [data-paywall-screen='confirm'] select").getFirst().selectedIndex=0,ev.utils.find(n.getFirst(),"[name='subscriptionId']").val(e.getAttribute("data-subscription-id")),ev.gtm.push("myaccount","cancelar-suscripcion","cancelar-suscripcion"),ev.utils.find(document,"body").toggleClass("modal-open"),ev.utils.find(document,"#"+e.getAttribute("data-subscription-action")).toggleClass("active")}else"false"!==e.getAttribute("data-custom-action")||"md"!==gg.breakpoint.getCurrent()&&"false"!==e.getAttribute("data-lock-xs")||(hj("event","cancelar-suscripcion"),ev.gtm.push("myaccount","cancelar-suscripcion","cancelar-suscripcion"),g(e,"PM_OPEN_CANCEL_PURCHASE"))})),ev.utils.addEventHandlerFromData("click","data-subscription-action="+t.CANCEL_SUBSCRIPTION_NOT_ALLOWED.id,(function(e,i){ev.commons.togglePopup(t.CANCEL_SUBSCRIPTION_NOT_ALLOWED.id)})),v({action:t.REACTIVATE_SUBSCRIPTION,onSubmit:function(e){return ev.service.reactivateDigitalSubscription(e)}}),v({action:t.CANCEL_SUBSCRIPTION,onSubmit:function(e){return ev.service.cancelSubscription(e)}}),v({action:t.CHANGE_SUBSCRIPTION}),v({action:t.REACTIVATE_SUBSCRIPTION_PROMO,onSubmit:function(e){return ev.service.digital.actions.reactivate.applyRetentionDiscount(e)}}),ev.utils.addEventHandlerFromData("click","data-subscription-popup",(function(e,t){ev.utils.find(document,"#"+e.getAttribute(t)).toggleClass("active"),ev.utils.find(document,"body").toggleClass("modal-open")}))),e.autoTriggerSingleAction){var n=ev.utils.find(document,"[data-subscription-action]");if(1===n.asArray().length){var r=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});n.getFirst().dispatchEvent(r)}}e.registerOnActionHandler&&(EV.Event.on(EV.Event.PM_PURCHASE_CANCELLED,(function(){u({action:t.CANCEL_SUBSCRIPTION.id,layout:e.layout,purchaseId:e.purchaseId}),d()})),EV.Event.on(EV.Event.PM_CARD_UPDATED,(function(){u({action:t.CHANGE_PAYMENT_METHOD.id,layout:e.layout,purchaseId:e.purchaseId}),d()})),EV.Event.on(EV.GGEvent.PM_PURCHASE_CHANGED,(function(){u({action:t.CHANGE_SUBSCRIPTION.id,layout:e.layout,purchaseId:e.purchaseId}),d()})),EV.Event.on(EV.GGEvent.PM_PURCHASE_REACTIVATED,(function(){u({action:t.REACTIVATE_SUBSCRIPTION.id,layout:e.layout,purchaseId:e.purchaseId}),d()})),EV.Event.on(EV.GGEvent.PM_PURCHASE_REACTIVATED_PROMO,(function(){u({action:t.REACTIVATE_SUBSCRIPTION_PROMO.id,layout:e.layout,purchaseId:e.purchaseId}),d()})))},b=function(t){void 0===(t=t||{}).registerHandlers&&(t.registerHandlers=!0),null!=e?E(t,e):function(t){t=t||{},ev.service.getDigitalSubscriptions().then((function(i){e=i,E(t,i)})).catch((function(i){E(t,e)}))}(t)};return{init:b,refreshSubscriptions:d,refreshSubscriptionSingleAction:u,changeSubscription:l,changeSubscriptionActionType:s,cancelSubscription:f,invoices:{init:function(e){e=e||{};var t=function(e,t){var i=document.createElement("a");i.href=window.URL.createObjectURL(e),i.download=t+".pdf",i.style.display="none",document.body.appendChild(i),i.click()};ev.utils.addEventHandlerFromData("click","data-invoice-id",(function(e,i){const n=e.getAttribute("data-invoice-id"),r=e.getAttribute("data-transaction-id");if(document.body.style.cursor="wait","SAP"!=e.getAttribute("data-invoice-source"))ev.service.digital.dowloadInvoice(r).then((function(e){t(e,n)})).catch((function(){ev.forms.utils.error(ev.commons.getErrorMessages().generic)})).finally((function(){document.body.style.cursor="default"}));else{const i=e.getAttribute("data-invoice-type");ev.service.sap.downloadInvoice(n,i).then((function(e){t(e,n),ev.gtm.push("myaccount"," factura-descargar","factura")})).catch((function(){ev.forms.utils.error(ev.commons.getErrorMessages().generic)})).finally((function(){document.body.style.cursor="default"}))}}))}},get subscriptions(){return e},set subscriptions(t){e=t}}}(),g=function(){const e={CHANGE_PAYMENT_METHOD:{id:"change-payment-method",url:"cambio-tarjeta"},CANCEL_SUBSCRIPTION:{id:"cancel-subscription",url:"cancelar-suscripcion"},CHANGE_EDITION:{id:"change-edition"},CHANGE_DELIVERIES:{id:"change-deliveries",url:"entregas"},NEWSPAPER_REPLACEMENT:{id:"newspaper-replacement",url:"reposicion"},INVOICES:{id:"invoices"}};var t,i=function(e){e=e||{};const t=ev.utils.find(document,e.selector+"__container"),i=ev.utils.find(document,e.selector+" .evl-spinner"),n=ev.utils.find(document,e.selector+"__error");if(t.getFirst())return i.show(),t.empty(),n.hide(),e.load(t,e).then((function(){return i.hide(),Promise.resolve()})).catch((function(e){return i.hide(),Promise.reject(e)}))},n={refresh:t=function(n){(n=n||{}).selector="."+e.CHANGE_DELIVERIES.id;var r=ev.utils.find(document,"#subscriptionId").getFirst().value;i({selector:n.selector,load:function(e,t){return ev.service.sap.load.changeDelivery(e,r)},subscriptionId:r}).then((function(){!function(i){i=i||{},ev.forms.onSubmit(ev.utils.getFormFromId(e.CHANGE_DELIVERIES.id+"-form"),(function(e,t){return t=t||{},ev.forms.validate(e)?(ev.utils.find(document,"[data-paywall-screen=buttons]").hide(),ev.utils.find(document,"[data-paywall-screen=loading]").show(),t.address&&Object.keys(t.address).forEach((function(e){if(e.match("city|streetName")){const i=$("[name='address."+e+"']");i&&(i.length&&null!=i.data()&&null!=i.data().value&&""!=i.data().value?t.address[e+"Id"]=i.data().value?i.data().value:i.val():"streetName"==e&&i.length&&null!=i.data()&&null!=i.data().code?t.address[e+"Id"]=i.data().code?i.data().code:i.val():i.val(""))}})),ev.service.sap.changeDelivery(t)):Promise.reject({ignoreOnFailure:!0})}),(function(e){document.getElementById("card-modal-message-successful").innerHTML=e.message,ev.utils.find(document,"[data-paywall-screen=modal-message-successful]").show(),ev.utils.find(document,"[data-paywall-screen=loading]").hide()}),(function(e){document.getElementById("card-modal-message-error").innerHTML=e.errorMessage,ev.utils.find(document,"[data-paywall-screen=modal-message-error]").show(),ev.utils.find(document,"[data-paywall-screen=loading]").hide()}),{ignoreSuccessMessage:!0,ignoreFailureMessage:!0}),ev.utils.find(document,"[data-paywall-screen-id='"+e.CHANGE_DELIVERIES.id+"'] input[id=check-type]").on(["click"],(function(t,i){const n=i.value,r=ev.utils.find(document,"form[id="+e.CHANGE_DELIVERIES.id+"-form").getFirst(),o=ev.utils.find(r,".endDate");n.includes("undefined")?o.hide():o.show()})),ev.utils.addEventHandlerFromData("click","data-subscription-popup",(function(e,t){ev.utils.find(document,"#"+e.getAttribute(t)).toggleClass("active"),ev.utils.find(document,"body").toggleClass("modal-open"),ev.gtm.push("myaccount","cambio-entrega-iniciotramite","modificar")})),ev.utils.addEventHandlerFromData("click","data-modal-popup",(function(e,t){ev.utils.find(document,"[data-paywall-screen=modal-message-error]").hide(),ev.utils.find(document,"[data-paywall-screen=buttons]").show()})),ev.utils.addEventHandlerFromData("click","data-subscription-refresh",(function(e,n){"true"!==e.getAttribute(n)||t(i)})),ev.utils.find(document,"[data-paywall-screen-id='"+e.CHANGE_DELIVERIES.id+"'] input[id=check-type-days-week]").on(["click"],(function(t,i){const n=i.value,r=ev.utils.find(document,"form[id="+e.CHANGE_DELIVERIES.id+"-form").getFirst(),o=ev.utils.find(r,".selectionDays");n.includes("selectedDays")?o.show():o.hide()})),ev.utils.find(document,"[data-paywall-screen-id='"+e.CHANGE_DELIVERIES.id+"'] select[name*=deliveryType]").on(["change"],(function(t,i){var n=ev.utils.find(document,"[data-paywall-screen-id='"+e.CHANGE_DELIVERIES.id+"'] .delivery-address");0===t.currentTarget.selectedIndex?n.show():n.hide(),n.getFirst()&&ev.utils.find(n.getFirst(),"input, select").attr("data-form-disabled",0===t.currentTarget.selectedIndex?"false":"true")})),ev.utils.find(document,"[data-paywall-screen-id='"+e.CHANGE_DELIVERIES.id+"'] select[name*=specialIndications]").on(["change"],(function(t,i){var n=ev.utils.find(document,"[data-paywall-screen-id='"+e.CHANGE_DELIVERIES.id+"'] .others-indications");i.selectedIndex===t.currentTarget.length-1?n.show():n.hide()}))}(n)})).catch((function(e){ev.utils.find(document,n.selector+"__error").show()}))}},r={refresh:function(t){(t=t||{}).selector="."+e.NEWSPAPER_REPLACEMENT.id;var n=ev.utils.find(document,"#subscriptionId").getFirst().value;i({selector:t.selector,load:function(e,t){return ev.service.sap.load.newspaperReplacement(e,n)},subscriptionId:n}).then((function(){!function(t){t=t||{},ev.forms.onSubmit(ev.utils.getFormFromId(e.NEWSPAPER_REPLACEMENT.id+"-selection-form"),(function(e,t){return ev.gtm.push("myaccount","no_recibi_diario","no_recibi_diario_inicia_accion"),Promise.resolve(t)}),(function(i){ev.utils.find(document,t.selector+" [data-paywall-screen='confirm'] div").hide(),ev.utils.find(document,t.selector+" [data-paywall-screen='confirm'] input[name='requestType']").val(""),ev.utils.find(document,t.selector+" [data-paywall-screen='confirm'] div[id='"+i.requestType.toLowerCase()+"']").show(),ev.utils.find(document,t.selector+" [data-paywall-screen='confirm'] input[name='requestType']").val(i.requestType),ev.screens.registry[e.NEWSPAPER_REPLACEMENT.id].transition("confirm")}),(function(){ev.forms.utils.error(ev.commons.getErrorMessages().generic)}),{ignoreSuccessMessage:!0}),ev.forms.onSubmit(ev.utils.getFormFromId(e.NEWSPAPER_REPLACEMENT.id+"-form"),(function(t,i){return ev.screens.registry[e.NEWSPAPER_REPLACEMENT.id].transition("loading"),ev.service.sap.requestNewspaperReplacement(i)}),(function(i){ev.utils.find(document,t.selector+" [data-paywall-screen='success'] div[id='"+i.requestType.toLowerCase()+"']").show(),ev.screens.registry[e.NEWSPAPER_REPLACEMENT.id].transition("success")}),(function(e){ev.forms.utils.error(ev.commons.getErrorMessages().generic),r.refresh()}),{ignoreSuccessMessage:!0,ignoreFailureMessage:!0})}(t)})).catch((function(e){ev.utils.find(document,t.selector+"__error").show()}))}},o={refresh:function(t){(t=t||{}).selector="."+e.CHANGE_PAYMENT_METHOD.id,i({selector:t.selector,load:function(e,t){return ev.service.sap.load.changePaymentCard(e,t.issuingCompany,t.subscriptionId)},issuingCompany:t.issuingCompany,subscriptionId:t.subscriptionId}).then((function(){!function(t){t=t||{},ev.utils.find(document,t.selector+"__container [data-subscription-popup]").on(["click"],(function(e,t){ev.utils.find(document,"#"+t.getAttribute("data-subscription-popup")).toggleClass("active"),ev.utils.find(document,"body").toggleClass("modal-open")})),ev.utils.find(document,".current-card .btn.btn-primary").on(["click"],(function(){ev.gtm.push("myaccount","cambiar-tarjeta","nueva-tarjeta")}));for(var i=(new Date).getFullYear(),n=0;n<15;n++)ev.utils.find(document,t.selector+"__container [data-paycomet=dateYear]").append('<option value="'+i.toString().substring(2,4)+'">'+i+"</option>"),i++;ev.forms.onSubmit(ev.utils.getFormFromId(e.CHANGE_PAYMENT_METHOD.id+"-form"),(function(t,i){return ev.screens.registry[e.CHANGE_PAYMENT_METHOD.id].transition("loading"),ev.service.sap.changePaymentCard(i)}),(function(t){ev.screens.registry[e.CHANGE_PAYMENT_METHOD.id].transition("successful")}),(function(){ev.screens.registry[e.CHANGE_PAYMENT_METHOD.id].transition("submit"),ev.utils.find(document,"#paymentErrorMsg").append(ev.commons.getErrorMessages().generic),ev.utils.find(document,"#paycometPaymentForm button").removeAttr("disabled")}),{ignoreSuccessMessage:!0});const r=ev.utils.find(document,"#paymentErrorMsg").getFirst();if(r){var o=new MutationObserver((function(e,t){for(var i=0;i<e.length;i++)if("childList"===e[i].type){const e=ev.utils.find(document,"#paymentErrorMsg");e.getFirst().innerText&&(e.addClass("alert"),e.addClass("alert-danger"))}}));o.observe(r,{attributes:!1,childList:!0,subtree:!0})}}(t)})).catch((function(e){ev.utils.find(document,t.selector+"__error").show()}))},handlePaycometTemporalToken:function(){const t=ev.utils.find(document,"#paymentErrorMsg");t.removeClass("alert"),t.removeClass("alert-danger");var i=new Event("submit",{bubbles:!0,cancelable:!0});ev.utils.getFormFromId(e.CHANGE_PAYMENT_METHOD.id+"-form").dispatchEvent(i)}},s=function(){var t=function(t){if(t){var i=ev.utils.getFormFromId(t.action.id+"-form");switch(t.action.id){case e.CANCEL_SUBSCRIPTION.id:const n="."+t.action.id;ev.forms.onSubmit(i,(function(e,i){return ev.screens.registry[t.action.id].transition("submitting"),t.onSubmit(i)}),(function(e){ev.screens.registry[t.action.id].transition("success")}),(function(e){if(e&&"object"==typeof e){const n=e.validationErrors||[];return i.each((function(e){n.forEach((function(t){ev.forms.utils.inputError(e,{field:t.field,message:ev.commons.getErrorMessages().invalid_format})}))})),void ev.screens.registry[t.action.id].back()}ev.screens.registry[t.action.id].transition("confirm"),ev.forms.utils.error(ev.commons.getErrorMessages().generic)}),{ignoreSuccessMessage:!0,ignoreFailureMessage:!0,ignoreValidationErrors:!0}),ev.utils.find(document,n+" [data-paywall-screen='confirm'] select").on(["change"],(function(e,t){const i=ev.utils.find(document,n+" [data-paywall-screen='confirm'] .btn-primary");0!==t.selectedIndex?i.show():i.hide()}));break;case e.CHANGE_EDITION.id:ev.forms.onSubmit(i,(function(e,i){return ev.screens.registry[t.action.id].transition("submitting"),t.onSubmit(i)}),(function(e){(e=e||{}).startDate&&ev.utils.find(document,'[data-paywall-screen-id="'+t.action.id+'"] .'+t.action.id+"__date").append(e.startDate),ev.screens.registry[t.action.id].transition("success")}),(function(){ev.screens.registry[t.action.id].transition("confirm"),ev.forms.utils.error(ev.commons.getErrorMessages().generic)}),{ignoreSuccessMessage:!0});break;case e.CHANGE_DELIVERIES.id:t.action.id}ev.utils.addEventHandlerFromData("click","data-subscription-action="+t.action.id,(function(i,r){var s=ev.utils.getFormFromId(t.action.id+"-form");const a="."+t.action.id;if("embedded"===i.getAttribute("data-layout"))return c=t.action,d=i.getAttribute("data-subscription-id"),ev.commons.referrer.save(),void ev.utils.redirect("/perfil/ev/suscripciones/papel/"+c.url+"/"+d);var c,d;switch(t.action.id){case e.CHANGE_PAYMENT_METHOD.id:o.refresh({issuingCompany:i.getAttribute("data-issuing-company"),subscriptionId:i.getAttribute("data-subscription-id")});break;case e.CANCEL_SUBSCRIPTION.id:ev.screens.registry[t.action.id].transition("confirm"),ev.utils.find(document,a+" [data-paywall-screen='confirm'] .btn-primary").hide(),ev.utils.find(document,a+" [data-paywall-screen='confirm'] select").getFirst().selectedIndex=0,ev.utils.find(s.getFirst(),"[name='subscriptionId']").val(i.getAttribute("data-subscription-id")),ev.gtm.push("myaccount","cancelar-suscripcion","cancelar-suscripcion");break;case e.CHANGE_EDITION.id:ev.gtm.push("myaccount","cambiar-idioma-iniciotramite","confirmar");const r=ev.commons.getMessageTable().custom.language;ev.utils.find(s.getFirst(),"[name='publicationId']").val(i.getAttribute("data-publication-id"));const c=ev.utils.find(document,'[data-paywall-screen-id="'+t.action.id+'"] .'+t.action.id+"__language");c.empty(),c.append("00000011"===i.getAttribute("data-edition-id")?r.spanish:r.catalan),ev.utils.find(s.getFirst(),"[name='subscriptionId']").val(i.getAttribute("data-subscription-id")),ev.utils.find(s.getFirst(),"[name='editionId']").val(i.getAttribute("data-edition-id"));break;case e.CHANGE_DELIVERIES.id:n.refresh({subscriptionId:i.getAttribute("data-subscription-id")})}ev.utils.find(document,"body").toggleClass("modal-open"),ev.utils.find(document,"#"+i.getAttribute("data-subscription-action")).toggleClass("active")}))}},r=function(i){void 0===(i=i||{}).registerHandlers&&(i.registerHandlers=!0),function(i){if((i=i||{}).registerHandlers&&(t({action:e.CHANGE_PAYMENT_METHOD}),t({action:e.CHANGE_EDITION,onSubmit:function(e){return ev.service.sap.changeEdition(e)}}),t({action:e.CANCEL_SUBSCRIPTION,onSubmit:function(e){return ev.service.sap.cancelSubscription(e)}}),t({action:e.CHANGE_DELIVERIES}),t({action:e.NEWSPAPER_REPLACEMENT}),t({action:e.INVOICES}),ev.utils.addEventHandlerFromData("click","data-subscription-popup",(function(e,t){ev.utils.find(document,"#"+e.getAttribute(t)).toggleClass("active"),ev.utils.find(document,"body").toggleClass("modal-open")})),ev.forms.onSubmit(ev.utils.getFormFromId("linkSubscription"),(function(e,t){return ev.service.sap.link(t)}),(function(){window.location.reload()})),ev.utils.addEventHandlerFromData("click","data-accounts-subscription=unlink",(function(e,t){ev.service.sap.unlink().then((function(){window.location.reload()}))})),ev.utils.addEventHandlerFromData("click","data-subscription-refresh",(function(e,t){"true"!==e.getAttribute(t)||s(i)}))),i.autoTriggerSingleAction){var n=ev.utils.find(document,"[data-subscription-action]");if(1===n.asArray().length){var r=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});n.getFirst().dispatchEvent(r)}}}(i)},s=function(e){(e=e||{}).selector=".print-subscriptions",i({selector:e.selector,load:function(e,t){return ev.service.sap.load.subscriptions(e)}}).then((function(){r(e)})).catch((function(t){ev.utils.find(document,e.selector+"__error").show()}))};return{refresh:s,refreshSubscriptionSingleAction:function(e){e=e||{};const t=".subscription-single-action",i=ev.utils.find(document,t+"__container"),n=ev.utils.find(document,t+" .evl-spinner");i.getFirst()&&(n.show(),i.empty(),ev.service.sap.load.singleAction(e.action,e.layout,i,e.purchaseId,e.isEpaper).then((function(){const t=ev.utils.find(document,".purchases.purchasesSingleAction");t.getFirst()?t.hide():n.hide(),r(e)})).catch((function(e){n.hide(),ev.utils.find(document,t+"__error").show()})))}}}(),a=function(){var e=function(e){e=e||{},ev.subscriptions.init(),ev.utils.addEventHandlerFromData("click","data-invoice-id",(function(e,t){const i=e.getAttribute("data-invoice-id"),n=e.getAttribute("data-invoice-type");document.body.style.cursor="wait",ev.service.sap.downloadInvoice(i,n).then((function(e){var t=document.createElement("a");t.href=window.URL.createObjectURL(e),t.download=i+".pdf",t.style.display="none",document.body.appendChild(t),t.click(),ev.gtm.push("myaccount"," factura-descargar","factura")})).catch((function(){ev.forms.utils.error(ev.commons.getErrorMessages().generic)})).finally((function(){document.body.style.cursor="default"}))}))};return{refresh:function(t){(t=t||{}).selector=".sap-invoices",i({selector:t.selector,load:function(e,t){return ev.service.sap.load.invoices(e)}}).then((function(){e(t)})).catch((function(e){ev.utils.find(document,t.selector+"__error").show()}))}}}(),c=function(){const e="card-management",t={id:"add-beneficiary-card"};var n={},r=function(o){(o=o||{}).selector="."+e,i({selector:o.selector,load:function(e,t){return ev.service.sap.load.cardManagement(e)}}).then((function(){n={},function(i){i=i||{},ev.utils.find(document,"#"+e+"-form."+t.id+" input:not([replace-required=false])").removeAttr("disabled"),ev.utils.find(document,"#"+e+"-form."+t.id+" input:not([replace-required=false])").attr("required",""),ev.utils.getFormFromId(e+"-form").on(["submit"],(function(e,t){if(e.preventDefault(),n=ev.serialize.form(t),ev.forms.validate(t)){if(!n.action)return void ev.forms.utils.error(ev.commons.getErrorMessages().generic);"replace-holder-card"===n.action&&ev.gtm.push("myaccount","tarjetaclub-sustitucion","sustitucion"),"cancel-beneficiary-card"===n.action&&ev.gtm.push("myaccount","tarjetaclub-beneficiarios-baja","baja"),"add-beneficiary-card"===n.action&&ev.gtm.push("myaccount","tarjetaclub-beneficiarios-iniciotramite","alta"),ev.utils.find(document,"body").toggleClass("modal-open"),ev.utils.find(document,"#"+n.action).toggleClass("active")}})),ev.forms.onSubmit(ev.utils.getFormFromId(e+"-confirm-form"),(function(e,t){return ev.gtm.push("myaccount","tarjetaclub-sustitucion-confirmar","confirmar"),ev.screens.registry[n.action].transition("loading"),ev.service.sap.handleFidelityCard(n)}),(function(e){e=e||{},"replace-holder-card"===n.action&&e.startDate&&ev.utils.find(document,'[data-paywall-screen-id="'+n.action+'"] .'+n.action+"__date").append(e.startDate+"."),ev.screens.registry[n.action].transition("successful")}),(function(){ev.screens.registry[n.action].transition("error")}),{ignoreSuccessMessage:!0}),ev.utils.addEventHandlerFromData("click","data-subscription-popup",(function(e,t){ev.utils.find(document,"#"+e.getAttribute(t)).toggleClass("active"),ev.utils.find(document,"body").toggleClass("modal-open")})),ev.utils.addEventHandlerFromData("click","data-subscription-refresh",(function(e,t){"true"!==e.getAttribute(t)?ev.screens.registry[n.action].transition("confirm"):r(i)}))}(o)})).catch((function(e){ev.utils.find(document,o.selector+"__error").show()}))};return{refresh:r}}();return{subscriptions:s,invoices:a,fidelityCard:c,changePaymentCard:o,changeDelivery:n,newspaperReplacement:r}}(),E=(o=null,s=function(e){e=e||{};const t=ev.utils.find(document,e.containerSelector+"__container"),i=ev.utils.find(document,e.containerSelector+" .evl-spinner");i.show(),t.empty(),ev.service.loadHorecaConfig(t).then((function(){i.hide()})).catch((function(){i.hide(),ev.utils.find(document,e.containerSelector+"__error").show()}))},{init:function(e){o=(e=e||{}).containerSelector,s({containerSelector:o})},validation:(t=function(e){e.eventSentToAnalytics=!1,ev.storage.save("local","evolok:ev_access_token",e),ev.utils.redirect("/perfil/ev/horeca/acceso-exitoso")},{init:function(e){e=e||{};var i=ev.storage.load("local","evolok:ev_access_token")||{};if(!i.eventSentToAnalytics&&i.purchaseId)try{ev.gtm.push("evolok","acceso-horeca",i.purchaseId,!0),i.eventSentToAnalytics=!0,ev.storage.save("local","evolok:ev_access_token",i)}catch(e){console.error("Error: Could not process user segments."+(e.message?" Reason: "+e.message:""))}switch(e.detectionStrategy){case"pin":!function(e){if(!e.formId)return;const i=ev.utils.getFormFromId(e.formId);ev.forms.onSubmit(i,(function(e,t){return ev.forms.validate(e)?ev.service.validateHorecaPin(t):Promise.reject({ignoreOnFailure:!0})}),(function(e){(e=e||{}).purchaseId&&e.accessCode?t(e):ev.forms.utils.error(ev.commons.getErrorMessages().generic)}),null,{ignoreSuccessMessage:!0})}(e);break;case"geocoding":!function(e){(e=e||{}).purchaseId&&navigator.geolocation?navigator.geolocation.getCurrentPosition((function(i){const n={lat:i.coords.latitude,lng:i.coords.longitude,purchaseId:e.purchaseId};ev.service.validateHorecaGeocoding(n).then((function(i){(i=i||{}).purchaseId&&i.accessCode?t(i):ev.screens.registry[e.screenId].transition("error")})).catch((function(){ev.screens.registry[e.screenId].transition("error")}))}),(function(){ev.screens.registry[e.screenId].transition("error")}),{timeout:1e4}):ev.screens.registry[e.screenId].transition("error")}(e)}}}),geocoding:(i=[],n=!1,r=function(){ev.utils.addEventHandlerFromData("click","data-popup",(function(e,t){ev.commons.togglePopup(e.getAttribute(t))}))},{init:function(e){e=e||{},n||(EV.Event.on("gg.user_updated",(function(){ev.utils.find(document,e.confirmationContainerId).empty(),ev.service.loadGeocodingConfirmation(ev.utils.find(document,e.confirmationContainerId)).then((function(){const t=ev.utils.find(document,e.confirmationContainerId+"Form");ev.forms.onSubmit(t,(function(t,n){if(!ev.forms.validate(t))return Promise.reject({ignoreOnFailure:!0});const r=i.filter((function(e){return e.placeId===n.placeId}))[0];return 0===r.length?Promise.reject({}):ev.service.updateGeocoding(e.purchaseId,r)}),(function(){ev.commons.togglePopup(e.confirmationContainerId.replace("#","")),s({containerSelector:o})}),(function(){ev.forms.utils.error(ev.commons.getErrorMessages().generic)})),r(),ev.utils.find(document,e.confirmationContainerId).toggleClass("active"),ev.utils.find(document,"body").toggleClass("modal-open")})).catch((function(){ev.forms.utils.error(ev.commons.getErrorMessages().generic)}))})),n=!0),ev.utils.addEventHandlerFromData("click","data-geocoding-target",(function(t,i){var n=t.getAttribute(i);t.getAttribute("data-purchase-id"),"delete"===n&&ev.commons.togglePopup(e.deletionContainerId.replace("#",""))}));const t=ev.utils.find(document,e.deletionContainerId+"Form");ev.forms.onSubmit(t,(function(e,t){return ev.service.deleteGeocoding(t.purchaseId)}),(function(){ev.commons.togglePopup(e.deletionContainerId.replace("#","")),s({containerSelector:o})}),(function(){ev.forms.utils.error(ev.commons.getErrorMessages().generic)})),r(),ev.commons.disableFormAutocomplete()},set results(e){i=e}})}),b=(a="lv",c="md",d=function(){ev.utils.spinner.hide(),ev.utils.find(document,".horeca-epaper__error").show()},{reader:function(e){if((e=e||{}).ticket){window.readerEvents={};var t,i={languageCode:"es",splashScreen:{time:1500},theme:(t=e.publication,t===c?{backgroundColor:"#f0f0f0",topbarIconColor:"#ffffff",topbarTitleColor:"#ffffff",topbarBackgroundColor:"#000000",topbarBorderColor:"rgba(255, 255, 255, 0.15)",logo:"https://epaper.mundodeportivo.com/img/logo.png",articleTitleColor:"#ffffff",articleBackgroundColor:"white",articleLogoBackgroundColor:"#000000",articleTopbarIconColor:"#ffffff",articleTopbarBorderColor:"rgba(0,0,0,0.15)",articleTopbarBackgroundColor:"#000000"}:{backgroundColor:"#f0f0f0",topbarIconColor:"#ffffff",topbarTitleColor:"#ffffff",topbarBackgroundColor:"#012c63",topbarBorderColor:"rgba(255, 255, 255, 0.15)",logo:"https://epaper.lavanguardia.com/img/logo.png",articleTitleColor:"#ffffff",articleBackgroundColor:"white",articleLogoBackgroundColor:"#012c63",articleTopbarIconColor:"#ffffff",articleTopbarBorderColor:"rgba(0,0,0,0.15)",articleTopbarBackgroundColor:"#012c63"}),printArticle:!0,printPage:!1,boxLayer:!0,help:!1,"startPage-":1,tableOfContent:!0,railway:!0,articleTextSelection:!1,forceOnePage:!1,railwaySinglePageLayout:!1,disableVerticalLayout:!1,disableHorizontalLayout:!1,closeButton:function(){history.go(-1)},selector:e.selector,ticket:e.ticket},n=ev.storage.load("local","evolok:ev_access_token");if(!n)return d(),void ev.utils.find(document,e.selector).hide();ev.service.validateHorecaEpaper(n,e.publication).then((function(){ev.utils.spinner.hide(),MilibrisReader.load(i)})).catch((function(){d(),ev.utils.find(document,e.selector).hide()}))}else console.error("Error: Could not initialize miLibris reader. Reason: the ticket can not be undefined, null or empty.")},issues:function(e){e=e||{};var t=ev.storage.load("local","evolok:ev_access_token");t?ev.service.validateHorecaEpaper(t,e.publication).then((function(){const i=ev.utils.find(document,".horeca-epaper__issues");return ev.service.loadEpaperIssues(i,t.purchaseId,e.publication)})).then((function(){ev.utils.spinner.hide(),ev.utils.addEventHandlerFromData("click","data-epaper-ticket",(function(e,i){var n={},r=e.getAttribute("data-epaper-publication");r&&r!==a&&(n.publication=r),ev.utils.redirectWithParams("/perfil/ev/horeca/epaper/reader/"+t.purchaseId+"/"+e.getAttribute(i),n)}))})).catch((function(){d()})):d()}}),h=(u=null,l=null,f=null,{init:function(e){e=e||{};const t=".product-list",i=ev.utils.find(document,t+"__container"),n=ev.utils.find(document,".header_button"),r=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?n.style("visibility","hidden"):n.style("visibility","visible")}))}),{root:null,rootMargin:"0px",threshold:.1});i.each((function(e){r.observe(e)})),EV.Event.on(EV.Event.PM_ERROR,(function(e){ev.utils.find(document,t+" .evl-spinner").hide(),ev.utils.find(document,t+"__widget").show()})),ev.utils.addEventHandlerFromData("click","data-consent-action",(function(e,t){"agreetoall"===e.getAttribute(t)&&(window.didomiOnReady=window.didomiOnReady||[],window.didomiOnReady.push((function(e){e.setUserAgreeToAll()})),ev.commons.referrer.load())})),e.offersConfig&&e.offersConfig.external&&function(e){const t=".club-vanguardia__features--external",i=ev.utils.find(document,t+" .evl-spinner");try{ev.service.landing.load.externalOffers(e.url,e.callback,e.version).then((function(e){const i=[],n=(new DOMParser).parseFromString(e.model.html,"text/html");if(ev.utils.find(n,".article-module").each((function(e){i.push({discountText:ev.utils.find(e,".call-to-action").getFirst().innerText.replace(/\n/g,"").trim(),descriptionText:ev.utils.find(e,".epigraph").getFirst().innerText.replace(/\n/g,"").trim(),title:ev.utils.find(e,"h2").getFirst().innerText.replace(/\n/g,"").trim(),url:ev.utils.find(e,"h2 > a").attr("href"),imageUrl:ev.utils.find(ev.utils.find(e,".image-container").getFirst(),"img").attr("data-src"),isUrlExternal:!0})})),0===i.length)throw new Error;const r=ev.utils.find(document,t);if(!r.getFirst())throw new Error;return ev.service.landing.load.offers(i,r)})).catch((function(e){ev.utils.find(document,t+"+div").show()})).finally((function(){i.hide()}))}catch(e){i.hide(),ev.utils.find(document,t+"+div").show()}}(e.offersConfig)},refresh:function(e){e=e||{};const t=".product-list",i=ev.utils.find(document,t+"__container"),n=ev.utils.find(document,t+" .evl-spinner");try{if(!i.getFirst())throw new Error;if(!h.products)throw new Error;var r=[];h.products.forEach((function(e){const t={};if(t.id=e.id,t.productName=e.name,t.recommended=h.recommended===e.name,e.bundlePlans&&e.bundlePlans.length>0){const t=e.bundlePlans[0],i={};i.frequency=t.frequency,i.trialPrice=t.trialPrice,i.finalPrice=t.finalPrice,i.discount=t.discount,e.paymentPlans.push(i)}if(e.paymentPlans&&e.paymentPlans.length>0){const i=e.paymentPlans[0];t.name=i.frequency.displayName.toUpperCase(),t.price=(i.trialPrice?i.trialPrice:i.finalPrice).replace(".","'"),t.period=" €/"+("MONTH1"===i.frequency.id?"mes":"año"),t.discount=i.trialPrice&&i.discount&&i.discount.displayName?i.discount.displayName:"Sin descuento"}r.push(t)})),n.show(),i.empty(),ev.service.landing.load.products(r,i).then((function(){ev.utils.addEventHandlerFromData("click","data-product-id",(function(e,t){if(!h.products)return;const i=e.getAttribute(t);if(!i)return;const n=h.products.find((function(e){return e.id===i}));if(!n)return;const r=ev.utils.find(document,"#ev-product-selection__container div[id^='product-"+n.name+"']");if(r.getFirst()){var o=ev.utils.find(r.getFirst(),"div[id^='payment-plan-']").getFirst(),s=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});o.dispatchEvent(s)}}))})).catch((function(e){ev.utils.find(document,t+"__error").show()})).finally((function(){n.hide()}))}catch(e){n.hide(),ev.utils.find(document,t+"__error").show()}},get products(){return u},set products(e){u=e},get version(){return l},set version(e){l=e},get recommended(){return f},set recommended(e){f=e}});return{init:function(){ev.utils.addEventHandlerFromData("click","data-subscription-change",(function(e,t){const i=e.getAttribute("data-subscription-id"),n=ev.utils.getFormFromId(e.getAttribute(t));ev.utils.find(document,"#subscriptions").hide(),ev.utils.find(n.getFirst(),"[name='idSubscription']").val(i),n.show()})),ev.utils.addEventHandlerFromData("click","data-subscription-popup",(function(e,t){ev.utils.find(document,"#"+e.getAttribute(t)).toggleClass("active"),ev.utils.find(document,"body").toggleClass("modal-open")})),ev.utils.addEventHandlerFromData("click","data-subscription-back",(function(e,t){const i=ev.utils.getFormFromId(e.getAttribute(t));ev.utils.find(document,"#subscriptions").show(),i.hide()})),ev.forms.onSubmit(ev.utils.getFormFromId("linkSubscription"),(function(e,t){return ev.service.sap.link(t)}),(function(){window.location.reload()})),ev.utils.addEventHandlerFromData("click","data-accounts-subscription=unlink",(function(e,t){ev.service.sap.unlink().then((function(){window.location.reload()}))}))},requestSuccess:function(e,t){const i=ev.utils.getFormFromId(e).getFirst();ev.utils.find(i,"#ticketNumber").empty(),ev.utils.find(i,"#ticketNumber").append(t),ev.utils.find(i,"[data-subscription-success]").show(),ev.utils.find(i,"[data-form-submit]").hide(),ev.utils.find(i,"input").prop("readonly",!0)},fiscal:m,products:v,digital:p,sap:g,horeca:E,renfe:{init:function(e){e=e||{},ev.forms.onSubmit(ev.utils.getFormFromId("renfeCardForm"),(function(e,t){return t=t||{},ev.forms.validate(e)?(ev.utils.find(document,"[renfe-button-validate]").attr("disabled",""),ev.service.renfe.cardSubscription(t.renfeCardId)):Promise.reject({ignoreOnFailure:!0})}),(function(e){ev.utils.find(document,"#containerRenfeForm").hide(),ev.utils.find(document,"#containerSuccess").show()}),(function(e){ev.utils.find(document,"[renfe-button-validate]").removeAttr("disabled")}),{ignoreSuccessMessage:!0,ignoreFailureMessage:!1})}},milibris:b,landing:h}}();
ev.swiper=function(){const e=".swiper-container";var i=function(){const e=ev.utils.find(document,".swiper-container .swiper-slide-active").getFirst();e&&ev.gtm.pageview.trigger(e.id)};return{init:function(n){n=n||{};new Swiper(e,{autoHeight:!0,watchOverflow:!0,observer:!0,observeParents:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination"},on:{init:function(){ev.forms.init(),ev.gtm.pageview.conf("embedded",n.flow),i()},slideChangeTransitionEnd:function(){i()}}})}}}();
ev.utils=function(){var n=function(n){return f(n)?"":"?"+Object.keys(n).map((function(t){return t+"="+encodeURIComponent(n[t])})).join("&")},t=function(n,t,e){return n.attachEvent?n.attachEvent("on"+t,(function(t){e(t,n)})):n.addEventListener(t,(function(t){e(t,n)}),!1)},e=function(n,t,e){return n.attachEvent?n.detachEvent("on"+t,e):n.removeEventListener(t,e,!1)},r=function(n){return Array.isArray(n)||n instanceof Array},o=function(n){var r=n||[],i=!1,u=function(n,t){if(null==t)return window.getComputedStyle(r[0]).getPropertyValue(n);f((function(e){e.style[n]=t}))},c=function(n,e,r){var o=function(n,t){(!r||r&&!i)&&(i=!0,e(n,t))};f((function(e){n.forEach((function(n){t(e,n,o)}))}))},a=function(){return r.length?Array.prototype.slice.call(r):[]},f=function(n){for(var t=0;t<r.length;t++)n(r[t])};return{hide:function(){u("display","none")},show:function(){u("display","inherit")},one:function(n,t){c(n,t,!0)},first:function(n){return 0===r.length?this:(n&&n(r[0]),o([r[0]]))},append:function(n){f((function(t){var e=(new DOMParser).parseFromString(n,"text/html");[...Array.prototype.slice.call(e.head.childNodes),...Array.prototype.slice.call(e.body.childNodes)].reduce((function(n,t){return n.push(t),n}),[]).forEach((function(n){t.appendChild(n),setTimeout((function(){if(void 0!==n.querySelectorAll)for(var t=n instanceof HTMLScriptElement?[n]:n.querySelectorAll("script"),e=0;e<t.length;e++){var r=t[e],o=document.createElement("script"),i=document.createTextNode(r.innerHTML);r.src&&(o.src=r.src),o.appendChild(i),r.parentNode.replaceChild(o,r)}}))}))}))},on:c,once:function(n,r){var o=function(t){r(t),f((function(t){n.forEach((function(n){e(t,n,o)}))}))};f((function(e){n.forEach((function(n){t(e,n,o)}))}))},style:u,addClass:function(n){f((function(t){t.classList.add(n)}))},removeClass:function(n){f((function(t){t.classList.remove(n)}))},hasClass:function(n){return a().some((function(t){return t.classList.contains(n)}))},empty:function(){f((function(n){for(;n.firstChild;)n.removeChild(n.firstChild)}))},get:function(){return r},toggleClass:function(n){f((function(t){t.classList.toggle(n)}))},asArray:a,getFirst:function(){return r.length?r[0]:null},val:function(n){f((function(t){t.value=n.trim()}))},toggle:function(n){const t=n?"flex":"block";f((function(n){window.getComputedStyle(n).display!==t?n.style.display=t:n.style.display="none"}))},attr:function(n,t){if(null==t)return r[0].getAttribute(n);f((function(e){e.setAttribute(n,t)}))},prop:function(n,t){if(null==t)return r[0][n];f((function(e){e[n]=t}))},each:f,removeHandler:function(n,t){f((function(r){n.forEach((function(n){e(r,n,t)}))}))},removeAttr:function(n){f((function(t){t.removeAttribute(n)}))},dispatchEvent:function(n){f((function(t){t.dispatchEvent(n)}))}}},i=function(n){return n.reduce((function(n,t){return n.then((function(){return t}))}),Promise.resolve())},u=function(n,t){return o(n.querySelectorAll(t))},c=function(n,t){return u(document,"["+n+"]")},a=function(n,t){return c(n).asArray()};var f=function(n){if(!n)return!0;if(Array.isArray(n))return!n.length;if("object"==typeof n){for(var t in n)if(n.hasOwnProperty(t))return!1}else if("string"==typeof n)return!n&&/^\s*$/.test(n);return!0},s=function(n,t,e,r,o){return t--,r=r||{resolve:null,reject:null},e=e||new Promise((function(n,t){r.resolve=n,r.reject=t})),n(o).then((function(n){r.resolve(n)})).catch((function(i){t>0?s(n,t,e,r,o):r.reject(i)})),e},l=function(t,e){var r=(e=e||{}).base;r&&delete e.base,ev.utils.redirect((r||"")+t+n(e))},d=function(n,t,e){if(n.targetElId){if(u(t,n.targetElId).getFirst()&&n.onMutation&&"function"==typeof n.onMutation)return n.onMutation(),e&&e.disconnect(),!0}return!1},p=function(){const n=".evl-spinner";var t=[];return{show:function(e,o,i){o||ev.utils.find(document,(i||"")+n).show(),e&&r(e)&&(t=e,e.forEach((function(n){u(document,n).hide()})))},hide:function(){ev.utils.find(document,n).hide(),t&&t.length&&(t.forEach((function(n){u(document,n).show()})),t=[])}}}();return{formatParams:n,addEvent:t,nodeListHelper:o,loadScript:function(n){return new Promise((function(t,e){var r=document.createElement("script");r.src=n,r.onload=t,r.onerror=e,document.head.appendChild(r)}))},loadStylesheet:function(n){return new Promise((function(t,e){var r=document.createElement("link");r.href=n,r.rel="stylesheet",r.type="text/css",r.onload=t,r.onerror=e,document.head.appendChild(r)}))},loadInlineStylesheet:function(n){return new Promise((function(t,e){var r=document.createElement("style");r.innerHTML=n,document.head.appendChild(r),r.onload=t,r.onerror=e}))},redirect:function(t,e){if(ev.accounts.isApp()&&!e){var r=function(n){const t=n.slice(n.indexOf("?")+1);return t&&t!==n?t.split("&").reduce((function(n,t){const e=t.indexOf("=");if(e<0)return n[t]=null,n;const r=t.slice(0,e),o=t.slice(e+1);return n[r]=decodeURIComponent(o),n}),{}):{}}(t);r.facet||(r.facet="app"),!r["auth-token"]&&ev.accounts.getAuthTokenFromUrl()&&(r["auth-token"]=ev.accounts.getAuthTokenFromUrl()),t=t.split("?")[0].split("#")[0]+n(r)}window.location.href=decodeURIComponent(t)},open:function(n){window.open(n,"_blank")},isArray:r,handlePromises:i,handleAsyncResources:function(n,t){const e=n.map((function(n){return t(n)}));return i(e)},formatLocalizedDate:function(n,t){return moment(n).format(t)},find:u,findfromData:c,findfromDataAndReturnArray:a,findInScreen:function(n,t){var e=ev.utils.find(document,"[data-"+n+"="+t+"]");return e.get().length?e.first():null},removeFromArray:function(n,t){return n.filter((function(n){return n!=t}))},isEmpty:f,unique:function(n){var t={boolean:{},number:{},string:{}},e=[];return n.filter((function(n){var r=typeof n;return r in t?!t[r].hasOwnProperty(n)&&(t[r][n]=!0):!(e.indexOf(n)>=0)&&e.push(n)}))},getFormFromId:function(n){return u(document,"#"+n)},addEventHandlerFromData:function(n,t,e,r){var o=a(t);o.length&&o.forEach((function(r){r.addEventListener(n,(function(){e(r,t)}))}))},isVisible:function(n){return n.offsetWidth>0||n.offsetHeight>0},getParam:function(n){var t=new RegExp("[?&]"+n+"=?([^&]*)?"),e=window.location.href.replace(location.hash,"").match(t);if(e)return e[1]},retryAsync:s,disableInputAutocomplete:function(n){u(document,"#"+n+" input, #"+n+" select").prop("autocomplete","off")},redirectWithParams:l,registerMutationObserver:function(n){n=n||{};const t=document.getElementById(n.id);if(!t)return;if(!d(n,t,e)){var e=new MutationObserver((function(e,r){for(var o=0;o<e.length&&("childList"!==e[o].type||!d(n,t,r));o++);}));e.observe(t,{attributes:!1,childList:!0,subtree:!0})}},isCookiePresent:function(n){return!!ev.cookie.get(n)},getQueryParams:function(n){n=n||{};var t=window.location.search.replace("?","");return t&&t&&t.split("&").forEach((function(t){var e=t.split("=");n[e[0]]=e[1]})),n},spinner:p,redirectWithOptions:function(n,t){t=t||{},ev.commons.queryParams.save();var e=ev.commons.queryParams.get();t.paramsToDelete&&ev.utils.isArray(t.paramsToDelete)&&t.paramsToDelete.forEach((function(n){e[n]&&delete e[n]})),l(n,e)},validateDateString:function(n,t,e){n=Number(n),t=Number(t)-1,e=Number(e);const r=new Date(e,t,n),o=r.getFullYear()===e,i=r.getMonth()===t,u=r.getDate()===n;return o&&i&&u},minTwoDigits:function(n){return(n<10?"0":"")+n},getSiblings:function(n){var t=[];if(!n||!n.parentNode)return t;for(var e=n.parentNode.firstChild;e;)1===e.nodeType&&e!==n&&t.push(e),e=e.nextSibling;return t},areCookiesEnabled:function(){try{document.cookie="cookietest=1";var n=-1!==document.cookie.indexOf("cookietest=");return document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",n}catch(n){return!1}},hasBrowserSupport:function(){var n=window.navigator.userAgent;return!(n.indexOf("MSIE ")>0)&&!(n.indexOf("Trident/")>0)},transformInnerTextToHtml:function(n,t,e){var r=u(n,t).getFirst();if(r){var o=e||r.innerText;r.innerText="",u(n,t).append(o)}},camelCaseToDash:function(n){return n.replace(/([A-Z])/g,(function(n){return"-"+n[0].toLowerCase()}))}}}();
lv.profile.common={init:function(o){$("[data-accounts=logout]").click(function(o){gg.accounts.getService().logout().success(function(){gg.gtm.push("usuarios","logout","perfil",!0),window.location.reload()}).failure(function(o){lv.profile.utils.error(o.errorMessage)})}),$(".header-profile__burger").click(function(){$("body").toggleClass("blurred")})}};
lv.profile.interests={init:function(){lv.profile.utils.form("#interestsForm",function(t){return t.data=t.data||{},t.data.interests=t.data.interests||{},t.data.interests.hobbies=t.data.interests.hobbies||[],gg.accounts.getService().update(t)})}};
lv.profile.newsletters={init:function(){lv.profile.utils.form("#newslettersForm",function(t){return t.data=t.data||{},t.data.newsletters=t.data.newsletters||[],gg.accounts.getService().update(t)})}};
lv.profile.privacy={init:function(){lv.profile.utils.form("#privacyform",function(i){return i.data=i.data||{},i.data.notifications=i.data.notifications||[],gg.accounts.getService().update(i)})}};
lv.profile.profile=function(){var a=function(){$("[data-accounts=deleteAccount]").click(function(a){$.ajax("/perfil/user",{type:"DELETE"}).done(function(){window.location.reload()}).fail(function(a){lv.profile.utils.error(a.responseJSON.errorMessage)})}),$("[data-profile=deleteImage]").click(function(a){$("[data-profile=image]")[0].removeAttribute("src"),$("[name=image]")[0].removeAttribute("value")}),$("[data-profile=uploadImage]").click(function(a){var o=new FileReader;o.onload=function(a){$("[data-profile=image]").prop("src",o.result),$("input[name=image]").val(o.result)},$("[data-profile=binary]")[0].click(),$("[data-profile=binary]").one("change",function(a){var e=$(this)[0].files;e.length&&o.readAsDataURL(e[0])})})},o=function(){$("[data-accounts=addPassword]").click(function(a){gg.accounts.getService().forgottenPassword($(this).data("email")).success(function(){$("#addPassword").toggleClass("active"),$("[data-popup=emailSent]").click()}).failure(function(a){lv.profile.utils.error(a.errorMessage)})}),lv.profile.utils.form("#passwordForm",function(a){return gg.accounts.getService().changePassword(a.password,a.oldPassword)},function(a){a&&($("#changePassword").toggleClass("active"),$("[data-popup=changePassword]").click())}),$("[data-accounts-oauth-link]").click(function(a){gg.accounts.getService().oAuthLogin($(this).data("accounts-oauth-link")).success(function(){window.location.reload()}).failure(function(a){lv.profile.utils.error(a.errorMessage)})}),$("[data-accounts-oauth-unlink]").click(function(a){$.ajax("/perfil/user/oauth/"+$(this).data("accounts-oauth-unlink"),{type:"DELETE"}).done(function(){window.location.reload()}).fail(function(a){lv.profile.utils.error(a.responseJSON.errorMessage)})})};return{init:function(){a(),o(),$("[data-popup]").click(function(a){$("#"+$(this).data("popup")).toggleClass("active")}),lv.profile.utils.form("#profileForm",function(a){return a.data.notifications=a.data.notifications||[],gg.accounts.getService().update(a)})}}}();
lv.profile.service=function(){var n=ev.accounts.getMultitenantScriptConfig().api.url,e=function(n){var e=new gg.AccountsServicePromise;return n(e),e.handler};return{link:function(t){return e(function(e){gg.ajax.post(n+"/user/client",t,function(n){e.resolve(n)},{credentials:!0})})},unlink:function(){return e(function(e){gg.ajax.delete(n+"/user/client",function(n){e.resolve(n)},{credentials:!0})})},changeEdition:function(t){return e(function(e){gg.ajax.post(n+"/user/subscriptions/"+t.idSubscription+"/request/edition-change",t,function(n){e.resolve(n)},{credentials:!0,type:"json"})})},requestEVouchers:function(t){return e(function(e){gg.ajax.post(n+"/user/subscriptions/"+t.idSubscription+"/request/e-vouchers",t,function(n){e.resolve(n)},{credentials:!0,type:"json"})})},changeDelivery:function(t){return e(function(e){gg.ajax.post(n+"/user/subscriptions/"+t.idSubscription+"/request/delivery-change",t,function(n){e.resolve(n)},{credentials:!0,type:"json"})})}}}();
lv.profile.screens=function(){var n=function(n,c,t){gg.accounts.onUnlogged(function(){o(n,c,t)}),gg.accounts.onLogged(function(){var n=e("_ref");n?window.location.href=decodeURIComponent(n):window.location.reload()})},o=function(n,o,e){e.facet=e.facet||"web",e.sourceAgent=e.sourceAgent||"profile",gg.accounts.show(n,o,e,{selector:"#screen-container"})},e=function(n){var o=new RegExp("[?&]"+n+"=?([^&]*)?"),e=window.location.href.replace(location.hash,"").match(o);if(e)return e[1]};return{load:function(e,c,t){"login"!=e&&"signwall"!=e||"forgotten_password"==c?o(e,c,t):n(e,c,t)}}}();
lv.profile.streets=function(){var e=!1,t=function(t,a,n){var l=0,i=null,o=[];$(t).focusout((function(t){e||(clearTimeout(l),l=setTimeout((function(){c()}),300))})),$(t).bind("forceFocusOut",(function(){c()})),$(t).keyup((function(t){if(!e&&i){var a=this.value;clearTimeout(l),a?l=setTimeout((function(){$.get(i.replace("{data}",a),(function(e){u(e)}))}),300):u([])}})),$(a).on("click","a[data-value]",(function(t){e||(clearTimeout(l),r({id:$(this).data("value"),label:$(this).text()}))}));var r=function(e){$(t).val(e.label),$(t).data("value",e.id),$(t).data("code",e.code),$(a).hide()},c=function(){var e={id:"",label:""};o.length>0&&(e=o[0]),r(e)},u=function(e){var t="";o=e,e&&e.length>0?$.each(e,(function(e,a){t+='<li class="autocomplete-content-item"><a data-value="'+(a.id?a.id:a.code)+'">'+a.label+"</a></li>"})):t='<li class="autocomplete-content-item"><a>Sin resultados</a></li>',$(a+" ul").html(t),$(a).show()},s=function(a){e||(i=a,a?($(t).attr("data-form-disabled",!1),$(t).prop("disabled",!1)):($(t).attr("data-form-disabled",!0),$(t).prop("disabled",!0)))};s(n);return{setQueryUrl:s,clear:function(){$(t).val(""),$(t).data("value",null)}}};return{init:function(a){e=null!=a&&!1===a;var n=t("[name=town], [name*=city]","#query-town-results"),l=t("[name*=streetName], [name*=street_name]","#query-streetName-results");lv.profile.utils.loadSelect("[name*=province]",ev.accounts.getScriptConfig().streets.provinces,(function(e){n.clear(),e?n.setQueryUrl(ev.accounts.getScriptConfig().streets.towns.replace("{town}",e)):n.setQueryUrl(null)}));var i=function(){l.clear();var e=$("[name=town], [name*=city]").data("value"),t=$("[name*=streetType], [name*=street_type]").val();e&&t?l.setQueryUrl(ev.accounts.getScriptConfig().streets.streets.replace("{town}",e).replace("{streetType}",t)):l.setQueryUrl(null)};$("[name=town], [name*=city]").change((function(e){i()})),lv.profile.utils.loadSelect("[name*=streetType], [name*=street_type]",ev.accounts.getScriptConfig().streets.streetTypes,(function(e){i()}))},disable:function(){e=!0},enable:function(){e=!1}}}();
lv.profile.subscriptions={init:function(){$("[data-subscription-change]").click(function(i){$("#subscriptions").hide(),id=$(this).data("subscription-id"),$("#"+$(this).data("subscription-change")).find("[name='idSubscription']").val(id),$("#"+$(this).data("subscription-change")).show()}),$("[data-subscription-back]").click(function(i){$("#subscriptions").show(),$("#"+$(this).data("subscription-back")).hide()}),$("[data-accounts-subscription=unlink]").click(function(i){lv.profile.utils.cleanErrors($(this)),lv.profile.service.unlink().success(function(){window.location.reload()}).failure(function(i){lv.profile.utils.error(i.errorMessage)})}),lv.profile.utils.form("#linkSubscriptionForm",function(i){return lv.profile.service.link(i)},function(i){i&&window.location.reload()}),lv.profile.utils.form("#vouchersForm",function(i){return lv.profile.service.requestEVouchers(i)},function(e,o){e&&i($("#vouchersForm"),o.ticketId)}),lv.profile.utils.form("#addressForm",function(i){return i.townCode=$("[name=town]").data("code"),i.streetCode=$("[name=streetName]").data("code"),lv.profile.service.changeDelivery(i)},function(e,o){e&&i($("#addressForm"),o.ticketId)}),lv.profile.utils.form("#editionForm",function(i){return lv.profile.service.changeEdition(i)},function(e,o){e&&i($("#editionForm"),o.ticketId)}),$("[data-popup]").click(function(i){$("#"+$(this).data("popup")).toggleClass("active")}),$("[name=country]").change(function(i){"AND"==this.value?(lv.profile.streets.disable(),$("[name=province]").prop("required",!1).prop("disabled",!0),$("[name=province]").val(""),$("[name=town]").prop("disabled",!1),$("[name=streetName]").prop("disabled",!1)):(lv.profile.streets.enable(),$("[name=province]").prop("required",!0).prop("disabled",!1))});var i=function(i,e){i.find("#ticketNumber").text(e),i.find("[data-subscription-success]").show(),i.find("[data-form-submit]").hide(),i.find(":input").prop("readonly",!0)}}};
lv.profile.utils=function(){var o=function(o){o||(o="La solicitud no se ha podido procesar, por favor inténtalo más tarde");var r=$('<p class="error">'+o+"</p>");$("[data-profile-alerts]").append(r),setTimeout(function(){r.remove()},5e3)},r=function(){var o=$("[data-profile-success]");o.show(),setTimeout(function(){o.hide()},5e3)},e=function(o){o.find("[data-form-submit]").prop("disabled",!0),o.find("[data-form-submit]").addClass("disabled"),document.body.style.cursor="wait"},i=function(o){o.find("[data-form-submit]").prop("disabled",!1),o.find("[data-form-submit]").removeClass("disabled"),document.body.style.cursor="default"},n=function(o){o.find("input").removeClass("form__input--error"),o.find("[data-error-for]").hide(),o.find("[data-error-for]").empty()};return{form:function(t,a,d){var f=$(t);f.submit(function(t){t.preventDefault(),e(f),n(f),a(gg.serialize.form(f[0])).success(function(o){r(),i(f),d&&d(!0,o)}).failure(function(r){o(r.errorMessage),$.each(r.validationErrors||[],function(o,r){f.find("input[name='"+r.field+"']").addClass("form__input--error"),f.find("input[name='"+r.field+"']").on("click",function(){$(this).removeClass("form__input--error")}),f.find("[data-error-for='"+r.field+"']").show(),f.find("[data-error-for='"+r.field+"']").append("<p>"+r.message+"</p>")}),i(f),d&&d(!1,r)})})},error:o,cleanErrors:n,loadSelect:function(o,r,e){$.get(r,function(r){$.each(r,function(r,e){$(o).append('<option value="'+e.id+'">'+e.label+"</option>")})},"json"),e&&$(o).change(function(o){e(this.value)})}}}();
gg.comScore=function(){return{init:function(){window.didomiOnReady=window.didomiOnReady||[];var c=window._comscore=window._comscore||[],o=("https:"==document.location.protocol?"https://sb":"http://b")+".scorecardresearch.com/beacon.js";window.didomiOnReady.push(function(n){c.push({c1:"2",c2:"6398301",cs_ucfr:!1===n.getUserConsentStatusForVendor("c:comscore-jUFc9icY")?"0":"1"}),gg.util.getScript(o,{async:!0})})},beacon:function(){self.COMSCORE&&COMSCORE.beacon({c1:"2",c2:"6398301"}),$.ajax({url:gg.config.baseUrl+"/comscore-pageview.html",async:!0})}}}();
})(window);