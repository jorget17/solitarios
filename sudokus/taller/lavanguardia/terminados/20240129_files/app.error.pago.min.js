var DRTClubErrorPago_debug=window.DRTOptimize_config.debug,DRTClubErrorPago=DRTClubErrorPago||{};(DRTClubErrorPago=function(){function t(t,r,a,o,e,u){return n(function(t,r){return t<<r|t>>>32-r}(n(n(r,t),n(o,u)),e),a)}function r(r,a,o,e,n,u,i){return t(a&o|~a&e,r,a,n,u,i)}function a(r,a,o,e,n,u,i){return t(a&e|o&~e,r,a,n,u,i)}function o(r,a,o,e,n,u,i){return t(a^o^e,r,a,n,u,i)}function e(r,a,o,e,n,u,i){return t(o^(a|~e),r,a,n,u,i)}function n(t,r){var a=(65535&t)+(65535&r);return(t>>16)+(r>>16)+(a>>16)<<16|65535&a}function u(t,r,a){localStorage.setItem(m+t,r)}function i(t){return localStorage.getItem(m+t)}function c(t,r,a){var o="";if(a){var e=new Date;e.setTime(e.getTime()+24*a*60*60*1e3),o="; expires="+e.toUTCString()}document.cookie=t+"="+r+o+"; path=/"}function l(t){for(var r=t+"=",a=document.cookie.split(";"),o=0;o<a.length;o++){for(var e=a[o];" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(r))return e.substring(r.length,e.length)}return null}function d(t,r,a){var o={event:t,eventAction:r,eventLabel:a,eventValue:null};dataLayer.push(o)}function s(){var t="";return t+='<div class="drt-club">',t+='<div class="drt-club-modal">',t+='<img alt="La Vanguardia" src="https://www.lavanguardia.com/rsc/images/lv-logo.svg" class="drt-club-logo">',t+='<div class="drt-club-header">',t+="<p>Tu suscripci칩n est치 a punto de ser cancelada.</p>",t+="</div>",t+='<div class="drt-club-content">',t+="<p>Ha habido un problema con tu tarjeta durante el pago de tu suscripci칩n. Por favor, actualiza tu tarjeta para seguir suscrito a La Vanguardia.</p>",t+="</div>",t+='<div class="drt-club-footer">',t+='<a href="https://www.lavanguardia.com/perfil/ev/suscripciones/cambio-tarjeta" class="drt-club-button">Actualizar tarjeta</a>',t+="</div>",t+="</div>",t+="</div>"}function f(){var t="";return t+='<div class="drt-club-bottom">',t+='<div class="drt-club-bottom-modal">',t+='<div class="drt-club-bottom-header">',t+="<p>",t+="<span>La tarjeta de tu suscripci칩n a La Vanguardia caduca este mes</span>",t+='<a href="https://www.lavanguardia.com/perfil/ev/suscripciones/cambio-tarjeta" class="drt-club-button">Actualizar tarjeta</a>',t+='<span class="drt-club-bottom-button-close">Ahora no</span>',t+="</p>",t+="</div>",t+="</div>",t+="</div>"}function g(t){for(var r=t.split(";"),a=0;a<r.length;a++){var o=r[a].split("=");if("_id_guid"==o[0])return o[1]}return!1}function b(){var t=!1,r=new Date,a=r.getFullYear()+"-"+r.getMonth()+"-"+r.getDate(),o=i("ERROR_PAGO");o?a!=o&&(t=!0):t=!0,$.ajax({url:"https://stories.lavanguardia.com/especial/feeds/LaVanguardia/club/error-pago.jsonp?c=1",dataType:"jsonp",data:{version:function(){var t=new Date;return t.getFullYear()+"-"+t.getMonth()+"-"+t.getDate()+"-"+t.getHours()}()},jsonpCallback:"callbackErrorpago",cache:!0}).done(function(r){var o=g(decodeURIComponent(l("_id_guid"))),e=!1;if(t&&o)for(var n=h(o),i=r.data,b=0;b<i.length;b++)if(i[b].guid_md5==n){e=!1,d("layout","impression","error-pago");p=s();$("body").after(p),setTimeout(function(){$(".drt-club-footer a").click(function(){u("ERROR_PAGO",a),d("layout","click","error-pago")}),$(".drt-club-action-close").click(function(){$(".drt-club").remove()})},0);break}var v=l("ERROR_PAGO_BOTTOM");if(o&&e&&!v)for(var n=h(o),i=r.data,b=0;b<i.length;b++)if(i[b].guid_md5==n){d("layout","impression","error-pago-bottom");var p=f();$("body").after(p),setTimeout(function(){$(".drt-club-bottom-footer a").click(function(){d("layout","click","error-pago-bottom")}),$(".drt-club-bottom-action-close").click(function(){$(".drt-club").remove()}),$(".drt-club-bottom-button-close").click(function(){$(".drt-club-bottom").remove(),c("ERROR_PAGO_BOTTOM","CLOSE",0)})},0);break}}).fail(function(t,r,a){})}function v(){g(decodeURIComponent(l("_id_guid")))&&("undefined"!=typeof jQuery?p||(p=!0,$(document).ready(function(){DRTClubErrorPago_debug&&console.log("DRTClubErrorPago init"),b()})):window.setTimeout(v,50))}var p=!1,m="CLUB_",h=function(t){return function(t){for(var r,a="0123456789ABCDEF",o="",e=0;e<t.length;e++)r=t.charCodeAt(e),o+=a.charAt(r>>>4&15)+a.charAt(15&r);return o}(function(t){for(var r="",a=0;a<32*t.length;a+=8)r+=String.fromCharCode(t[a>>5]>>>a%32&255);return r}(function(t,u){t[u>>5]|=128<<u%32,t[14+(u+64>>>9<<4)]=u;for(var i=1732584193,c=-271733879,l=-1732584194,d=271733878,s=0;s<t.length;s+=16){var f=i,g=c,b=l,v=d;c=e(c=e(c=e(c=e(c=o(c=o(c=o(c=o(c=a(c=a(c=a(c=a(c=r(c=r(c=r(c=r(c,l=r(l,d=r(d,i=r(i,c,l,d,t[s+0],7,-680876936),c,l,t[s+1],12,-389564586),i,c,t[s+2],17,606105819),d,i,t[s+3],22,-1044525330),l=r(l,d=r(d,i=r(i,c,l,d,t[s+4],7,-176418897),c,l,t[s+5],12,1200080426),i,c,t[s+6],17,-1473231341),d,i,t[s+7],22,-45705983),l=r(l,d=r(d,i=r(i,c,l,d,t[s+8],7,1770035416),c,l,t[s+9],12,-1958414417),i,c,t[s+10],17,-42063),d,i,t[s+11],22,-1990404162),l=r(l,d=r(d,i=r(i,c,l,d,t[s+12],7,1804603682),c,l,t[s+13],12,-40341101),i,c,t[s+14],17,-1502002290),d,i,t[s+15],22,1236535329),l=a(l,d=a(d,i=a(i,c,l,d,t[s+1],5,-165796510),c,l,t[s+6],9,-1069501632),i,c,t[s+11],14,643717713),d,i,t[s+0],20,-373897302),l=a(l,d=a(d,i=a(i,c,l,d,t[s+5],5,-701558691),c,l,t[s+10],9,38016083),i,c,t[s+15],14,-660478335),d,i,t[s+4],20,-405537848),l=a(l,d=a(d,i=a(i,c,l,d,t[s+9],5,568446438),c,l,t[s+14],9,-1019803690),i,c,t[s+3],14,-187363961),d,i,t[s+8],20,1163531501),l=a(l,d=a(d,i=a(i,c,l,d,t[s+13],5,-1444681467),c,l,t[s+2],9,-51403784),i,c,t[s+7],14,1735328473),d,i,t[s+12],20,-1926607734),l=o(l,d=o(d,i=o(i,c,l,d,t[s+5],4,-378558),c,l,t[s+8],11,-2022574463),i,c,t[s+11],16,1839030562),d,i,t[s+14],23,-35309556),l=o(l,d=o(d,i=o(i,c,l,d,t[s+1],4,-1530992060),c,l,t[s+4],11,1272893353),i,c,t[s+7],16,-155497632),d,i,t[s+10],23,-1094730640),l=o(l,d=o(d,i=o(i,c,l,d,t[s+13],4,681279174),c,l,t[s+0],11,-358537222),i,c,t[s+3],16,-722521979),d,i,t[s+6],23,76029189),l=o(l,d=o(d,i=o(i,c,l,d,t[s+9],4,-640364487),c,l,t[s+12],11,-421815835),i,c,t[s+15],16,530742520),d,i,t[s+2],23,-995338651),l=e(l,d=e(d,i=e(i,c,l,d,t[s+0],6,-198630844),c,l,t[s+7],10,1126891415),i,c,t[s+14],15,-1416354905),d,i,t[s+5],21,-57434055),l=e(l,d=e(d,i=e(i,c,l,d,t[s+12],6,1700485571),c,l,t[s+3],10,-1894986606),i,c,t[s+10],15,-1051523),d,i,t[s+1],21,-2054922799),l=e(l,d=e(d,i=e(i,c,l,d,t[s+8],6,1873313359),c,l,t[s+15],10,-30611744),i,c,t[s+6],15,-1560198380),d,i,t[s+13],21,1309151649),l=e(l,d=e(d,i=e(i,c,l,d,t[s+4],6,-145523070),c,l,t[s+11],10,-1120210379),i,c,t[s+2],15,718787259),d,i,t[s+9],21,-343485551),i=n(i,f),c=n(c,g),l=n(l,b),d=n(d,v)}return Array(i,c,l,d)}(function(t){for(var r=Array(t.length>>2),a=0;a<r.length;a++)r[a]=0;for(a=0;a<8*t.length;a+=8)r[a>>5]|=(255&t.charCodeAt(a/8))<<a%32;return r}(t),8*t.length))).toLowerCase()};return{init:v}}()).init();